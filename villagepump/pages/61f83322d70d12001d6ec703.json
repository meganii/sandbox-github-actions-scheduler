{
  "id": "61f83322d70d12001d6ec703",
  "title": "pin-diary-4を自分のプロジェクトで使う",
  "created": 1643655973,
  "updated": 1643862244,
  "lines": [
    {
      "id": "61f83322d70d12001d6ec703",
      "text": "pin-diary-4を自分のプロジェクトで使う",
      "userId": "59fb21121207900012774b17",
      "created": 1643655973,
      "updated": 1643655979
    },
    {
      "id": "61f8332a774b1700003e7ea0",
      "text": "[pin-diary-4]を自分のプロジェクトで使ってみたかったので使う手順を書く[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1643655979,
      "updated": 1643656465
    },
    {
      "id": "61f8333b774b1700003e7ea2",
      "text": "",
      "userId": "59fb21121207900012774b17",
      "created": 1643655995,
      "updated": 1643655995
    },
    {
      "id": "61f83387774b1700003e7ea8",
      "text": "これを上からやる",
      "userId": "59fb21121207900012774b17",
      "created": 1643656072,
      "updated": 1643656749
    },
    {
      "id": "61f83345774b1700003e7ea3",
      "text": " このコードをコピーして適当なページのコードブロックに貼る",
      "userId": "59fb21121207900012774b17",
      "created": 1643656005,
      "updated": 1643656348
    },
    {
      "id": "61f8332b774b1700003e7ea1",
      "text": " 　[pin-diary-4#618c94211280f00000398123]",
      "userId": "59fb21121207900012774b17",
      "created": 1643655980,
      "updated": 1643656070
    },
    {
      "id": "61f8349f774b1700003e7eb1",
      "text": " 　ここでは例のため、YOUR_PROJECT/pin-diary-4のページにscript,jsというコードブロックをに作ったとする",
      "userId": "59fb21121207900012774b17",
      "created": 1643656351,
      "updated": 1643656355
    },
    {
      "id": "61f8335b774b1700003e7ea6",
      "text": " 生成されたコードのうち`villagepump`を自分のプロジェクト名（YOUR_PROJECT）に変更する",
      "userId": "59fb21121207900012774b17",
      "created": 1643656027,
      "updated": 1643656181
    },
    {
      "id": "61f8335a774b1700003e7ea4",
      "text": "　[自分のページ]に次を追加する",
      "userId": "59fb21121207900012774b17",
      "created": 1643656026,
      "updated": 1643656302
    },
    {
      "id": "61f8346d774b1700003e7eae",
      "text": "　　code:script.js",
      "userId": "59fb21121207900012774b17",
      "created": 1643656302,
      "updated": 1643656304
    },
    {
      "id": "61f8346f774b1700003e7eaf",
      "text": "　　 await import(\"/api/code/YOUR_PROJECT/pin-diary-4/script.js\");",
      "userId": "59fb21121207900012774b17",
      "created": 1643656304,
      "updated": 1643656310
    },
    {
      "id": "61f834b8774b1700003e7eb3",
      "text": "　UserScriptをロードしてページリロードすると今日のページが作られている",
      "userId": "59fb21121207900012774b17",
      "created": 1643656376,
      "updated": 1643656397
    },
    {
      "id": "61f834b8774b1700003e7eb4",
      "text": "",
      "userId": "59fb21121207900012774b17",
      "created": 1643656377,
      "updated": 1643656377
    },
    {
      "id": "61f83574774b1700003e7eb6",
      "text": "",
      "userId": "59fb21121207900012774b17",
      "created": 1643656565,
      "updated": 1643656565
    },
    {
      "id": "61f83574774b1700003e7eb7",
      "text": "テンプレートの中身を編集したい時は？",
      "userId": "59fb21121207900012774b17",
      "created": 1643656565,
      "updated": 1643656734
    },
    {
      "id": "61f8357b774b1700003e7eb9",
      "text": "　[日記ページのtemplate]を編集する",
      "userId": "59fb21121207900012774b17",
      "created": 1643656571,
      "updated": 1643656580
    },
    {
      "id": "61f835df774b1700003e7eba",
      "text": "　この場合[pin-diary-4を自分のプロジェクトで使う#61f8332b774b1700003e7ea1]のコードではなく[pin-diary-4]をそのまま自分のプロジェクトにコピーして`import {getTemplate} from \"../日記ページのtemplate/diary.ts\";`あたりを修正する必要がありそう[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1643656672,
      "updated": 1643656848
    },
    {
      "id": "61f840a6774b1700005bd1d1",
      "text": "  private projectだとbundleが失敗する",
      "userId": "59fb21121207900012774b17",
      "created": 1643659431,
      "updated": 1643659431
    },
    {
      "id": "61f83579774b1700003e7eb8",
      "text": "  　tsからjsに変換する必要があり、[/takker/scrapbox-bundler]を使ってbundleしようとしてコードが取得できずに失敗する",
      "userId": "59fb21121207900012774b17",
      "created": 1643656569,
      "updated": 1643659448
    },
    {
      "id": "61f8ae81774b17000096da28",
      "text": "  　[/nishio/ScrapboxのprivateプロジェクトのAPIを叩く]と組み合わせたらprivateでもなんとかなるかな？",
      "userId": "59fb21121207900012774b17",
      "created": 1643687554,
      "updated": 1643687583
    },
    {
      "id": "61f84077774b1700005bd1cf",
      "text": "   [scrapbox-bundler]は非公開projectのAPIを叩けません[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643659384,
      "updated": 1643687851
    },
    {
      "id": "61f8afa11280f00000646f0f",
      "text": "    connect.sidを使っていないので……",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643687840,
      "updated": 1643688016
    },
    {
      "id": "61f8afa51280f00000646f10",
      "text": "    そしてDenoでもできないです……",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643687844,
      "updated": 1643687859
    },
    {
      "id": "61f8afb61280f00000646f11",
      "text": "     bearer tokenしか対応していない[. https://deno.land/manual@v1.18.1/linking_to_external_code/private ]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643687860,
      "updated": 1643688244
    },
    {
      "id": "61f8b0ad774b1700008b2bec",
      "text": "     　なるほど（この情報は日本語でググっても1ページ目に出てこない情報だった）[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1643688109,
      "updated": 1643688819
    },
    {
      "id": "61f8b1a51280f00000646f1f",
      "text": "     　とりあえず雑に書いてみました：[/deno-ja/private moduleを使う][takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688356,
      "updated": 1643688363
    },
    {
      "id": "61f8b1cd774b1700008b2bed",
      "text": "   　  　感謝[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1643688398,
      "updated": 1643688405
    },
    {
      "id": "61f8afc41280f00000646f12",
      "text": "   private projectのcodeを使ったbundleは想定していなかったので迂闊でした……[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643687874,
      "updated": 1643687903
    },
    {
      "id": "61f8afaa774b1700008b2bea",
      "text": "    TSではなくJSならBundleから除外すればいいだけなので問題は起きないのですが",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643687851,
      "updated": 1643687939
    },
    {
      "id": "61f8b0041280f00000646f14",
      "text": "     web browserが勝手にconnect.sidを設定してJSをimportしてくれる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643687939,
      "updated": 1643687969
    },
    {
      "id": "61f8b21c774b1700008b2bee",
      "text": "      なるほど[基素.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688477,
      "updated": 1643688550
    },
    {
      "id": "61f8b0221280f00000646f15",
      "text": "    TSはブラウザによしなにさせられないのでどうにもなりません",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643687969,
      "updated": 1643687996
    },
    {
      "id": "61f8b03d1280f00000646f16",
      "text": "  対策",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643687996,
      "updated": 1643687999
    },
    {
      "id": "61f8b080774b1700008b2beb",
      "text": "  　privateではなくpublicでやる",
      "userId": "59fb21121207900012774b17",
      "created": 1643688065,
      "updated": 1643688424
    },
    {
      "id": "61f8b0401280f00000646f17",
      "text": "    自分はこの方法を使っています[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643687999,
      "updated": 1643688081
    },
    {
      "id": "61f8b0931280f00000646f1c",
      "text": "     API tokenなどのprivate情報だけprivate projectのpure JSファイルに置いている",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688081,
      "updated": 1643688105
    },
    {
      "id": "61fb1a1c1280f000003aa243",
      "text": "    他の人の例：[yosider.icon][/yosider-scripts]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643846172,
      "updated": 1643846189
    },
    {
      "id": "61fb58d8774b17000082e2a0",
      "text": "     なるほど[yosider#603a61a4e5172d0000bc7b42]みたいにするんだ[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1643862232,
      "updated": 1643862244
    },
    {
      "id": "61f8b08b1280f00000646f1b",
      "text": "   ❌[scrapbox-bundler]にconnect.sidを入れるoptionをつける",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688074,
      "updated": 1643688074
    },
    {
      "id": "61f8b0601280f00000646f18",
      "text": "   　認証情報をURL parameterにつけたら流石にまずい[takker.icon][基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1643688031,
      "updated": 1643688061
    },
    {
      "id": "61f8b1b11280f00000646f20",
      "text": "   [UserScriptをbundleするDeno script]にconnect.sidをつけるoptionを入れる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688368,
      "updated": 1643688387
    },
    {
      "id": "61f8b1c41280f00000646f21",
      "text": "   　すぐ実装できそうなのはこれ[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688387,
      "updated": 1643688399
    },
    {
      "id": "61f8b1d11280f00000646f22",
      "text": "   　 `fetch`に渡せばいいだけ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688399,
      "updated": 1643688412
    },
    {
      "id": "61f8b46a774b1700008b2bef",
      "text": "   　これをやるとCLIでdenoを実行するとbundleされた結果がterminalに出るようになるのかな[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1643689066,
      "updated": 1643689182
    },
    {
      "id": "61f8b4db774b1700008b2bf0",
      "text": "   　　今回のケースだとpin-diary-4と日記ページのtemplateが複数ページに分かれているのでこれを使えば両方とってきてくれて便利になる、という理解をしました",
      "userId": "59fb21121207900012774b17",
      "created": 1643689180,
      "updated": 1643689250
    },
    {
      "id": "61f8bae91280f0000079e7dd",
      "text": "   　　ですです[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643690728,
      "updated": 1643690734
    },
    {
      "id": "61f8afe21280f00000646f13",
      "text": "　　　scrapbox userscriptとして動くbundlerを作る",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643687905,
      "updated": 1643688069
    },
    {
      "id": "61f8b0c21280f00000646f1d",
      "text": "　　　 scrapbox.ioとstorage.googleapi.com内のコードなら何でも使える",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688128,
      "updated": 1643688153
    },
    {
      "id": "61f8b0cd1280f00000646f1e",
      "text": "　　　 scrapbox.io外でもTamperMonkeyと組み合わせれば制限なく使える",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688139,
      "updated": 1643688171
    },
    {
      "id": "61f8b2081280f00000646f26",
      "text": "　　　 [- これが一番現実的かも？][takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688455,
      "updated": 1643688455
    },
    {
      "id": "61f8b1f51280f00000646f24",
      "text": "　　　 追加でUserScriptを入れるのが面倒くさすぎる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688436,
      "updated": 1643688459
    },
    {
      "id": "61f8b20c1280f00000646f27",
      "text": "　　　  worker codeつきなので、2回bundleしてコピペする必要あり",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643688459,
      "updated": 1643846169
    },
    {
      "id": "61fb1a161280f000003aa242",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1643846166,
      "updated": 1643846166
    }
  ]
}