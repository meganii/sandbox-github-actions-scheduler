{
  "id": "63b909ce166a50001de4e005",
  "title": "Scrapboxの候補で並ぶ順番が適切でない",
  "created": 1673071055,
  "updated": 1673183611,
  "lines": [
    {
      "id": "63b909ce166a50001de4e005",
      "text": "Scrapboxの候補で並ぶ順番が適切でない",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071055,
      "updated": 1673071055
    },
    {
      "id": "63b909ce1982700000b6064e",
      "text": "from [2023/01/06]",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071055,
      "updated": 1673071055
    },
    {
      "id": "63b909ce1982700000b6064f",
      "text": "",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071055,
      "updated": 1673071059
    },
    {
      "id": "63b909d61982700000b60654",
      "text": "\t例えば、`React`と入力したとき、「React」というタイトルのページが一番上に出ない",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071062,
      "updated": 1673071082
    },
    {
      "id": "63b909ea1982700000b60655",
      "text": "\t\t以前までは出ていた",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071082,
      "updated": 1673071089
    },
    {
      "id": "63b91e4955cbd30000e7a430",
      "text": "\t\t　どれくらいだろう、自分は結構前からこういう仕様だった[mtane0412.icon]",
      "userId": "5ae7fecf7766b7001455cbd3",
      "created": 1673076298,
      "updated": 1673076308
    },
    {
      "id": "63b92e8d19827000008d57ca",
      "text": "\t\t　前からそうだったのか。2023/1/6に気付いた[mrsekut.icon]",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673080462,
      "updated": 1673080470
    },
    {
      "id": "63b909ce1982700000b60652",
      "text": "\t\t[https://gyazo.com/37b81cfc2f213c08991c270d303d7326]",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071055,
      "updated": 1673071090
    },
    {
      "id": "63b90a781982700000b6065e",
      "text": "\t\t\t↑2023/1/6時点",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071224,
      "updated": 1673071230
    },
    {
      "id": "63b909f21982700000b60656",
      "text": "\t\tシークレットウィンドウで確認しても再現した",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071091,
      "updated": 1673071105
    },
    {
      "id": "63b90a161982700000b60658",
      "text": "\t\t「React」以外の他の単語でも再現する",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071127,
      "updated": 1673071135
    },
    {
      "id": "63b90a521982700000b6065a",
      "text": "\t\t\te.g. 「MySQL」",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071187,
      "updated": 1673071192
    },
    {
      "id": "63b90a6c1982700000b6065b",
      "text": "\t\tReact、今見たら2番めになっていた",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071213,
      "updated": 1673071221
    },
    {
      "id": "63b90a741982700000b6065c",
      "text": "\t\t\t[https://gyazo.com/a167ecf1afeac563c67488a47484c7fa]",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071221,
      "updated": 1673071222
    },
    {
      "id": "63b90a801982700000b6065f",
      "text": "\t\t\t↑2023/1/7時点",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071232,
      "updated": 1673071236
    },
    {
      "id": "63b90a011982700000b60657",
      "text": "\tマッチする優先順位が変わった？[おま環]？[mrsekut.icon]",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071106,
      "updated": 1673071123
    },
    {
      "id": "63b909ce1982700000b60653",
      "text": "\t\t[/mrsekut-p]がなんかおかしい？",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071055,
      "updated": 1673071165
    },
    {
      "id": "63b90a2e1982700000b60659",
      "text": "",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673071151,
      "updated": 1673071151
    },
    {
      "id": "63b91bfb1280f00000465522",
      "text": "`assets-20230105-125847`の[assets/index.js]にて、[Quick Search]は`var i = v.default.QuickSearch.search(de).slice(0, 100).map((t=>t.title))`でincremental searchしている",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673075706,
      "updated": 1673077659
    },
    {
      "id": "63b91ba81280f00000465520",
      "text": " `v.default.QuickSearch.search`は、検索語句`de`が2文字以下か検索結果が11件以上のとき正規表現で絞り込みをかける",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673075623,
      "updated": 1673075698
    },
    {
      "id": "63b91ce71280f0000046552d",
      "text": "  例：`React`で検索すると、`/(r\\s*e\\s*a\\s*c\\s*t)/i`で絞り込みがかかる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673075943,
      "updated": 1673075952
    },
    {
      "id": "63b91c1f1280f00000465524",
      "text": "並び順が確かに気になる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673075742,
      "updated": 1673075766
    },
    {
      "id": "63b91c451280f00000465525",
      "text": " 正規表現検索では、`this.pages.filter((t=>s.test(t.title))).sort(((t,i)=>t.titleLengthForSort - i.titleLengthForSort))`で絞り込みと並び替えを行っている",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673075780,
      "updated": 1673077588
    },
    {
      "id": "63b923561280f000005a3acb",
      "text": "  `s`：正規表現、`React`で検索した場合は`/(r\\s*e\\s*a\\s*c\\s*t)/i`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077589,
      "updated": 1673077590
    },
    {
      "id": "63b91c6f1280f00000465526",
      "text": " `.sort(((t,i)=>t.titleLengthForSort - i.titleLengthForSort))`しているなら、短いタイトル順に並ぶはずだが……",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673075822,
      "updated": 1673076004
    },
    {
      "id": "63b91c7d1280f00000465528",
      "text": "  [https://gyazo.com/28961af754689e59751c6610fffd6b0d]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673075837,
      "updated": 1673076165
    },
    {
      "id": "63b91dc61280f0000046552e",
      "text": " `titleLengthForSort`はただの文字列長ではなく、[assets/dedicated-worker.js]`getLengthForSort(title)`で計算される数値のようだ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076165,
      "updated": 1673076457
    },
    {
      "id": "63b91dda1280f00000465534",
      "text": "  code:dedicated-worker.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076186,
      "updated": 1673076243
    },
    {
      "id": "63b91dd91280f00000465531",
      "text": "   function getLengthForSort(t) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076184,
      "updated": 1673076243
    },
    {
      "id": "63b91dd91280f00000465532",
      "text": "     return t.replace(/\\d+/g, \"_\").replace(/[#-_/.,\\s()<>{}（）]+[a-z]?$/i, \"_\").length",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076184,
      "updated": 1673076243
    },
    {
      "id": "63b91dd91280f00000465533",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076184,
      "updated": 1673076243
    },
    {
      "id": "63b9203f1280f00000465535",
      "text": "  これバグじゃん！！！[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076799,
      "updated": 1673076811
    },
    {
      "id": "63b9204c1280f00000465536",
      "text": "   ❌`/[#-_/.,\\s()<>{}（）]+[a-z]?$/i`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076811,
      "updated": 1673077515
    },
    {
      "id": "63b920501280f00000465537",
      "text": "   ✅`/[#\\-_/.,\\s()<>{}（）]+[a-z]?$/i`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076815,
      "updated": 1673077512
    },
    {
      "id": "63b922715f1e0d00004ac0a3",
      "text": "    逆？[yuyasurarin.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1673077361,
      "updated": 1673077365
    },
    {
      "id": "63b9230d1280f000005a3aca",
      "text": "    逆でした(❌と✅)。ご指摘ありがとうございます[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077516,
      "updated": 1673077535
    },
    {
      "id": "63b920611280f00000465538",
      "text": "   `-`がescapeされていないため、`[#-/]+`(ほぼすべてのalphabetの列)が`_`一文字に集約されてしまう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076833,
      "updated": 1673076883
    },
    {
      "id": "63b920941280f00000465539",
      "text": "   このため、半角英数字と半角記号と空白で構成された任意の長さのリンクが`_`一文字になってしまい、文字列長比較が無意味になっている",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076883,
      "updated": 1673076946
    },
    {
      "id": "63b920d91280f0000046553a",
      "text": "    上のスクショ中のリンクの並び順がむちゃくちゃなのはそのせい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076952,
      "updated": 1673076977
    },
    {
      "id": "63b9245e1280f000005a3acc",
      "text": "     `React`も`react.js`も`scrapbox.io/study-react`も全部長さが同じ！世界は狂ってしまった[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077854,
      "updated": 1673077895
    },
    {
      "id": "63b924855f1e0d00004ac0a8",
      "text": "      草[yuyasurarin.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1673077893,
      "updated": 1673077897
    },
    {
      "id": "63b920f11280f0000046553c",
      "text": "  `[a-z]?$`もおかしい[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076977,
      "updated": 1673076986
    },
    {
      "id": "63b920fa1280f0000046553d",
      "text": "   これのせいで、末尾が全角文字なだけで通常の文字列長が採用されていしまい、検索結果の末尾に追いやられてしまった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673076986,
      "updated": 1673077169
    },
    {
      "id": "63b921e41280f000005a3ac8",
      "text": "   [https://gyazo.com/6467c1eae5da3c4220aa7fb3329207b0]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077219,
      "updated": 1673077255
    },
    {
      "id": "63b921091280f0000046553e",
      "text": "  というか全体的に何がしたい函数なのかわからない[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077000,
      "updated": 1673077629
    },
    {
      "id": "63b921241280f0000046553f",
      "text": "   「数字の羅列、記号の羅列を一文字とみなして測った文字列長」を求めたかったとは予測できる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077027,
      "updated": 1673077074
    },
    {
      "id": "63b921521280f00000465540",
      "text": "    `[a-z]?`は`.a`や`#.a`を2文字ではなく1文字としてカウントしたかったから付けた？",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077074,
      "updated": 1673077120
    },
    {
      "id": "63b9235f5f1e0d00004ac0a4",
      "text": "    [yuyasurarin.icon]確かに意図が不明",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1673077599,
      "updated": 1673077825
    },
    {
      "id": "63b923825f1e0d00004ac0a6",
      "text": "    code:js",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1673077633,
      "updated": 1673077633
    },
    {
      "id": "63b923635f1e0d00004ac0a5",
      "text": "     return t.replace(/\\d+/g,\"_\").replace(/[#\\-_/.,\\s()<>{}（）]+[a-z]?$/i,\"_\")",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1673077603,
      "updated": 1673077676
    },
    {
      "id": "63b924445f1e0d00004ac0a7",
      "text": "     // React.a => React_",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1673077828,
      "updated": 1673077851
    },
    {
      "id": "63b91b721280f0000046551e",
      "text": "   [takker.icon]の予測をコードに落とし込むとこんなかんじ[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673075570,
      "updated": 1673077977
    },
    {
      "id": "63b924d91280f000005a3acf",
      "text": "    code:assumption(js)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077977,
      "updated": 1673078013
    },
    {
      "id": "63b924e31280f000005a3ad0",
      "text": "     function getLengthForSort(t) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077986,
      "updated": 1673077987
    },
    {
      "id": "63b924e31280f000005a3ad1",
      "text": "       return t.replace(/\\d+/g, \"_\").replace(/[#\\-_/.,\\s()<>{}（）]+[a-z]?/ig, \"_\").length",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077987,
      "updated": 1673078030
    },
    {
      "id": "63b924e31280f000005a3ad2",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077987,
      "updated": 1673077987
    },
    {
      "id": "63b924c81280f000005a3ace",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673077959,
      "updated": 1673077959
    },
    {
      "id": "63babfa1e5172d000078e43e",
      "text": "[/forum-jp/検索ボックスの入力候補の並ぶ順番が適切でない]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1673183137,
      "updated": 1673183137
    },
    {
      "id": "63babfa2e5172d000078e440",
      "text": "　1日で直った！[仕事が早すぎる][yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1673183138,
      "updated": 1673183248
    },
    {
      "id": "63babfa1e5172d000078e43f",
      "text": "\t報告してもらってたのか、ありがとうございます！！[mrsekut.icon]",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673183137,
      "updated": 1673183611
    },
    {
      "id": "63bac16a19827000008e6c53",
      "text": "",
      "userId": "5b4ea932de544f0014198270",
      "created": 1673183594,
      "updated": 1673183594
    }
  ]
}