{
  "id": "638f14f84f4541002120808f",
  "title": "ブラケット内に文字を入力している時重たいけれど、選択範囲に似ているリンクを入力補完するUserScriptが原因？",
  "created": 1670321401,
  "updated": 1670343988,
  "lines": [
    {
      "id": "638f14f84f4541002120808f",
      "text": "ブラケット内に文字を入力している時重たいけれど、選択範囲に似ているリンクを入力補完するUserScriptが原因？",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321475
    },
    {
      "id": "638f14f87838e3000066e112",
      "text": "from [2022/12/06]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e113",
      "text": "`[]`内に文字を入力している時めちゃくちゃ重たい",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e115",
      "text": "\t 処理分散しているのでこれじゃないはずだけど、自信がない[takker.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e116",
      "text": "\t （経験則的に）裏で通信を回している時点で全体が重たくなる説がちょっとある[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e117",
      "text": "\t \tとなると、通信の頻度を減らすとか？",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e118",
      "text": "\t \t[https://gyazo.com/b256ec9aaff42ce7da4f4f12a9c751a4]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e119",
      "text": "\t\t\t\t[- ん？でもindex.js側が繰り返し送信しているな…]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e11a",
      "text": "\t\t\t Scrapboxでは、serviceworkerその他のproxyの影響で、fetch元のファイル名を正しく表示できません[takker.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e11b",
      "text": "\t\t\t \tたしかに（今気づいた）[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e11c",
      "text": "\t\t\t \tただし、スタックトレースはたどれます[takker.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e11d",
      "text": "\t\t\t \t chromeなら通信ごとにスタックトレースを辿れるんじゃないかな",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e11e",
      "text": "\t\t\t `/api/pages/:project/:title`の通信っぽいから、入力補完とは関係ないですね",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e11f",
      "text": "\t\t\t \tそうみたいですね[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e120",
      "text": "\t\t\t \tUserScriptを導入していないプロジェクトでも同様の通信を行っていたので、関係ないみたいでした",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f6650e5172d000012d9d7",
      "text": "\t\t\t \t UserScriptなしでも重い？[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1670342224,
      "updated": 1670342239
    },
    {
      "id": "638f6b097838e30000a7e2ad",
      "text": "\t\t\t 　　01:24:38 今見たらScriptありの状態でも極端に重くなる状態を再現できなかったです[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670343433,
      "updated": 1670343880
    },
    {
      "id": "638f6ccb7838e30000488342",
      "text": "\t\t\t 　　\t今も若干重たいかもしれないけれど、リンクの量も関係しているだろうし、そもそも気になる程ではない",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670343883,
      "updated": 1670343937
    },
    {
      "id": "638f6d217838e30000488344",
      "text": "\t\t\t 　　\tChromeのせい？（根拠が見つかっていないのでわからないけれど）",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670343969,
      "updated": 1670343988
    },
    {
      "id": "638f14f87838e3000066e121",
      "text": "\t Scrapbox側の入力補完はまずあり得ない",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e122",
      "text": "\t  Scrapboxのアルゴリズムでラグが生じるようになるのは、だいたい9万links弱くらいから",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e123",
      "text": "\t   [Mijinko_SD.icon]さんは機械生成projectでも使っていない限り、そういう状況にはなっていないと思う",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e124",
      "text": "\t  同期的に検索しているので、リンク数が多くなればなるほどラグが生じる",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e125",
      "text": "\t自分もそれで重いけど、仕組みを考えると仕方ないかな、、[inajob.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e126",
      "text": "\t　入力後ちょっと待ってから検索するようにするとか？",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e127",
      "text": " これが遅くなると「あまりリンクを作らない方がいい」という報酬になるのでここは早くないと困る[基素.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e128",
      "text": "　　自分は重さを感じていないです",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e129",
      "text": " `[]`を入力しているときだけですか？他の場合もですか？[takker.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e12a",
      "text": "  文字入力全てが重たいなら、`scrapbox.addListener(\"lines:changed\", () => {})`や[MutationObserver]まわりがあやしい",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e12b",
      "text": "  \tリンク内容入力時のみですね[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e12c",
      "text": "  \t\t補完候補が出た後も文字入力をしていると重たい",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e12d",
      "text": "  \t他はそこまで重たくないです",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e12e",
      "text": "   うーん、あとはprofileとって調べてみるくらいかな[takker.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e12f",
      "text": "    入力開始時にどの関数が時間を食っているのかがわかる",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e130",
      "text": "    もっとも、なぜか待機状態だけが続く謎現象も起きたりするが……",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e131",
      "text": "     [takker.icon]の場合がこれで、原因が全くわからなかった",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e132",
      "text": "     サイトデータ消去でなんとか改善した",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e133",
      "text": "  行数に比例して重くなる場合もこれ",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e134",
      "text": "\tとりあえずキャッシュの削除をしてみるか…[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e135",
      "text": "\t\t変わんなかった…_:(´ཀ`」∠):_",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f14f87838e3000066e136",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1670321401,
      "updated": 1670321401
    },
    {
      "id": "638f662be5172d000012d9d6",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1670342187,
      "updated": 1670342187
    }
  ]
}