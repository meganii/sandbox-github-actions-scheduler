{
  "id": "680f8f0e2ac86a772cb9b810",
  "title": "Dockerfileのおべんきょう",
  "created": 1745850136,
  "updated": 1745854124,
  "lines": [
    {
      "id": "680f8f0e2ac86a772cb9b810",
      "text": "Dockerfileのおべんきょう",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850136,
      "updated": 1745850136
    },
    {
      "id": "680f8f1700000000007a58e0",
      "text": "[Dockerfile]のおべんきょうをする場所",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850136,
      "updated": 1745850142
    },
    {
      "id": "680f8f1f00000000007a58e2",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850143,
      "updated": 1745850143
    },
    {
      "id": "680f8f1f00000000007a58e3",
      "text": "[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850143,
      "updated": 1745850150
    },
    {
      "id": "680f8f2600000000007a58e4",
      "text": "\t[Dockerfile]とは",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850150,
      "updated": 1745850174
    },
    {
      "id": "680f8f3e00000000007a58e5",
      "text": "\t\t[Docker]のイメージを構築するための設計書みたいなもの",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850174,
      "updated": 1745850218
    },
    {
      "id": "680f8f6b00000000007a58e6",
      "text": "\t\t内部には独自のコマンドをたくさん記述する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850220,
      "updated": 1745850289
    },
    {
      "id": "680f8fb000000000007a58e7",
      "text": "\tコマンド",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850289,
      "updated": 1745850295
    },
    {
      "id": "680f8fb600000000007a58e8",
      "text": "\t\tFROM",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850295,
      "updated": 1745850296
    },
    {
      "id": "680f8fba00000000007a58e9",
      "text": "\t\t\t大抵は一番上に書くやつ（多分）",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850299,
      "updated": 1745850313
    },
    {
      "id": "680f8fbe00000000007a58ea",
      "text": "\t\t\tベースとするDockerイメージを指定する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850303,
      "updated": 1745850333
    },
    {
      "id": "680f905600000000007a58ee",
      "text": "\t\t\t独自に作成したDockerイメージを流用するのにも使えるし、`ubuntu`とだけ書いて使用するOSを指定するのにも使える",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850455,
      "updated": 1745850529
    },
    {
      "id": "680f90c800000000007a58ef",
      "text": "\t\t\tOSは固定せず、Dockerを実行しているOSと同じものを使用することもできるようだが、要調査",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850569,
      "updated": 1745850822
    },
    {
      "id": "680f91bf00000000007a58f0",
      "text": "\t\tRUN",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850816,
      "updated": 1745850834
    },
    {
      "id": "680f91d200000000007a58f1",
      "text": "\t\t\tOSのコマンドを実行できる",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850835,
      "updated": 1745850858
    },
    {
      "id": "680f91ec00000000007a58f2",
      "text": "\t\tADD",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850861,
      "updated": 1745850862
    },
    {
      "id": "680f91ee00000000007a58f3",
      "text": "\t\t\tコンテナ外部のファイルをコンテナ内にコピーする",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850863,
      "updated": 1745850894
    },
    {
      "id": "680f921000000000007a58f4",
      "text": "\t\tCMD",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850897,
      "updated": 1745850899
    },
    {
      "id": "680f921400000000007a58f5",
      "text": "\t\t\tコンテナ起動時にコマンドを実行する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850901,
      "updated": 1745850908
    },
    {
      "id": "680f922e00000000007a58f6",
      "text": "\t\t\t[Dockerfile]内で１度しか使用できない",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850927,
      "updated": 1745850940
    },
    {
      "id": "680f92c000000000007a58fb",
      "text": "\t\t\t`CMD [\"echo\", \"foo\"]`と記載すれば、コンテナ起動時に`foo`と出力する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851073,
      "updated": 1745851089
    },
    {
      "id": "680f927e00000000007a58f7",
      "text": "\t\t\tこのコマンドの役割は、既定での実行内容を設定すること",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851007,
      "updated": 1745851037
    },
    {
      "id": "680f92d200000000007a58fc",
      "text": "\t\t\t\t[docker run]コマンドの末尾の引数に代わりの内容を記載すれば、CMDコマンドの内容を引数の内容に置き換えて実行できる",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851090,
      "updated": 1745851208
    },
    {
      "id": "680f934800000000007a58fd",
      "text": "\t\t\t\tつまり、こういう感じ",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851209,
      "updated": 1745851243
    },
    {
      "id": "680f936b00000000007a58fe",
      "text": "\t\t\t\t\t`CMD [\"echo\", \"foo\"]`というコマンドがあるDockerfileがあったとする",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851243,
      "updated": 1745851247
    },
    {
      "id": "680f936f00000000007a58ff",
      "text": "\t\t\t\t\tそのDockerfileをビルド後、以下のコマンドで実行する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851247,
      "updated": 1745851265
    },
    {
      "id": "680f938000000000007a5900",
      "text": "\t\t\t\t\t\t$ docker run myImage echo bar",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851265,
      "updated": 1745851339
    },
    {
      "id": "680f93cb00000000007a5901",
      "text": "\t\t\t\t\t\t大事なのは末尾につけた`echo bar`の部分",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851340,
      "updated": 1745851352
    },
    {
      "id": "680f93d800000000007a5902",
      "text": "\t\t\t\t\tすると、CMDの中身が上書きされて、実行時には`bar`と出力されるようになる",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851352,
      "updated": 1745851376
    },
    {
      "id": "680f93f300000000007a5903",
      "text": "\t\tENTRYPOINT",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851380,
      "updated": 1745851384
    },
    {
      "id": "680f93fc00000000007a5904",
      "text": "\t\t\tコンテナ起動時に実行されることと、[Dockerfile]内で１度しか実行できないことはCMDと同様",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851389,
      "updated": 1745851460
    },
    {
      "id": "680f943b00000000007a590b",
      "text": "\t\t\tENTRYPOINTの直後にCMDを書くと、同じ１行のコマンドとして実行される仕様がある",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851452,
      "updated": 1745851607
    },
    {
      "id": "680f94d800000000007a590c",
      "text": "\t\t\t\tcode:Dockerfile",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851609,
      "updated": 1745851615
    },
    {
      "id": "680f94df00000000007a590d",
      "text": "\t\t\t\t FROM ubuntu",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851617,
      "updated": 1745851643
    },
    {
      "id": "680f94f500000000007a590e",
      "text": "     ENTRYPOINT [\"echo\"]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851638,
      "updated": 1745851805
    },
    {
      "id": "680f94f500000000007a590f",
      "text": "     CMD [\"foo\"]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851638,
      "updated": 1745851638
    },
    {
      "id": "680f94fc00000000007a5910",
      "text": "    ↑を実行すると、`echo foo`が実行される",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851645,
      "updated": 1745851670
    },
    {
      "id": "680f952500000000007a5911",
      "text": "   CMDとの違いとしては、CMDは[docker run]の引数で上書き可能なのに対し、ENTRYPOINTは上書きできないという点",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851686,
      "updated": 1745851740
    },
    {
      "id": "680f955b00000000007a5913",
      "text": "   \t上に記載したDockerfileのイメージに対して以下のコマンドを使用すると、`foo`のみが消えて代わりに`baz`と出力される",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851740,
      "updated": 1745851939
    },
    {
      "id": "680f960000000000007a5914",
      "text": "   \t$ docker run myImage echo baz",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851905,
      "updated": 1745851907
    },
    {
      "id": "680f9ea80000000000a319e1",
      "text": "  これ以外のコマンド",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745854121,
      "updated": 1745854124
    },
    {
      "id": "680f9eab0000000000a319e2",
      "text": "  \t[Dockerfile リファレンス — Docker-docs-ja 24.0 ドキュメント https://docs.docker.jp/engine/reference/builder.html]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745854124,
      "updated": 1745854124
    },
    {
      "id": "680f942700000000007a5905",
      "text": "\t\t参考",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851432,
      "updated": 1745851432
    },
    {
      "id": "680f942700000000007a5906",
      "text": "\t\t\t[Docker入門（第四回）～Dockerfileについて～ | さくらのナレッジ https://knowledge.sakura.ad.jp/15253/]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851432,
      "updated": 1745851432
    },
    {
      "id": "680f942700000000007a5907",
      "text": "\t\t\t[コピペで学ぶチュートリアル: DockerfileのCMDとENTRYPOINTの違い https://zenn.dev/richardimaoka/articles/bd87036acd951e]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851432,
      "updated": 1745851432
    },
    {
      "id": "680f942a00000000007a5908",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851434,
      "updated": 1745851435
    },
    {
      "id": "680f942b00000000007a590a",
      "text": "[bsahd.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745851435,
      "updated": 1745851440
    },
    {
      "id": "680f92fa00000000009072a0",
      "text": "\t\tENTRYPOINT",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1745851130,
      "updated": 1745851138
    },
    {
      "id": "680f930300000000009072a1",
      "text": "\t\t\tコンテナ起動時にコマンドを実行する",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1745851139,
      "updated": 1745851167
    },
    {
      "id": "680f931f00000000009072a2",
      "text": "\t\t\tdocker runコマンドの末尾の引数を指定した場合、このENTRYPOINTの後の引数になる",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1745851167,
      "updated": 1745851207
    },
    {
      "id": "680f8f1800000000007a58e1",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1745850136,
      "updated": 1745850136
    }
  ]
}