{
  "id": "672cbc654a03d6434f9b6599",
  "title": "scrapCrawler.ts",
  "created": 1730985062,
  "updated": 1732568244,
  "lines": [
    {
      "id": "672cbc654a03d6434f9b6599",
      "text": "scrapCrawler.ts",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730985062,
      "updated": 1731134231
    },
    {
      "id": "6744765171b3c20000aad7b9",
      "text": "[allPagesList.ts]",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732539985,
      "updated": 1732539989
    },
    {
      "id": "672cbc6671b3c20000151dc3",
      "text": "code:scrapCrawler.ts",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730985062,
      "updated": 1730985072
    },
    {
      "id": "672cbc7071b3c20000151dc5",
      "text": " import * as pagelist from \"../allPagesList.ts/allPagesList.ts\"",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730985072,
      "updated": 1732540023
    },
    {
      "id": "6744766e71b3c20000acaed1",
      "text": " import { Command } from \"https://deno.land/x/cliffy@v0.19.2/command/mod.ts\";",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732540015,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76ee",
      "text": " import Spinner from \"https://deno.land/x/cli_spinners@v0.0.2/mod.ts\";",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76ef",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76f0",
      "text": " interface ScrapboxPage {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76f1",
      "text": "   title: string;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76f2",
      "text": "   links: string[];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76f3",
      "text": "   relatedPages: { links1hop: Array<{ title: string }> };",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76f4",
      "text": " }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76f5",
      "text": " const spinner = Spinner.getInstance();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76f6",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76f7",
      "text": " new Command()",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76f8",
      "text": "   .name(\"scrapCrawler\")",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76f9",
      "text": "   .version(\"2024/11/09\")",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76fa",
      "text": "   .description(\"Command line arguments parser\")",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76fb",
      "text": "   .option(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76fc",
      "text": "     \"--numberOfParallelConnections -connections <connections:number>\",",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76fd",
      "text": "     \"\",",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76fe",
      "text": "     {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d76ff",
      "text": "       default: 64,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7700",
      "text": "     },",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7701",
      "text": "   )",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7702",
      "text": "   .option(\"--output <connections:path>\", \"\", {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7703",
      "text": "     default: \"result.json\",",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7704",
      "text": "   })",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7705",
      "text": "   .option(\"--exclude <regex:string>\", \"\", {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7706",
      "text": "     collect: true,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7707",
      "text": "     default: [],",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7708",
      "text": "   })",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7709",
      "text": "   .option(\"--pageName <name:string>\", \"multiple\", {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d770a",
      "text": "     collect: true,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d770b",
      "text": "     required: true,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d770c",
      "text": "   })",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d770d",
      "text": "   .option(\"--projectName <name:string>\", \"\", {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d770e",
      "text": "     required: true,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d770f",
      "text": "   })",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7710",
      "text": "   .parse(Deno.args).then(({ options }) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7711",
      "text": "     return pagelist.pageCount(options.projectName).then((pageCount) => ({",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7712",
      "text": "       pageCount,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7713",
      "text": "       options,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7714",
      "text": "     }));",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7715",
      "text": "   }).then(({ pageCount, options }) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7716",
      "text": "     const projectName = options.projectName;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7717",
      "text": "     let queue: string[] = options.pageName;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7718",
      "text": "     const marked: string[] = [];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7719",
      "text": "     const excluded: string[] = [];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d771a",
      "text": "     const getPage = (pageName: string) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d771b",
      "text": "       for (const element of options.exclude) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d771c",
      "text": "         if (new RegExp(element, \"i\").test(pageName)) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d771d",
      "text": "           excluded.push(pageName);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d771e",
      "text": "           return Promise.resolve();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d771f",
      "text": "         }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7720",
      "text": "       }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7721",
      "text": "       return fetch(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7722",
      "text": "         \"https://scrapbox.io/api/pages/\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7723",
      "text": "           projectName +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7724",
      "text": "           \"/\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7725",
      "text": "           encodeURIComponent(pageName),",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7726",
      "text": "       ).then((pageRes) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7727",
      "text": "         if (pageRes.ok) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7728",
      "text": "           return pageRes.json();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7729",
      "text": "         } else {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d772a",
      "text": "           return pageRes.text().then((text) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d772b",
      "text": "             console.error(pageRes.status, text);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d772c",
      "text": "           });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d772d",
      "text": "         }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d772e",
      "text": "       }).then((pageJson: Readonly<ScrapboxPage>) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d772f",
      "text": "         marked.push(pageJson.title);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7730",
      "text": "         for (const element of pageJson.relatedPages.links1hop) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7731",
      "text": "           if (",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7732",
      "text": "             !marked.includes(element.title) &&",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7733",
      "text": "             !excluded.includes(element.title)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7734",
      "text": "           ) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7735",
      "text": "             queue.push(element.title);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7736",
      "text": "           }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7737",
      "text": "         }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7738",
      "text": "       });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7739",
      "text": "     };",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d773a",
      "text": "     function crawlTick(): Promise<void> {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d773b",
      "text": "       while (queue.length < 1) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d773c",
      "text": "         return Promise.resolve();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d773d",
      "text": "       }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d773e",
      "text": "       const promiseList: Promise<void>[] = [];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d773f",
      "text": "       const pageNames = queue.splice(0, options.numberOfParallelConnections);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7740",
      "text": "       const elapsedTime = Date.now() - crawlStart;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7741",
      "text": "       const remainingPages = marked.length + queue.length;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7742",
      "text": "       const pagesPercent = Math.ceil(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7743",
      "text": "         (marked.length / (marked.length + queue.length)) * 100,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7744",
      "text": "       );",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7745",
      "text": "       const timeRemaining = (elapsedTime / marked.length) * queue.length;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7746",
      "text": "       spinner.setText(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7747",
      "text": "         \"Crawling...[\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7748",
      "text": "           marked.length.toString().padStart(pageCount.toString().length, \"0\") +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7749",
      "text": "           \"/\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d774a",
      "text": "           remainingPages.toString().padStart(pageCount.toString().length, \"0\") +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d774b",
      "text": "           \" \" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d774c",
      "text": "           pagesPercent.toString().padStart(2, \"0\") +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d774d",
      "text": "           \"%]ETA\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d774e",
      "text": "           Math.ceil(timeRemaining / 1000 / 60)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d774f",
      "text": "             .toString()",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7750",
      "text": "             .padStart(2, \"0\") +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7751",
      "text": "           \":\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7752",
      "text": "           Math.ceil((timeRemaining / 1000) % 60)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7753",
      "text": "             .toString()",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7754",
      "text": "             .padStart(2, \"0\") +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7755",
      "text": "           \"(\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7756",
      "text": "           pageCount +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7757",
      "text": "           \" in project)(\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7758",
      "text": "           excluded.length.toString().padStart(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7759",
      "text": "             pageCount.toString().length,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d775a",
      "text": "             \"0\",",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d775b",
      "text": "           ) +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d775c",
      "text": "           \" excluded)\",",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d775d",
      "text": "       );",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d775e",
      "text": "       for (const element of pageNames) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d775f",
      "text": "         promiseList.push(getPage(element));",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7760",
      "text": "         // console.log(element);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7761",
      "text": "       }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7762",
      "text": "       return Promise.all(promiseList).then(() => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7763",
      "text": "         queue = queue.filter((element, index) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7764",
      "text": "           return (",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7765",
      "text": "             queue.indexOf(element) == index &&",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7766",
      "text": "             !marked.includes(element) &&",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7767",
      "text": "             !excluded.includes(element)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7768",
      "text": "           );",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7769",
      "text": "         });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d776a",
      "text": "         return crawlTick();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d776b",
      "text": "       });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d776c",
      "text": "     }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d776d",
      "text": "     spinner.start(\"Crawling...\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d776e",
      "text": "     const crawlStart = Date.now();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d776f",
      "text": "     return crawlTick().then(() => ({",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7770",
      "text": "       options,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7771",
      "text": "       marked,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7772",
      "text": "       excluded,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7773",
      "text": "     }));",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7774",
      "text": "   })",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7775",
      "text": "   .then(({ options, marked, excluded }) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7776",
      "text": "     spinner.succeed(\"Crawled\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7777",
      "text": "     spinner.stop();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7778",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7779",
      "text": "     return pagelist.allpagelist(options.projectName).then((allpagelist) => ({",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d777a",
      "text": "       allpagelist,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d777b",
      "text": "       options,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d777c",
      "text": "       marked,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d777d",
      "text": "       excluded,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d777e",
      "text": "     }));",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d777f",
      "text": "   }).then(({ allpagelist, options, marked, excluded }) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7780",
      "text": "     spinner.start(\"Saving...\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7781",
      "text": "     const garbagelist = allpagelist.filter((value) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7782",
      "text": "       !marked.includes(value);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7783",
      "text": "     });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7784",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7785",
      "text": "     return Deno.writeTextFile(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7786",
      "text": "       options.output,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7787",
      "text": "       JSON.stringify({",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7788",
      "text": "         marked: marked,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7789",
      "text": "         garbagelist: garbagelist,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d778a",
      "text": "         alllist: allpagelist,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d778b",
      "text": "         excluded: excluded,",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d778c",
      "text": "       }),",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d778d",
      "text": "     );",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d778e",
      "text": "   }).then(() => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d778f",
      "text": "     spinner.succeed(\"Saved\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7790",
      "text": "     spinner.stop();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7791",
      "text": "   });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    },
    {
      "id": "6744e4b471b3c200008d7792",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732568244,
      "updated": 1732568244
    }
  ]
}