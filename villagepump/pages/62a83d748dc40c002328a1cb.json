{
  "id": "62a83d748dc40c002328a1cb",
  "title": "personal-pin",
  "created": 1655192949,
  "updated": 1684791843,
  "lines": [
    {
      "id": "62a83d748dc40c002328a1cb",
      "text": "personal-pin",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a85a3b1280f00000fccbab",
      "text": "個人用[ピン留め]script",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200315,
      "updated": 1655200342
    },
    {
      "id": "62a85a571280f00000fccbae",
      "text": " 全体には反映されず、自分にだけ反映される",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200344,
      "updated": 1655200356
    },
    {
      "id": "637d29d67838e30000535a0c",
      "text": " [Document https://doc.deno.land/https://scrapbox.io/api/code/villagepump/personal-pin/mod.js]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1669147092,
      "updated": 1669147095
    },
    {
      "id": "637d50d97838e30000bb934f",
      "text": " \t`mod.js`ではなく[personal-pin/@types]/`mod.d.ts`の内容を表示している",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1669157080,
      "updated": 1669157131
    },
    {
      "id": "62a83d751280f00000d9a76f",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192957
    },
    {
      "id": "62a85a371280f00000fccbaa",
      "text": "from [欲しいUserScript]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200311,
      "updated": 1655200311
    },
    {
      "id": "62a83d751280f00000d9a770",
      "text": "[ピン留め]の個人版[Mijinko_SD.icon][nishio.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a83d751280f00000d9a771",
      "text": "　プロジェクト全体に反映されるのではなく、自分にしか反映されないピン留め",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a83d751280f00000d9a772",
      "text": "　[pin-diary-3]に手を加えれば作れそう[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a83d751280f00000d9a773",
      "text": " なるほど、これがあれば[個人project]の自分用ピン留めと来訪者用ピン留めができるか[nishio.icon]",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1655192949,
      "updated": 1684791843
    },
    {
      "id": "62a83d751280f00000d9a774",
      "text": " リマインドにも使えそう[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a83d751280f00000d9a775",
      "text": " もしこれができるようになったら、@ページをピン留めしたい…[Mijinko_SD.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a83d751280f00000d9a776",
      "text": " 　と思ったけれど@ページ関しては、いつでもアクセスしたいわけじゃなくて通知を受け取りたいだけだから違うか",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a83d751280f00000d9a777",
      "text": " 　仮にピン留めしたとしても新着に気付けるわけではない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a83d751280f00000d9a778",
      "text": " 　それなら未読のときだけpinされるようにすればいいな[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a83d751280f00000d9a779",
      "text": " 　 未読検出は簡単",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a83d751280f00000d9a77a",
      "text": " 　 天才[Mijinko_SD.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a857101280f00000fccac7",
      "text": "  使用例：未読の@ページをピンする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199505,
      "updated": 1655199520
    },
    {
      "id": "62a8571f1280f00000fccac9",
      "text": "   code:unreadDM.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199520,
      "updated": 1655199531
    },
    {
      "id": "62a8572a1280f00000fccaca",
      "text": "    import { launch } from \"./mod.js\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199531,
      "updated": 1655199540
    },
    {
      "id": "62a857341280f00000fccacb",
      "text": "    ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199540,
      "updated": 1655199540
    },
    {
      "id": "62a857741280f00000fccad0",
      "text": "    const title = \"@Mijinko_SD\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199606,
      "updated": 1655199620
    },
    {
      "id": "62a8575b1280f00000fccacf",
      "text": "    ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199580,
      "updated": 1655199580
    },
    {
      "id": "62a857341280f00000fccacc",
      "text": "    launch(async () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199540,
      "updated": 1655199560
    },
    {
      "id": "62a8574b1280f00000fccace",
      "text": "      const res = await fetch(`/api/pages/villagepump/${title}`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199564,
      "updated": 1655199631
    },
    {
      "id": "62a8578e1280f00000fccad1",
      "text": "      if (!res.ok) return [];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199631,
      "updated": 1655199637
    },
    {
      "id": "62a857951280f00000fccad2",
      "text": "      const { persistent, lastAccessed, updated } = await res.json();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199637,
      "updated": 1655199689
    },
    {
      "id": "62a857c91280f00000fccad3",
      "text": "      return persistent && lastAccessed < updated ? [title] : [];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199689,
      "updated": 1655199718
    },
    {
      "id": "62a857481280f00000fccacd",
      "text": "    });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199560,
      "updated": 1655199721
    },
    {
      "id": "62a857e81280f00000fccad4",
      "text": "    ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199721,
      "updated": 1655199721
    },
    {
      "id": "6373bd317838e300005e1269",
      "text": "\t[/forum-jp/自分だけのピン止めが欲しい]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1668529457,
      "updated": 1668529459
    },
    {
      "id": "6376fdbf1280f000003f3cf4",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668742592,
      "updated": 1668742592
    },
    {
      "id": "6376fdc01280f000003f3cf5",
      "text": "2022-11-18 これ動いていますか？というかそもそも使っている人いますか？[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668742592,
      "updated": 1668742611
    },
    {
      "id": "6376fdd31280f000003f3cf6",
      "text": " 自分は使っていないので、まともに動作しているのかわからない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668742611,
      "updated": 1668742628
    },
    {
      "id": "637d37dd7838e30000e235b5",
      "text": " 1箇所修正すれば動作しました[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1669150683,
      "updated": 1669150690
    },
    {
      "id": "637d38577838e30000bb92d5",
      "text": " \tテスト時のソースコード：[/Mijinko-other/villagepump/personal-pin]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1669150805,
      "updated": 1669150810
    },
    {
      "id": "6385a4601280f00000831fcb",
      "text": " 修正ありがとうございます！[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1669702753,
      "updated": 1669702760
    },
    {
      "id": "62a83d751280f00000d9a77b",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192949,
      "updated": 1655192949
    },
    {
      "id": "62a83d811280f00000d9a77c",
      "text": "名付けてみたがなんか微妙[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192961,
      "updated": 1655192973
    },
    {
      "id": "62a83d841280f00000d9a77d",
      "text": "\t[BetterDiscord]に似たような名前のプラグインがある[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655192964,
      "updated": 1655193103
    },
    {
      "id": "62a83e087838e30000ea3832",
      "text": "\t[https://betterdiscord.app/plugin/PersonalPins PersonalPins - BetterDiscord]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655193096,
      "updated": 1655193100
    },
    {
      "id": "62a83fdf1280f00000d9a801",
      "text": "\tあらあら[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655193567,
      "updated": 1655193573
    },
    {
      "id": "62a83fe61280f00000d9a802",
      "text": "\t 別の名前にしよう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655193574,
      "updated": 1655193581
    },
    {
      "id": "62a847561280f00000fcc9ef",
      "text": "\tいい感じの名前かいてけ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655195479,
      "updated": 1655195492
    },
    {
      "id": "62a847641280f00000fcc9f0",
      "text": "\t 秘密ピン",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655195493,
      "updated": 1655197318
    },
    {
      "id": "62a84e867838e3000034f357",
      "text": "\t \tこっそりピン留め",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655197319,
      "updated": 1655197328
    },
    {
      "id": "62a8534d5f1e0d00009ec98f",
      "text": "\t あとで読む",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1655198541,
      "updated": 1655198610
    },
    {
      "id": "62a853925f1e0d00009ec990",
      "text": "\t \t安直かな[wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1655198611,
      "updated": 1655198642
    },
    {
      "id": "62a85a761280f00000fccbaf",
      "text": "\t \tあとで読む以外の使い道もあるのでびみょい[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200375,
      "updated": 1655200390
    },
    {
      "id": "62a83e0b7838e30000ea3833",
      "text": "  [- my]Myピン止め",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655193100,
      "updated": 1655273703
    },
    {
      "id": "62a87ea37838e30000029530",
      "text": "  \t機能の特徴が簡潔に書かれていてわかりやすいと思う[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655209633,
      "updated": 1655209664
    },
    {
      "id": "62a87ec17838e30000029531",
      "text": "  \t個人的にはmは大文字の方が好み[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655209664,
      "updated": 1655209674
    },
    {
      "id": "62a978e91280f00000b0bcb2",
      "text": "  \t大文字にした[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655273705,
      "updated": 1655273707
    },
    {
      "id": "62a857051280f00000fccab9",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199493,
      "updated": 1655199493
    },
    {
      "id": "62a858331280f00000fccad6",
      "text": "2022-06-14",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199796,
      "updated": 1655199800
    },
    {
      "id": "62a858371280f00000fccad7",
      "text": " 18:43:17 できた[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199800,
      "updated": 1655199803
    },
    {
      "id": "62a858561280f00000fccad9",
      "text": "  bundleなしで、そのまま実行できるようにした",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199830,
      "updated": 1655199847
    },
    {
      "id": "62a8583b1280f00000fccad8",
      "text": "  型チェックはしたけど動作は未検証",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199803,
      "updated": 1655199823
    },
    {
      "id": "62a858681280f00000fccada",
      "text": "   試してみてください",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199849,
      "updated": 1655199852
    },
    {
      "id": "62a858331280f00000fccad5",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199795,
      "updated": 1655199795
    },
    {
      "id": "62a856e11280f00000fccab7",
      "text": "コアモジュール",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655199459,
      "updated": 1655199463
    },
    {
      "id": "62a858711280f00000fccadb",
      "text": " `launch`にピン止めしたいページを渡して実行する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655199857,
      "updated": 1669151071
    },
    {
      "id": "62a8593e1280f00000fccba6",
      "text": "  `titles`にページのタイトルのリストを渡す",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655200062,
      "updated": 1669151072
    },
    {
      "id": "62a859471280f00000fccba7",
      "text": "   前から順にピン止めされる",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655200072,
      "updated": 1669151072
    },
    {
      "id": "62a859651280f00000fccba8",
      "text": "   函数を渡すこともできる",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655200102,
      "updated": 1669151072
    },
    {
      "id": "62a8596d1280f00000fccba9",
      "text": "   　更新するたびにピンするページを変えたいときに使う",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1655200110,
      "updated": 1669151072
    },
    {
      "id": "637d396d7838e30000bb92da",
      "text": "   　asyncがついた函数も渡せる[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1669151084,
      "updated": 1669151106
    },
    {
      "id": "637d39877838e30000bb92db",
      "text": "  \t函数を渡した場合、その函数はページ名が入った配列を返さなければならない[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1669151109,
      "updated": 1669151120
    },
    {
      "id": "6385a4831280f00000831fcc",
      "text": "  \t iteratorでも可[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1669702789,
      "updated": 1669702792
    },
    {
      "id": "62a85abb1280f00000fccbb0",
      "text": " 実装は[pin-diary-3]の改造",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200444,
      "updated": 1655200453
    },
    {
      "id": "62a85acf1280f00000fccbb1",
      "text": "  arrow functionsにしたり型をちゃんと書いたり不要な函数を削ったりしている",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200464,
      "updated": 1655200488
    },
    {
      "id": "62a8474d1280f00000fcc9ed",
      "text": "$ deno check --remote -r=https://scrapbox.io https://scrapbox.io/api/code/villagepump/personal-pin/mod.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655195469,
      "updated": 1669702911
    },
    {
      "id": "62a83d8f1280f00000d9a77e",
      "text": "code:mod.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655192975,
      "updated": 1655199450
    },
    {
      "id": "62a83f941280f00000d9a780",
      "text": " // @ts-check",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655193492,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccade",
      "text": " /// <reference no-default-lib=\"true\" />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccadf",
      "text": " /// <reference lib=\"esnext\" />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccae0",
      "text": " /// <reference lib=\"dom\" />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "637d3f297838e30000bb92f4",
      "text": " /// <reference types=\"/api/code/villagepump/personal-pin%2F@types/mod.d.ts\" />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1669152551,
      "updated": 1669704170
    },
    {
      "id": "62a8591f1280f00000fccae1",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccae2",
      "text": " /**",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccae3",
      "text": "  *  @typedef {import(\"https://raw.githubusercontent.com/scrapbox-jp/types/0.3.5/scrapbox.ts\").Scrapbox} Scrapbox",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccae4",
      "text": "  */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccae5",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccae6",
      "text": " /** @type {Scrapbox} */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccae7",
      "text": " // @ts-ignore declare使えないので無理やり色々やっている",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccae8",
      "text": " const scrapbox = window.scrapbox;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccae9",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaea",
      "text": " /** @typedef {object} LaunchOptions",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaeb",
      "text": "  * @property {string} [project] ピン留めするプロジェクト名 既定は現在のプロジェクト名",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaec",
      "text": "  * @property {number} [interval=60000] ピン留め更新処理の間隔",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaed",
      "text": "  */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaee",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaef",
      "text": " /** ピン留め処理を開始する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaf0",
      "text": "  *",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaf1",
      "text": "  * @param {Iterable<string>|(()=>(Iterable<string>|Promise<Iterable<string>>))} titles ピン留めしたいページのタイトル",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaf2",
      "text": "  * @param {LaunchOptions} [options] オプション",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200512
    },
    {
      "id": "62a8591f1280f00000fccaf3",
      "text": "  * @return {()=>void} 後始末用函数",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaf4",
      "text": "  */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaf5",
      "text": " export const launch = (titles, options) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaf6",
      "text": "   const { project = scrapbox.Project.name, interval = 60000 } = options ?? {};",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a85b091280f00000fccbb2",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200522,
      "updated": 1655200522
    },
    {
      "id": "62a8591f1280f00000fccaf7",
      "text": "   /** @type {number | undefined} */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaf8",
      "text": "   let updateTimer;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaf9",
      "text": "   const end = () => clearInterval(updateTimer);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccafa",
      "text": "   const start = async () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccafb",
      "text": "     end();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccafc",
      "text": "     await updatePins(project, titles);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccafd",
      "text": "     updateTimer = setInterval(() => updatePins(project, titles), interval);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccafe",
      "text": "   };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccaff",
      "text": "   const handleChange = () =>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb00",
      "text": "     // トップページでのみ起動する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb01",
      "text": "     scrapbox.Layout === \"list\" && !location.pathname.startsWith(\"/stream\") &&",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb02",
      "text": "       scrapbox.Project.name === project",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1669702846
    },
    {
      "id": "637d37287838e30000740c72",
      "text": "ここ`!==`じゃなくて`===`かも ↑ [Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1669150503,
      "updated": 1669150503
    },
    {
      "id": "6385a4b31280f00000831fcd",
      "text": " ほんとだ[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1669702836,
      "updated": 1669702839
    },
    {
      "id": "6385a4b61280f00000831fce",
      "text": " 直しました",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1669702839,
      "updated": 1669702842
    },
    {
      "id": "637d37217838e30000740c70",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1669150496,
      "updated": 1669150496
    },
    {
      "id": "637d37087838e30000740c6f",
      "text": "code:mod.js",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1669150471,
      "updated": 1669150471
    },
    {
      "id": "62a8591f1280f00000fccb03",
      "text": "       ? start()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb04",
      "text": "       : end();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb05",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb06",
      "text": "   handleChange();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb07",
      "text": "   scrapbox.addListener(\"layout:changed\", handleChange);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb08",
      "text": "   //トップページからトップページに移動してもlayout:changedは呼ばれないので、ここでhandleChangeをかける",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb09",
      "text": "   scrapbox.addListener(\"project:changed\", handleChange);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb0a",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb0b",
      "text": "   return () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb0c",
      "text": "     end();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb0d",
      "text": "     scrapbox.removeListener(\"layout:changed\", handleChange);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb0e",
      "text": "     scrapbox.removeListener(\"project:changed\", handleChange);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb0f",
      "text": "   };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb10",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb11",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb12",
      "text": " /** ピン留め処理",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb13",
      "text": "  *",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb14",
      "text": "  * @param {string} project プロジェクト名",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb15",
      "text": "  * @param {Iterable<string>|(()=>(Iterable<string>|Promise<Iterable<string>>))} titles ピン留めしたいページのタイトル",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb16",
      "text": "  */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb17",
      "text": " const updatePins = async (project, titles) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb18",
      "text": "   /** タイトルのリスト",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb19",
      "text": "    *",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb1a",
      "text": "    * `titles`の型を調整したもの",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb1b",
      "text": "    *",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb1c",
      "text": "    * @type {Iterable<string>}",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb1d",
      "text": "    */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb1e",
      "text": "   let list;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb1f",
      "text": "   if (typeof titles === \"function\") {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb20",
      "text": "     const result = titles();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb21",
      "text": "     list = result instanceof Promise ? await result : result;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb22",
      "text": "   } else {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb23",
      "text": "     list = titles;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb24",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb25",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb26",
      "text": "   // ピン留めカードを一旦全部消してから作り直す",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb27",
      "text": "   deletePseudoCards();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb28",
      "text": "   for (const title of list) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb29",
      "text": "     const card = makePseudoCard(project, title);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb2a",
      "text": "     // ピン留め済みなら何もしない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb2b",
      "text": "     if (card.classList.contains(\"pin\")) continue;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb2c",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb2d",
      "text": "     const pins = listPins();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb2e",
      "text": "     pin(card);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb2f",
      "text": "     if (pins.length > 0) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb30",
      "text": "       const lastPin = pins[pins.length - 1];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb31",
      "text": "       lastPin.parentElement?.insertBefore?.(card, lastPin);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb32",
      "text": "     } else {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb33",
      "text": "       cardList()?.insertAdjacentElement?.(\"afterbegin\", card);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb34",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb35",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb36",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb37",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb38",
      "text": " /** 指定したカードをpinする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb39",
      "text": "  *",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb3a",
      "text": "  * @param {HTMLLIElement} card",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb3b",
      "text": "  * @return {void}",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb3c",
      "text": "  */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb3d",
      "text": " const pin = (card) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb3e",
      "text": "   card.getElementsByClassName(\"hover\")?.[0]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb3f",
      "text": "     ?.insertAdjacentHTML(\"afterend\", '<div class=\"pin\"></div>');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb40",
      "text": "   card.classList.add(\"pin\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb41",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb42",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb43",
      "text": " /** トップページのカードリストを取得する */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb44",
      "text": " const cardList = () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb45",
      "text": "   const cards = document.getElementsByClassName(\"page-list\")?.[0]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb46",
      "text": "     ?.getElementsByClassName(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb47",
      "text": "       \"grid\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb48",
      "text": "     )?.[0];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb49",
      "text": "   if (!cards) return undefined;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb4a",
      "text": "   if (!(cards instanceof HTMLUListElement)) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb4b",
      "text": "     throw TypeError('\".page-list .grid\" must be ul.grid');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb4c",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb4d",
      "text": "   return cards;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb4e",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb4f",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb50",
      "text": " /** ピン留めページを取得する */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb51",
      "text": " const listPins = () =>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb52",
      "text": "   Array.from(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb53",
      "text": "     cardList()?.getElementsByClassName?.(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb54",
      "text": "       \"page-list-item grid-style-item pin\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb55",
      "text": "     ) ?? [],",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb56",
      "text": "   );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb57",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb58",
      "text": " const id = \"personal-pin-card\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb59",
      "text": " /** ページカードを作る",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb5a",
      "text": "  *",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb5b",
      "text": "  * ページリストにあるときはそれをコピーし、ないときは空のページカードを作る",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb5c",
      "text": "  * @param {string} project プロジェクト名",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb5d",
      "text": "  * @param {string} title ページタイトル",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb5e",
      "text": "  * @return {HTMLLIElement}",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb5f",
      "text": "  */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb60",
      "text": " const makePseudoCard = (project, title) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb61",
      "text": "   const path = `/${project}/${encodeTitleURI(title)}`;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb62",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb63",
      "text": "   const card = cardList()?.querySelector?.(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb64",
      "text": "     `li.page-list-item a[href=\"${path}\"]`,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb65",
      "text": "   )?.parentNode;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb66",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb67",
      "text": "   if (!card) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb68",
      "text": "     const card = document.createElement(\"li\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb69",
      "text": "     card.dataset.id = id;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb6a",
      "text": "     card.classList.add(\"page-list-item\", \"grid-style-item\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb6b",
      "text": "     card.style.opacity = \"0.7\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb6c",
      "text": "     card.insertAdjacentHTML(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb6d",
      "text": "       \"beforeend\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb6e",
      "text": "       `<a href=\"/${scrapbox.Project.name}/${",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb6f",
      "text": "         encodeURIComponent(title)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb70",
      "text": "       }\" rel=\"route\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb71",
      "text": "   <div class=\"hover\"></div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb72",
      "text": "   <div class=\"content\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb73",
      "text": "     <div class=\"header\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb74",
      "text": "       <div class=\"title\">${title}</div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb75",
      "text": "     </div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb76",
      "text": "     <div class=\"description\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb77",
      "text": "       <div class=\"line-img\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb78",
      "text": "         <div></div><div></div><div></div><div></div><div></div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb79",
      "text": "       </div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb7a",
      "text": "     </div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb7b",
      "text": "   </div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb7c",
      "text": " </a>`,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb7d",
      "text": "     );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb7e",
      "text": "     return card;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb7f",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb80",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb81",
      "text": "   const cloned = card.cloneNode(true);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb82",
      "text": "   if (!(cloned instanceof HTMLLIElement)) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb83",
      "text": "     throw TypeError('\"li.page-list-item\" must be ul.grid');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb84",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb85",
      "text": "   cloned.dataset.id = id;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb86",
      "text": "   return cloned;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb87",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb88",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb89",
      "text": " /** このscriptで作成したカードを全部消す */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb8a",
      "text": " const deletePseudoCards = () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb8b",
      "text": "   document.querySelectorAll(`li[data-id=\"${id}\"]`)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb8c",
      "text": "     .forEach((card) => card.remove());",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb8d",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb8e",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb8f",
      "text": " const noEncodeChars = '@$&+=:;\",';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb90",
      "text": " const noTailChars = ':;\",';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb91",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb92",
      "text": " /** titleをURIで使える形式にEncodeする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb93",
      "text": "  *",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb94",
      "text": "  * ported from https://github.com/takker99/scrapbox-userscript-std/blob/0.14.5/title.ts#L28",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb95",
      "text": "  *",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb96",
      "text": "  * @param {string} title 変換するtitle",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb97",
      "text": "  * @return {string} 変換後の文字列",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb98",
      "text": "  */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb99",
      "text": " const encodeTitleURI = (title) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb9a",
      "text": "   return [...title].map((char, index) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb9b",
      "text": "     if (char === \" \") return \"_\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb9c",
      "text": "     if (",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb9d",
      "text": "       !noEncodeChars.includes(char) ||",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb9e",
      "text": "       (index === title.length - 1 && noTailChars.includes(char))",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccb9f",
      "text": "     ) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccba0",
      "text": "       return encodeURIComponent(char);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccba1",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccba2",
      "text": "     return char;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccba3",
      "text": "   }).join(\"\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccba4",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a8591f1280f00000fccba5",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655200031,
      "updated": 1655200031
    },
    {
      "id": "62a83f8e1280f00000d9a77f",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1655193486,
      "updated": 1655193486
    }
  ]
}