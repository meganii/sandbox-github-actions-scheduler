{
  "id": "63a690f3e1c686001d8d4a6d",
  "title": "2022年12月末に発生したSkebの障害",
  "created": 1671860468,
  "updated": 1674658214,
  "lines": [
    {
      "id": "63a690f3e1c686001d8d4a6d",
      "text": "2022年12月末に発生したSkebの障害",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860468,
      "updated": 1671860495
    },
    {
      "id": "63a690f37838e30000a32c54",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860468,
      "updated": 1671860507
    },
    {
      "id": "63a690f37838e30000a32c55",
      "text": "[【復旧】12月23日、24日に発生しました障害に関するご報告 - skeb_jp - Medium https://medium.com/skeb-jp/report-36b5608aa867]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860468,
      "updated": 1671860468
    },
    {
      "id": "63a690f37838e30000a32c56",
      "text": ">原因: [Skeb]はすべてのサーバとシステムを[Heroku]に設置していたが、障害発生時刻より同サービスのアカウントが理由の通知なく利用できなくなった。",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860468,
      "updated": 1671860542
    },
    {
      "id": "63a690f37838e30000a32c57",
      "text": ">解決: Herokuの一切の利用を中止し、すべてのサーバとシステムを別の[クラウドサービス]に移管したことで復旧。",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1671860468,
      "updated": 1671868070
    },
    {
      "id": "63a690f37838e30000a32c58",
      "text": ">（中略）",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860468,
      "updated": 1671860468
    },
    {
      "id": "63a690f37838e30000a32c59",
      "text": ">12月23日12時32分: [スケブ社]と[Herokuのエンタープライズ契約]を締結しているHeroku日本代理店である[セールスフォース・ジャパン]に連絡。Herokuのサポート窓口に直接連絡するように案内を受ける。",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671860468,
      "updated": 1671879543
    },
    {
      "id": "63a690f37838e30000a32c5a",
      "text": ">12月23日12時55分: Herokuの[サポート窓口]に連絡。",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860468,
      "updated": 1671860555
    },
    {
      "id": "63a690f37838e30000a32c5b",
      "text": ">12月23日13時04分: Herokuのサポート窓口から応答がないため、セールスフォース・ジャパンに再度連絡し、同社が状況確認を行うように依頼。",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860468,
      "updated": 1671860468
    },
    {
      "id": "63a6bbc35e90c0000080e32a",
      "text": " ↕この間の意思決定プロセスを知りたい（本当は全部しりたい）[issac.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871426,
      "updated": 1671871431
    },
    {
      "id": "63a6bc375e90c0000080e32b",
      "text": "  [https://medium.com/skeb-jp/fail-4e8a9503d55a 12月23日12時22分より発生中の障害につきまして - skeb_jp - Medium]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871542,
      "updated": 1671871553
    },
    {
      "id": "63a6bc425e90c0000080e32c",
      "text": "  >Skebのサーバを設置している海外のクラウドサービスのスケブ社のアカウントに問題が発生していることは既に特定できており、担当部門に調査を依頼しておりますが、担当部門が海外かつ年末ということもあり、返信に時間を要することが予想されています。",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871553,
      "updated": 1671871566
    },
    {
      "id": "63a6bc4f5e90c0000080e32d",
      "text": "  > ",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871566,
      "updated": 1671871566
    },
    {
      "id": "63a6bc4f5e90c0000080e32e",
      "text": "  > 担当部門からの返信を待つ時間を考えた結果、この度Skebの全システムとサーバを別のクラウドサービスに移管することにいたしました。",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871566,
      "updated": 1671871566
    },
    {
      "id": "63a6bc4f5e90c0000080e32f",
      "text": "  > 現在順調に移管作業が進行しており、早ければ本日中、遅くとも明日中に復旧できる見込みです。",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871566,
      "updated": 1671871566
    },
    {
      "id": "63a690f37838e30000a32c5c",
      "text": ">12月23日13時14分: Herokuの復旧時期が未定のため、Herokuの一切の利用の中止を決定。別のクラウドサービスへの移管を開始。",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860468,
      "updated": 1671860468
    },
    {
      "id": "63a691b97838e30000a32c60",
      "text": ">（中略）",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860666,
      "updated": 1671860671
    },
    {
      "id": "63a691c07838e30000a32c61",
      "text": ">12月23日18時28分: セールスフォース・ジャパンより、同社もHerokuに連絡したが応答がない旨の連絡を受ける。",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860672,
      "updated": 1671860673
    },
    {
      "id": "63a692f47838e30000597031",
      "text": ">12月23日20時24分: 新しいクラウドサービスにステージング環境の構築が完了。",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860980,
      "updated": 1671860984
    },
    {
      "id": "63a692f47838e30000597032",
      "text": ">12月24日04時32分: 新しいクラウドサービスに本番環境の構築が完了。",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860980,
      "updated": 1671860983
    },
    {
      "id": "63a690f37838e30000a32c5d",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860468,
      "updated": 1671860468
    },
    {
      "id": "63a691237838e30000a32c5e",
      "text": " [Skeb]が[Heroku]のせいで大変なことになってたらしい[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1671860515,
      "updated": 1671860687
    },
    {
      "id": "63a691247838e30000a32c5f",
      "text": "　障害発生から利用中止決定までの意思決定スピードが迅速だと思った[issac.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671860516,
      "updated": 1671861521
    },
    {
      "id": "63a695135e90c000001a7be3",
      "text": "　　他でこういうことが起きたとき、復帰にどれだけ時間がかかるのだろうか",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671861522,
      "updated": 1671861564
    },
    {
      "id": "63a6ba2a774b1700008fb15d",
      "text": "　　 サービス規模とドキュメントと人と予算と契約によりすぎるので一概になんとも言えなそう[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1671871018,
      "updated": 1671871049
    },
    {
      "id": "63a694a95e90c000001a7be2",
      "text": " クラウドサービスってこんなにすぐ切り替えられるんだ[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1671861417,
      "updated": 1671868039
    },
    {
      "id": "63a6ba5f774b1700008fb15e",
      "text": "  大多数の（それなりの規模の）サービスでは無理だと思います[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1671871071,
      "updated": 1671871093
    },
    {
      "id": "63a6ba7b774b1700008fb15f",
      "text": "   個人の小さいところならまあ...",
      "userId": "59fb21121207900012774b17",
      "created": 1671871099,
      "updated": 1671871110
    },
    {
      "id": "63a6c2a51280f000005ba0da",
      "text": "  Heroku特有の機能にあまり依存してなかったのかな？[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1671873189,
      "updated": 1671873208
    },
    {
      "id": "63a6c2b81280f000005ba0db",
      "text": "   にしたってこんな短時間で丸ごと移し替えられるものなのか……？",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1671873208,
      "updated": 1671873227
    },
    {
      "id": "63a6ae5de5172d00000ca1b2",
      "text": "　Skeb以外でも障害あったんかな？[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1671867997,
      "updated": 1671868107
    },
    {
      "id": "63a6babb5e90c0000080e304",
      "text": "  なるがみさんの見解[issac.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871162,
      "updated": 1671871213
    },
    {
      "id": "63a6aec2e5172d00000ca1b3",
      "text": "   >[https://twitter.com/nalgami/status/1606511718628458497?s=20&t=016FH5FzoLjV9aaDgzxUlg @nalgami]: Herokuの原因は結局わからないまままだけど、この時期無料枠の終了をしているから、契約周りの不整合とかでロックされたんじゃないかと思っています。",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671868099,
      "updated": 1671871163
    },
    {
      "id": "63a6bab75e90c0000080e300",
      "text": "",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871158,
      "updated": 1671871158
    },
    {
      "id": "63a6bac6774b1700008668de",
      "text": "from [2022/12/24]",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6bac6774b1700008668e0",
      "text": "[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871181
    },
    {
      "id": "63a6bac6774b1700008668e1",
      "text": " https://medium.com/skeb-jp/report-36b5608aa867",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6bb005e90c0000080e306",
      "text": "  これ見れば見るほどすごいログだなあ[issac.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871232,
      "updated": 1671871250
    },
    {
      "id": "63a6c0dc7838e30000cb127d",
      "text": " \t[Heroku Enterprise]を契約しているにも関わらずこんなことになるのか[Mijinko_SD.icon][nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1671872733,
      "updated": 1671872919
    },
    {
      "id": "63a6c197aff09e0000d55c70",
      "text": " \tひえー、そんなことになってたのか[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1671872920,
      "updated": 1671872941
    },
    {
      "id": "63a6bb1d5e90c0000080e307",
      "text": " ここがすごい",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871261,
      "updated": 1671871437
    },
    {
      "id": "63a6bac6774b1700008668e3",
      "text": "  障害認知から1時間以内に別のクラウドサービスへの移管を開始",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6bac6774b1700008668e4",
      "text": "   ここが一番すごい",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6c31c1280f000005ba0dc",
      "text": "   人間やめてるレベル[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1671873308,
      "updated": 1671873319
    },
    {
      "id": "63a6c33d5e90c000003fc221",
      "text": "   [👺判断が早い][issac.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671873340,
      "updated": 1671873357
    },
    {
      "id": "63a6bac6774b1700008668e5",
      "text": "  18時間程度で乗り換え作業が完了",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6ce4bdd60be00006509b8",
      "text": "  > スケブ社ではエンジニアに対して開発環境の指定を行わず、各々がWindows、Mac、Ubuntuといった好みのOSを用いて開発しています。",
      "userId": "5fe444046f8e560041dd60be",
      "created": 1671876172,
      "updated": 1671876172
    },
    {
      "id": "63a6ce4cdd60be00006509b9",
      "text": "  > どのような環境でも開発ができるように、Skebのすべてのシステムはオフラインの仮想環境で動作するコンテナイメージを作成しています。",
      "userId": "5fe444046f8e560041dd60be",
      "created": 1671876172,
      "updated": 1671876172
    },
    {
      "id": "63a6ce4cdd60be00006509ba",
      "text": "  > 今回このコンテナイメージがあったことで、事前準備なく1日未満でHerokuから新しいクラウドサービスに問題なく移管することができました。",
      "userId": "5fe444046f8e560041dd60be",
      "created": 1671876172,
      "updated": 1671876172
    },
    {
      "id": "63a6ce7cdd60be00006509bc",
      "text": "  \tすごい[45Nuyagawa.icon]",
      "userId": "5fe444046f8e560041dd60be",
      "created": 1671876220,
      "updated": 1671876222
    },
    {
      "id": "63a6bac6774b1700008668e6",
      "text": " おもしろポイント",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6bac6774b1700008668e7",
      "text": "  障害報告ができないのでプロモツイートで対応した",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6cf27dd60be00006509bd",
      "text": "  > 12月23日14時21分: Twitter上で「Skeb」という単語をツイートや検索した方に対して、障害情報のツイートが表示されるようにプロモツイートを設定。",
      "userId": "5fe444046f8e560041dd60be",
      "created": 1671876391,
      "updated": 1671876393
    },
    {
      "id": "63a6cf2edd60be00006509bf",
      "text": "  \t賢い[45Nuyagawa.icon][nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1671876399,
      "updated": 1671877042
    },
    {
      "id": "63a6bac6774b1700008668e8",
      "text": " これが実現できたのはいろんな要素はあるはず",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6bac6774b1700008668e9",
      "text": "  エンジニア4人が稼働でできる規模",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6bac6774b1700008668ea",
      "text": "  サービスとしての機能が比較的小さそう",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6bac6774b1700008668eb",
      "text": "  インフラ費用がそこまで高くなさそう",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6bac6774b1700008668ed",
      "text": "   Skebのインフラの月額費用がどれぐらいか不明ですが高くても数十万円程度と思う",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6bddb774b1700008668f5",
      "text": "   障害時のGMVが1500万円ぐらい",
      "userId": "59fb21121207900012774b17",
      "created": 1671871963,
      "updated": 1671871963
    },
    {
      "id": "63a6bac6774b1700008668ee",
      "text": "  以前から検討していた？",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6c1c6aff09e0000d55c71",
      "text": "  　>Herokuの制限によって海外に設置されていたSkebのサーバが、移管によって日本国内に設置されることになりました。日本国内からのアクセスが大幅に高速化されます。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1671872967,
      "updated": 1671872970
    },
    {
      "id": "63a6c1caaff09e0000d55c72",
      "text": "  　 たまたまこれの準備をしてたとか？[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1671872971,
      "updated": 1671872993
    },
    {
      "id": "63a6c32e1280f000005ba0dd",
      "text": "  　 このくらいの偶然がないとこんなに迅速に移行できなさそう[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1671873326,
      "updated": 1671873346
    },
    {
      "id": "63a6c430774b17000058c889",
      "text": "  　 過去ツイートを漁るとHerokuのregionが日本じゃないのでFastlyに全部キャッシュして高速化していると言っているので、すでにページ表示等は高速化されているはずで大幅に高速化されるのは一部な気がする[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1671873584,
      "updated": 1671873636
    },
    {
      "id": "63a6bac6774b1700008668ef",
      "text": " アカウント停止していた状態でDBが移行出来たのは何故だろう？",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6bac6774b1700008668f0",
      "text": "  DBはHeroku Postgresじゃなかったのかもしれない",
      "userId": "59fb21121207900012774b17",
      "created": 1671871174,
      "updated": 1671871174
    },
    {
      "id": "63a6d89c5e90c000007ac22c",
      "text": "",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671878812,
      "updated": 1671878812
    },
    {
      "id": "63a6d8975e90c000007ac229",
      "text": ">今回の障害を受けて、深夜残業および休日出勤による法定割増賃金に加え「障害対応手当」という社内制度を新設しました。",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671878806,
      "updated": 1671878806
    },
    {
      "id": "63a6d8975e90c000007ac22a",
      "text": "> 復旧に向けて夜間作業にあたっていたエンジニア4名に対し、1人あたり3万円のAmazonギフト券を夜間直ちに支給しました。",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671878806,
      "updated": 1671878806
    },
    {
      "id": "63a6bac6774b1700008668f1",
      "text": " 対応が速いなあ[issac.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671871174,
      "updated": 1671878847
    },
    {
      "id": "63a6d8995e90c000007ac22b",
      "text": "",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671878809,
      "updated": 1671878809
    },
    {
      "id": "63a6c272aff09e0000d55c73",
      "text": ">今回の障害で1,500万円相当の取引の機会損失が発生しました。しかしながら、12月24日現在もHerokuから応答はなく、詳細な原因は判明しておりません。厚いサポートを謳うエンタープライズ契約を締結しているにも関わらず、このような対応は大変遺憾です。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1671873138,
      "updated": 1671873142
    },
    {
      "id": "63a6c276aff09e0000d55c75",
      "text": " [激おこぷんぷん丸]じゃん[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1671873142,
      "updated": 1671873170
    },
    {
      "id": "63a6c50e1280f000005ba0e5",
      "text": " たまたまサポート窓口が休業日だった？[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1671873806,
      "updated": 1671873834
    },
    {
      "id": "63a6c273aff09e0000d55c74",
      "text": "  エンタープライズ契約に休日サポートは含まれていたのかな",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1671873140,
      "updated": 1671873868
    },
    {
      "id": "63a6c68d774b17000074d442",
      "text": "  ぱっと見不明[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1671874190,
      "updated": 1671874195
    },
    {
      "id": "63a6c692774b17000074d443",
      "text": "   https://jp.heroku.com/support",
      "userId": "59fb21121207900012774b17",
      "created": 1671874195,
      "updated": 1671874210
    },
    {
      "id": "63a6c5331280f000005ba0e7",
      "text": "　18時間のストップで1500万相当の取引ってすごいなー[issac.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671873843,
      "updated": 1671874007
    },
    {
      "id": "63a6c5b15e90c000003fc232",
      "text": "",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1671873969,
      "updated": 1671873969
    },
    {
      "id": "63d141a0e2dacc0000892488",
      "text": "2023/1/23",
      "userId": "5f0ae250e8cd56001ee2dacc",
      "created": 1674658209,
      "updated": 1674658213
    },
    {
      "id": "63a6d8935e90c000007ac217",
      "text": " [Skeb、12月の大規模障害は「Heroku障害ではない」「完全に解決」　詳細は触れず https://www.itmedia.co.jp/news/articles/2301/23/news148.html]",
      "userId": "5f0ae250e8cd56001ee2dacc",
      "created": 1671878803,
      "updated": 1674658214
    },
    {
      "id": "63d141a5e2dacc0000892489",
      "text": "",
      "userId": "5f0ae250e8cd56001ee2dacc",
      "created": 1674658214,
      "updated": 1674658214
    }
  ]
}