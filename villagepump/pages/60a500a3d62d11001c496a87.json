{
  "id": "60a500a3d62d11001c496a87",
  "title": "昔のasearchは全角文字に弱かった",
  "created": 1621426340,
  "updated": 1622168718,
  "lines": [
    {
      "id": "60a500a3d62d11001c496a87",
      "text": "昔のasearchは全角文字に弱かった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621678286
    },
    {
      "id": "60a500a41280f00000f0aaad",
      "text": "from [@imo]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aaaf",
      "text": "[/spud-oimo/Scrapboxの曖昧検索#5fba14800684840000fe8938]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aab0",
      "text": " 推測ですが文字コードを8bitずつに分割しているからかもしれません[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aab1",
      "text": "  ここ：[/programming-notes/asearch#601bc7ca1280f00000313c44]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aab2",
      "text": "  例えば「あ」は、文字コードが`\\u3042`なので、[asearch]の内部では「0B」(文字コードはそれぞれ`\\u0030`と`\\u0042`)という文字列として扱われます",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a5022f8ee92a0000bec698",
      "text": "  [* 昔のasearchライブラリは8bitずつでしたが現在はUnicodeを利用しており、8bitずつの処理は無いはずです] [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621426736,
      "updated": 1621426793
    },
    {
      "id": "60a502911280f00000f0aad6",
      "text": "  　まじですか[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426834,
      "updated": 1621426842
    },
    {
      "id": "60a502b58ee92a0000bec69a",
      "text": "  　はい! [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621426869,
      "updated": 1621426871
    },
    {
      "id": "60a502ca1280f00000f0aad7",
      "text": "  　てことは[https://github.com/shokai/node-asearch shokai/node-asearch]は古いコードということですか",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426890,
      "updated": 1621426912
    },
    {
      "id": "60a502e01280f00000f0aad8",
      "text": "  　　PRだそうかな～",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426912,
      "updated": 1621426917
    },
    {
      "id": "60a502e58ee92a0000bec69b",
      "text": "   いえ、現在のNota製品ではUnicode版が使われており、ライブラリも更新するよう言ったはずです [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621426917,
      "updated": 1621426971
    },
    {
      "id": "60a503281280f00000f0aada",
      "text": "    てことは更新忘れですかね[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426985,
      "updated": 1621426994
    },
    {
      "id": "60a503331280f00000f0aadb",
      "text": "     最終更新が5年前だ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426995,
      "updated": 1621427008
    },
    {
      "id": "60a5037c1280f00000f0aade",
      "text": "      coffeescriptを使った古のコード",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621427068,
      "updated": 1621427078
    },
    {
      "id": "60a503478ee92a0000bec69d",
      "text": "     げ、だとするとマズいですね [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621427015,
      "updated": 1621427022
    },
    {
      "id": "60a5031e8ee92a0000bec69c",
      "text": "   もしかするとGitHubにアップしそこねてるのかもしれません [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621426975,
      "updated": 1621426996
    },
    {
      "id": "60a500a41280f00000f0aab3",
      "text": "    なるほ[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621427015
    },
    {
      "id": "60a503688ee92a0000bec69e",
      "text": "   ちょっと確認してみます [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621427049,
      "updated": 1621427054
    },
    {
      "id": "60a503421280f00000f0aadc",
      "text": "    お願いします！[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621427011,
      "updated": 1621427061
    },
    {
      "id": "60a5043d8ee92a0000bec69f",
      "text": "   やっぱり [shokai.icon] が更新してなかった模様 [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621427262,
      "updated": 1622168661
    },
    {
      "id": "60b04ce997c2910000577155",
      "text": "    違います。[増井俊之.icon]さんが私にpull request出してなかっただけです[shokai.icon]",
      "userId": "5724627723541f110097c291",
      "created": 1622166764,
      "updated": 1622166811
    },
    {
      "id": "60b054578ee92a0000ffb917",
      "text": "    連絡はしてましたがプルリクは確かに出してませんでした [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1622168664,
      "updated": 1622168697
    },
    {
      "id": "60a504c71280f00000f0aae0",
      "text": "   [増井俊之.icon]さんの[fork https://github.com/masui/node-asearch]の方はunicode対応されてた[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621427400,
      "updated": 1621427443
    },
    {
      "id": "60a505421280f00000f0aae3",
      "text": "    forkとか全然見ないので今まで気づかなかった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621427522,
      "updated": 1621427534
    },
    {
      "id": "60a5051f8ee92a0000bec6a0",
      "text": "   ありゃ、そうだっけ... [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621427487,
      "updated": 1621427492
    },
    {
      "id": "60a5054b8ee92a0000bec6a1",
      "text": "    shokaiがcoffeescriptのメンテしたくないのかもしれませんな [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621427531,
      "updated": 1621427548
    },
    {
      "id": "60a503701280f00000f0aadd",
      "text": "    まあですよねー[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621427056,
      "updated": 1621427557
    },
    {
      "id": "60a50c3ce5172d0000b01aad",
      "text": "   あれ？とするとScrapboxの検索で`spy`に対して`印象`が出るのはなぜ？[yosider.icon][takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621429308,
      "updated": 1621429934
    },
    {
      "id": "60a524dc8ee92a00007fec77",
      "text": "    む、Scrapboxで古いライブラリが使われてる可能性はありますね [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621435612,
      "updated": 1621435629
    },
    {
      "id": "60a524ed8ee92a00007fec78",
      "text": "    Helpfeelは直したはずなのだけど",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621435629,
      "updated": 1621435639
    },
    {
      "id": "60a8da341280f000006fa6f2",
      "text": "    とりあえずissue投げておきました[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621678645,
      "updated": 1621678693
    },
    {
      "id": "60a8da3d1280f000006fa6f3",
      "text": "     [/forum-jp/曖昧検索で全角文字をうまく認識できていない]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621678654,
      "updated": 1621678655
    },
    {
      "id": "60a8da3e1280f000006fa6f4",
      "text": "     [imo.icon]さんのスクショを勝手に使わせていただきました。すみませんm(_ _)m",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621678655,
      "updated": 1621678695
    },
    {
      "id": "60a90042068484000076f569",
      "text": "     \tオッケーです！[imo.icon]",
      "userId": "5ad57975d54cd50014068484",
      "created": 1621688387,
      "updated": 1621688393
    },
    {
      "id": "60a50ccae5172d0000b01aae",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621429451,
      "updated": 1621429451
    },
    {
      "id": "60a5055d1280f00000f0aae4",
      "text": " 試しに画像に出ている「印象」を8bitずつにばらしてみると……",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621427550,
      "updated": 1621427550
    },
    {
      "id": "60a500a41280f00000f0aab4",
      "text": "  `印象`→`\\u5370\\u8c61`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aab5",
      "text": "  `\\u0053\\u0070\\u008c\\u0061`→`Sp\\u008ca`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aab6",
      "text": "  うんやっぱりそうだ[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aab7",
      "text": "   入力文字列`spy`と`Sp\\u008ca`が大文字小文字無視かつ一文字間違い(`y`と`\\u008c`)で部分一致しているから、`印象`が候補に入る",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aab8",
      "text": " ふ～～む？文字コードについては全くの素人なのでまたもうちょい時間をかけて理解に努めるか[imo.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aab9",
      "text": "\t教えてくれてありがとう！",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aaba",
      "text": "  今まで文字コードは「それぞれの文字にはそれに対応する番号が割り振られているよ～」程度の認識だったので、今ちょい浅～く調べて[https://ja.wikipedia.org/wiki/Unicode一覧_0000-0FFF Unicode一覧 0000-0FFF]を眺めていたのですが、以下の認識で良いでしょうかね？[imo.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aabb",
      "text": "   一部には1つのコードに2文字以上の組み合わせが割り振られている（`U+0000:NUL`とか`U+0001:SOH`とか）",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aabc",
      "text": "    いや、これは文字ではありません。[制御文字]、エスケープシーケンスと言われるもので、文字列処理において特別な命令を指し示すものです[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aabd",
      "text": "     よく使われるものが改行文字`U+000D`や水平タブ`U+0009`でしょうか",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aabe",
      "text": "      program中の文字列内でよく`\\n`や`\\t`と表されるやつです",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aabf",
      "text": "      \tお、了解です[imo.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aac0",
      "text": "     cf. [/takker/ASCIIコード表]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aac1",
      "text": "   で、その中のひとつとして`Sp\\u008ca`がある",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aac2",
      "text": "   みたいな",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aac3",
      "text": "   \tそれでちょい気になったこととして、`u008ca`というコードが上記のUnicode一覧の中に見当たらないのですが、これってどういうコードなんでしょう？",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aac4",
      "text": "   あーごめんなさい。文字コード自体と、文字コードが表す文字とを混同してました[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aac5",
      "text": "    `\\u008c`という書き方は、JavaScriptで文字コードで文字を表現するときのやり方です。",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aac6",
      "text": "     e.g. `const str = '\\u0053'`とすると、`str==='S'`となる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aac7",
      "text": "    `Sp\\u008ca`は、文字`S`,`p`,`\\u008c`,`a`をつなげた文字列を表しているつもりでした",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aac8",
      "text": "    　`\\u008c`を文字コードで表現していたのは、該当文字が存在せず文字で表しようがなかったからです",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aac9",
      "text": "    　\tあーコードの`\\u0061`は文字の`a`としてってことですか、なるほど[imo.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aaca",
      "text": "    　\tしかしまあこんな偶然があるもんだ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aacb",
      "text": "    　\t確かに`spya`と入力しても出ますね～おもしろ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aacc",
      "text": "    　\t[https://gyazo.com/da651710b0c7d9e88cd9c05eeb2dc948]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aacd",
      "text": " 自分から話題を振っておいてなんですが、[文字コードは闇]なので、[- 余計な詮索]深入りはしないことをおすすめします……[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aace",
      "text": " 　時間がいくらあっても理解しきれません……",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aacf",
      "text": " 　\tなるほどな～ｗ[imo.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aad0",
      "text": " 面白い[yosider.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a500a41280f00000f0aad1",
      "text": " asearchは非アルファベット？に弱い？[yosider.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426340,
      "updated": 1621426340
    },
    {
      "id": "60a501b81280f00000f0aad2",
      "text": "  文字コードをビット演算するだけのシンプルな仕組みですからね[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426616,
      "updated": 1621426632
    },
    {
      "id": "60a501c81280f00000f0aad5",
      "text": "  [形態素解析]を導入すれば、ローマ字から非アルファベットを検索することも可能になるかもしれませんが、逆に検索速度が落ちてしまうでしょうね",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426632,
      "updated": 1621426694
    },
    {
      "id": "60a502928ee92a0000bec699",
      "text": " 上の方に書きましたが[* 弱くないです] [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621426835,
      "updated": 1621426853
    },
    {
      "id": "60a501b81280f00000f0aad3",
      "text": "  [昔のasearchは全角文字に弱かった#60a5022f8ee92a0000bec698]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621426616,
      "updated": 1621678287
    },
    {
      "id": "60aae5898ee92a00009b85eb",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621812618,
      "updated": 1621812618
    },
    {
      "id": "60aae58a8ee92a00009b85ec",
      "text": " [shokai.icon] がアプデしてくれた模様",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621812618,
      "updated": 1622168718
    },
    {
      "id": "60aae5938ee92a00009b85ee",
      "text": "  https://github.com/shokai/node-asearch",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621812628,
      "updated": 1621812628
    },
    {
      "id": "60aae58a8ee92a00009b85ed",
      "text": "\t\t\t仕事速い[imo.icon][yosider.icon][takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621812619,
      "updated": 1621836675
    },
    {
      "id": "60ab0e0e0684840000bd6503",
      "text": "  [https://twitter.com/shokai/status/1396761700104167425 https://gyazo.com/0d91d8ace3b2baae965d436ee5cb8044]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621822990,
      "updated": 1621869152
    },
    {
      "id": "60abc24f8ee92a00007ab72f",
      "text": "  もうspyで印象が引っかからなくなった！",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621869135,
      "updated": 1621873942
    },
    {
      "id": "60abd51b1280f00000f39e7a",
      "text": "   [https://gyazo.com/8ccd401fec19a3502a1bb886dfaef9a4]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621873949,
      "updated": 1621873952
    },
    {
      "id": "60abd51f1280f00000f39e7b",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621873952,
      "updated": 1621873952
    },
    {
      "id": "60abc24e8ee92a00007ab72e",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621869135,
      "updated": 1621869135
    }
  ]
}