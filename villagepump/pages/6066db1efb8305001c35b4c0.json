{
  "id": "6066db1efb8305001c35b4c0",
  "title": "userscriptで外部のjsを読み込",
  "created": 1617353504,
  "updated": 1633774405,
  "lines": [
    {
      "id": "6066db1efb8305001c35b4c0",
      "text": "userscriptで外部のjsを読み込",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617353504,
      "updated": 1617355251
    },
    {
      "id": "6066e2061280f00000be04ce",
      "text": "む方法",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355271,
      "updated": 1617355273
    },
    {
      "id": "6066e2041280f00000be04c8",
      "text": " 1. コピペしてコードブロックに貼り付ける",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355268,
      "updated": 1617355268
    },
    {
      "id": "6066e2041280f00000be04c9",
      "text": "  >ESModuleで使えるようにした後、minifyしてscrapboxに貼り付ければ使える",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355268,
      "updated": 1617355268
    },
    {
      "id": "6066e4181280f00000be04f0",
      "text": "  事例",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355800,
      "updated": 1617355802
    },
    {
      "id": "6066e41a1280f00000be04f1",
      "text": "   [/programming-notes/scrapbox-parser.min.js]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355802,
      "updated": 1617355818
    },
    {
      "id": "6066e4301280f0000035c4a9",
      "text": "   [/programming-notes/date-fns.min.js]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355824,
      "updated": 1617355825
    },
    {
      "id": "6066e4311280f0000035c4aa",
      "text": "   [/programming-notes/idb]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355825,
      "updated": 1617355840
    },
    {
      "id": "60b340851280f000005fd356",
      "text": "   [/programming-notes/preact@10.5.13]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1622360198,
      "updated": 1622360211
    },
    {
      "id": "60b340931280f000005fd357",
      "text": "   [/takker/prettier@2.2.1]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1622360212,
      "updated": 1622360239
    },
    {
      "id": "60b340ae1280f000005fd358",
      "text": "    あまりにもファイルサイズが巨大でコピペできなかったので、import機能経由で取り込んだ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1622360239,
      "updated": 1622360263
    },
    {
      "id": "6066e6041280f0000035c4ae",
      "text": "  ESModuleとして使えるという利点がある",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617356292,
      "updated": 1617356301
    },
    {
      "id": "6066e2041280f00000be04ca",
      "text": " 2. [cdnjs]から`<script>`経由でimportする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355268,
      "updated": 1617355268
    },
    {
      "id": "6066e2041280f00000be04cb",
      "text": "  [install-CDN]が便利です",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355268,
      "updated": 1617356285
    },
    {
      "id": "6066e2041280f00000be04cc",
      "text": "  cf. [/takker/scrapboxで外部APIを使う]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355268,
      "updated": 1617355268
    },
    {
      "id": "6066e2041280f00000be04cd",
      "text": "  元ネタ：[/ci7lus/たのしいScrapboxUserScript]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355268,
      "updated": 1617355268
    },
    {
      "id": "6066e20b1280f00000be04cf",
      "text": " 3. [scrapboxのfile upload機能]でuploadしたものを[- fetch& eval()/Function()]`import()`する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355276,
      "updated": 1617375757
    },
    {
      "id": "6066e25d1280f00000be04d1",
      "text": "  [ScrapExec]のここをみて分かった[miyamonz.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355358,
      "updated": 1617355358
    },
    {
      "id": "6066e25d1280f00000be04d2",
      "text": "   [/masui/ScrapExec#60588f9f8ee92a00002a78bc]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355358,
      "updated": 1617355358
    },
    {
      "id": "6066e25d1280f00000be04d4",
      "text": "  scrapboxのファイルアップロード機能でjsファイルをアップロードして、テキストファイルとしてfetchしてevalすれば読み込める！！",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355358,
      "updated": 1617355358
    },
    {
      "id": "6066e25d1280f00000be04d5",
      "text": "  　p5とか[prettier]とか読み込みたい[miyamonz.icon*3]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1617355358,
      "updated": 1617404146
    },
    {
      "id": "6066e25d1280f00000be04d6",
      "text": "  　　コードブロック記法でjs書いてるときってインデントとか整えられないので、勝手に整形してほしい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355358,
      "updated": 1617355358
    },
    {
      "id": "6066e25d1280f00000be04d8",
      "text": "   普通のES Modulesのファイルをimportできないのかと思ったが、無理だった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355358,
      "updated": 1617355358
    },
    {
      "id": "6066e25d1280f00000be04d9",
      "text": "   　textとしてfetchしてevalするしかなさそう[miyamonz.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355358,
      "updated": 1617355358
    },
    {
      "id": "6066e25d1280f00000be04da",
      "text": "    [- import '/files/xxxxx.js'は無理でしたか……][takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355358,
      "updated": 1617375474
    },
    {
      "id": "60672d521280f00000cc317e",
      "text": "    出来ました。エラーは出ませんでした@[/icons2/Firefox.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617374546,
      "updated": 1617385086
    },
    {
      "id": "60672fdc1280f00000cc31a1",
      "text": "     code:js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375196,
      "updated": 1617375199
    },
    {
      "id": "60672fdf1280f00000cc31a2",
      "text": "      import('/api/code/villagepump/userscriptで外部のjsを読み込/sample3.js');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375200,
      "updated": 1617375221
    },
    {
      "id": "6067301d1280f000000e5251",
      "text": "     [/miyamonz-playground/draggableなポップアップにp5埋め込む]をお借りしました",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375261,
      "updated": 1617375282
    },
    {
      "id": "60672d5a1280f00000cc317f",
      "text": "     code:sample3.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617374555,
      "updated": 1617374916
    },
    {
      "id": "60672d721280f00000cc3180",
      "text": "      import '/files/6066d758537216001c67a11b.js';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617374578,
      "updated": 1617374923
    },
    {
      "id": "60672ec81280f00000cc3181",
      "text": "      ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617374923,
      "updated": 1617374923
    },
    {
      "id": "60672ec81280f00000cc3182",
      "text": "      new p5(p => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617374923,
      "updated": 1617374931
    },
    {
      "id": "60672ecf1280f00000cc3183",
      "text": "        p.setup = () => p.createCanvas(400, 400);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617374931,
      "updated": 1617375071
    },
    {
      "id": "60672f491280f00000cc3197",
      "text": "        p.draw = () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375050,
      "updated": 1617375081
    },
    {
      "id": "60672f491280f00000cc3199",
      "text": "         if (p.mouseIsPressed) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375050,
      "updated": 1617375169
    },
    {
      "id": "60672f491280f00000cc319a",
      "text": "           p.fill(0);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375050,
      "updated": 1617375171
    },
    {
      "id": "60672f491280f00000cc319b",
      "text": "         } else {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375050,
      "updated": 1617375054
    },
    {
      "id": "60672f491280f00000cc319c",
      "text": "           p.fill(255,0,0);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375050,
      "updated": 1617375908
    },
    {
      "id": "60672f491280f00000cc319d",
      "text": "         }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375050,
      "updated": 1617375054
    },
    {
      "id": "60672f491280f00000cc319e",
      "text": "         p.ellipse(p.mouseX, p.mouseY, 80, 80);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375050,
      "updated": 1617375183
    },
    {
      "id": "60672fd31280f00000cc31a0",
      "text": "        };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375187,
      "updated": 1617375190
    },
    {
      "id": "60672f491280f00000cc319f",
      "text": "      }, 'editor');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617375050,
      "updated": 1617375409
    },
    {
      "id": "606755b7385a920000a8c864",
      "text": "     [miyamonz.icon]はできない。何の条件が違うのかが分からない…[miyamonz.icon]",
      "userId": "5953adab7aa58a0011385a92",
      "created": 1617384887,
      "updated": 1617384909
    },
    {
      "id": "606755df385a920000a8c865",
      "text": "     　[https://gyazo.com/2f1bb4f70e85c7284a28155b3f496e6d]",
      "userId": "5953adab7aa58a0011385a92",
      "created": 1617384927,
      "updated": 1617384929
    },
    {
      "id": "6067566e1280f00000e3b404",
      "text": "     どうやらFirefoxで実行した場合のみ成功するみたいです[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617385070,
      "updated": 1617385149
    },
    {
      "id": "606756bd1280f00000e3b405",
      "text": "      なぜか[CSP]制限に引っかからない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617385149,
      "updated": 1617385162
    },
    {
      "id": "60685c0a385a9200008a8003",
      "text": "      なるほど",
      "userId": "5953adab7aa58a0011385a92",
      "created": 1617452044,
      "updated": 1617452049
    },
    {
      "id": "60685c11385a9200008a8004",
      "text": "      [miyamonz.icon]はchrome",
      "userId": "5953adab7aa58a0011385a92",
      "created": 1617452051,
      "updated": 1617452054
    },
    {
      "id": "606755e1385a920000a8c866",
      "text": "",
      "userId": "5953adab7aa58a0011385a92",
      "created": 1617384929,
      "updated": 1617384929
    },
    {
      "id": "6066e25d1280f00000be04dd",
      "text": "  何も考えずにこれを実行したら動いた",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355358,
      "updated": 1617355358
    },
    {
      "id": "6066e25d1280f00000be04de",
      "text": "   [https://gyazo.com/7df16f0ecbfcf269a4b5b2f3dd596c50]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355358,
      "updated": 1617355358
    },
    {
      "id": "6066e2741280f00000be04df",
      "text": " 4. [WebAssembly]を使う",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355381,
      "updated": 1617355457
    },
    {
      "id": "6066e2b11280f00000be04e0",
      "text": "  [scrapboxのfile upload機能]にuploadしたWASMファイルを[WebAssembly.instantiateStreaming()]で読み込む",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355441,
      "updated": 1617355455
    },
    {
      "id": "614696c16668720000c39274",
      "text": " 5. [yuki_minoh.icon]の[node-bitmap-proxy]を使う（未完成）",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1632016065,
      "updated": 1633768928
    },
    {
      "id": "614696d16668720000c39275",
      "text": "  [CSPを突破するnode-bitmap-proxyの原理を説明し]ました",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1632016081,
      "updated": 1632016106
    },
    {
      "id": "616169fe6668720000fb78f1",
      "text": " 6. ブラウザ拡張機能を使う",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633774082,
      "updated": 1633774363
    },
    {
      "id": "61616b05666872000063d788",
      "text": " 　[https://chrome.google.com/webstore/detail/disable-content-security/ieelmcmcagommplceebfedjlakkhpden?hl=ja Disable Content-Security-Policy - Chrome ウェブストア]",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633774342,
      "updated": 1633774369
    },
    {
      "id": "61616b22666872000063d789",
      "text": " 　僕は試してないので自己責任でお願いします[yuki_minoh.icon]",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633774371,
      "updated": 1633774405
    },
    {
      "id": "6066e20b1280f00000be04d0",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1617355276,
      "updated": 1617355276
    }
  ]
}