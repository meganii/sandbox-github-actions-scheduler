{
  "id": "64a5158990b4fe001cab11d2",
  "title": "Tweetの画像をGyazoにuploadするUserScript",
  "created": 1688540555,
  "updated": 1689554181,
  "lines": [
    {
      "id": "64a5158990b4fe001cab11d2",
      "text": "Tweetの画像をGyazoにuploadするUserScript",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540555,
      "updated": 1688540555
    },
    {
      "id": "64a541351280f00000acc6b4",
      "text": "機能",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551734,
      "updated": 1688551734
    },
    {
      "id": "64a541351280f00000acc6b5",
      "text": " 特定のprojectをcrawlし、[pbs.twimg.com]の画像をgyazoにuploadして置き換える",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551734,
      "updated": 1688551734
    },
    {
      "id": "64a541351280f00000acc6b6",
      "text": "　yesterday?[yits-khawk'9483.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1688551734,
      "updated": 1688551734
    },
    {
      "id": "64a541351280f00000acc6b7",
      "text": "　機能=昨日[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551734,
      "updated": 1688551734
    },
    {
      "id": "64a541891280f00000997c15",
      "text": "　スクリプトを実行したprojectで貼り替えられます[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551818,
      "updated": 1688551834
    },
    {
      "id": "64a541991280f00000997c16",
      "text": "　 自分のとこで実行すれば、自分のとこにあるtwitterの画像がすべてgyazoられる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551834,
      "updated": 1688551854
    },
    {
      "id": "64a541b01280f00000997c17",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551857,
      "updated": 1688551857
    },
    {
      "id": "64a746191280f0000022a579",
      "text": "使い方",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684057,
      "updated": 1688684059
    },
    {
      "id": "64a746261280f0000022a57e",
      "text": " requirements",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684071,
      "updated": 1688684071
    },
    {
      "id": "64a746261280f0000022a57f",
      "text": "  admin以上の権限",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684071,
      "updated": 1688684071
    },
    {
      "id": "64a746261280f0000022a580",
      "text": "  [GM fetch]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684071,
      "updated": 1688684071
    },
    {
      "id": "64a7461b1280f0000022a57a",
      "text": " 1. [ここ https://scrapbox-bundler.vercel.app?url=https://scrapbox.io/api/code/villagepump/Tweetの画像をGyazoにuploadするUserScript/script.ts&bundle&minify&run&reload]を押して出てきたコードをコピーする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684059,
      "updated": 1688684092
    },
    {
      "id": "64a7463b1280f0000022a581",
      "text": " 2. gyazoに画像を移動したいprojectをブラウザで開く",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684092,
      "updated": 1688684115
    },
    {
      "id": "64a746521280f0000022a582",
      "text": " 3. 開発コンソールを開いて1.のコードを貼り付けて実行する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684115,
      "updated": 1688684131
    },
    {
      "id": "64a746621280f0000022a584",
      "text": " 4. おわり",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684131,
      "updated": 1688684136
    },
    {
      "id": "64a746181280f0000022a578",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684057,
      "updated": 1688684057
    },
    {
      "id": "64a541f71280f00000997c2d",
      "text": "井戸端には900枚くらいtwitter由来の画像があった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551928,
      "updated": 1688551938
    },
    {
      "id": "64a542011280f00000997c2e",
      "text": "　いくつかはリンク切れしてる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551938,
      "updated": 1688551943
    },
    {
      "id": "64a542051280f00000997c2f",
      "text": "とりあえずすべて自分のgyazoアカウントに取り込みます",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551943,
      "updated": 1688551955
    },
    {
      "id": "64a88a6c1280f0000011d108",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688767086,
      "updated": 1688767086
    },
    {
      "id": "64a88a6d1280f0000011d109",
      "text": "todo",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688767086,
      "updated": 1688767090
    },
    {
      "id": "64a88a711280f0000011d10a",
      "text": " 動画もアップロードする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688767090,
      "updated": 1688767103
    },
    {
      "id": "64a88a7e1280f0000011d10b",
      "text": "  できなくはないけど、容量を使い切ってしまいそう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688767103,
      "updated": 1688767128
    },
    {
      "id": "64a541f71280f00000997c2c",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551928,
      "updated": 1688551928
    },
    {
      "id": "64a745e71280f0000022a575",
      "text": "2023-07-07 07:53:48 古いページから更新するようにした",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684008,
      "updated": 1688684035
    },
    {
      "id": "64a746021280f0000022a577",
      "text": " [2023/07/06#64a675411280f000002f6943]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684035,
      "updated": 1688684050
    },
    {
      "id": "64a541d61280f00000997c1f",
      "text": "2023-07-05 18:55:48 完成した。動かしてます",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551895,
      "updated": 1688551898
    },
    {
      "id": "64a541d71280f00000997c20",
      "text": "　一時的にDate modifiedが死にますが堪忍ください",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551896,
      "updated": 1688551898
    },
    {
      "id": "64a541ef1280f00000997c2b",
      "text": " [2023/07/05#64a4ea9b71fa080000697a28]で話されているのを待たずに実行したのはちょっとまずかったかな",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551920,
      "updated": 1688551920
    },
    {
      "id": "64a541d71280f00000997c21",
      "text": "　続けてuploadしすぎたせいか、[CORSエラー]が出てしまった",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1688551896,
      "updated": 1688552004
    },
    {
      "id": "64a541d71280f00000997c22",
      "text": "　もう一回実行しよう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551896,
      "updated": 1688551898
    },
    {
      "id": "64a541d71280f00000997c23",
      "text": "　19:06:14 違う。[pbs.twimg.com]に画像でない何かが混じってる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551896,
      "updated": 1688551898
    },
    {
      "id": "64a541d71280f00000997c24",
      "text": "　リンク切れしている画像があるときにプログラムが止まってしまっていた",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551896,
      "updated": 1688551898
    },
    {
      "id": "64a541d71280f00000997c25",
      "text": "　 直す",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551896,
      "updated": 1688551898
    },
    {
      "id": "64a541b01280f00000997c18",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551857,
      "updated": 1688551857
    },
    {
      "id": "64a5158b1280f00000686e11",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540555,
      "updated": 1688540588
    },
    {
      "id": "64a516061280f00000686e3f",
      "text": "https://prfac.com/tampermonkey-twitter-images-url/",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540679,
      "updated": 1688540680
    },
    {
      "id": "64a516081280f00000686e40",
      "text": " 元画像を取り出す",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540681,
      "updated": 1688540686
    },
    {
      "id": "64a51ad71280f00000686e7c",
      "text": " これでは取り出せなかった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541912,
      "updated": 1688541919
    },
    {
      "id": "64a518441280f00000686e49",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541253,
      "updated": 1688541253
    },
    {
      "id": "64a517e81280f00000686e41",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541161,
      "updated": 1688541161
    },
    {
      "id": "64a517e81280f00000686e42",
      "text": "refererURLにtweetのURLを紐づけたいけど、方法が無いので断念する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541161,
      "updated": 1688541186
    },
    {
      "id": "64a517f81280f00000686e43",
      "text": " https://artfulplace.hatenablog.com/entry/2015/06/10/223925",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541177,
      "updated": 1688541178
    },
    {
      "id": "64a518021280f00000686e44",
      "text": " 代わりにスクボのページへのリンクをつけておく",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541187,
      "updated": 1688541198
    },
    {
      "id": "64a518771280f00000686e4e",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541304,
      "updated": 1688541306
    },
    {
      "id": "64a51b7f1280f00000686e82",
      "text": "https://scrapbox-bundler.vercel.app?url=https://scrapbox.io/api/code/villagepump/Tweetの画像をGyazoにuploadするUserScript/script.ts&bundle&minify&run&reload",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688542080,
      "updated": 1688550445
    },
    {
      "id": "64a5345d1280f00000686f76",
      "text": "$ deno check --remote -r=https://scrapbox.io https://scrapbox.io/api/code/villagepump/Tweetの画像をGyazoにuploadするUserScript/script.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688548446,
      "updated": 1688548450
    },
    {
      "id": "64a51ae81280f00000686e7e",
      "text": "code:script.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541930,
      "updated": 1688541932
    },
    {
      "id": "64a51aeb1280f00000686e7f",
      "text": " import { uploadAndReplace } from \"./replace.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541932,
      "updated": 1688542077
    },
    {
      "id": "64a52b191280f00000686eb0",
      "text": " import { upload } from \"../../takker/scrapbox-file-uploader/mod.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546074,
      "updated": 1688546086
    },
    {
      "id": "64a52bfe1280f00000686ec1",
      "text": " import { parse, Node } from \"../../takker/scrapbox-parser/mod.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546303,
      "updated": 1688546718
    },
    {
      "id": "64a52b9a1280f00000686eb9",
      "text": " import { Scrapbox } from \"../../takker/scrapbox-jp%2Ftypes/userscript.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546203,
      "updated": 1688546203
    },
    {
      "id": "64a52ba31280f00000686ebb",
      "text": " import { getPage, exportPages, patch, Socket, makeSocket, disconnect } from \"../../takker/scrapbox-userscript-std/mod.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546212,
      "updated": 1688629420
    },
    {
      "id": "64a52b9a1280f00000686eba",
      "text": " declare const scrapbox: Scrapbox;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546203,
      "updated": 1688546203
    },
    {
      "id": "64a52b6a1280f00000686eb3",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546155,
      "updated": 1688546155
    },
    {
      "id": "64a6705b1280f00000132c32",
      "text": " const getTargetedPages = async (project: string): Promise<string[]> => { ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629341
    },
    {
      "id": "64a6705b1280f00000132c33",
      "text": "   const result = await exportPages(scrapbox.Project.name, { metadata: false });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629341
    },
    {
      "id": "64a6705b1280f00000132c34",
      "text": "   if (!result.ok) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629341
    },
    {
      "id": "64a6705b1280f00000132c35",
      "text": "     alert(`${result.value.name} ${result.value.message}`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629341
    },
    {
      "id": "64a6705b1280f00000132c36",
      "text": "     throw Error(result.value.name);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629341
    },
    {
      "id": "64a6705b1280f00000132c37",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629341
    },
    {
      "id": "64a6705b1280f00000132c38",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629341
    },
    {
      "id": "64a6705b1280f00000132c39",
      "text": "   return result.value.pages.flatMap(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629521
    },
    {
      "id": "64a6705b1280f00000132c3a",
      "text": "     (page) => page.lines.some((line) => line.includes(\"pbs.twimg.com/media\")) ? [page.title] : []",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629341
    },
    {
      "id": "64a6705b1280f00000132c3b",
      "text": "   );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629341
    },
    {
      "id": "64a6705b1280f00000132c3c",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629341,
      "updated": 1688629341
    },
    {
      "id": "64a670571280f00000132c1a",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629337,
      "updated": 1688629337
    },
    {
      "id": "64a52d791280f00000686ec8",
      "text": " const main = async () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546682,
      "updated": 1688548470
    },
    {
      "id": "64a530a71280f00000686f57",
      "text": "   const project = scrapbox.Project.name;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547496,
      "updated": 1688547500
    },
    {
      "id": "64a745f31280f0000022a576",
      "text": "   // 古いページから更新する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688684019,
      "updated": 1688684027
    },
    {
      "id": "64a6706f1280f00000132c3d",
      "text": "   const list = (await getTargetedPages(project)).reverse();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629361,
      "updated": 1688684018
    },
    {
      "id": "64a670721280f00000132c3e",
      "text": "   let socket: Socket | undefined;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629364,
      "updated": 1688629376
    },
    {
      "id": "64a670841280f00000132c3f",
      "text": "   try {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629381,
      "updated": 1688629383
    },
    {
      "id": "64a52b7f1280f00000686eb6",
      "text": "     for (let i = 0; i < list.length; i++) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546176,
      "updated": 1688629390
    },
    {
      "id": "64a53e8a1280f00000997bfd",
      "text": "       const title = list[i];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551051,
      "updated": 1688629390
    },
    {
      "id": "64a52b941280f00000686eb8",
      "text": "       const result = await getPage(project, title);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546197,
      "updated": 1688629390
    },
    {
      "id": "64a52bb51280f00000686ebc",
      "text": "       if (!result.ok) continue;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546230,
      "updated": 1688629390
    },
    {
      "id": "64a530ec1280f00000686f5d",
      "text": "       ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547565,
      "updated": 1688629390
    },
    {
      "id": "64a530ed1280f00000686f5e",
      "text": "       const stack: [string, URL[]][] = [];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547566,
      "updated": 1688629390
    },
    {
      "id": "64a52bc91280f00000686ebe",
      "text": "       const blocks = parse(result.value.lines.map((line) => line.text).join(\"\\n\"), { hasTitle: true });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546249,
      "updated": 1688629390
    },
    {
      "id": "64a52c351280f00000686ec3",
      "text": "       let lineNo = 0;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546358,
      "updated": 1688629390
    },
    {
      "id": "64a53bbd1280f00000686f85",
      "text": "       let total = 0;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688550337,
      "updated": 1688629390
    },
    {
      "id": "64a52c421280f00000686ec4",
      "text": "       for (const block of blocks) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546372,
      "updated": 1688629390
    },
    {
      "id": "64a53f111280f00000997c00",
      "text": "         switch (block.type) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551186,
      "updated": 1688629390
    },
    {
      "id": "64a53f171280f00000997c01",
      "text": "           case \"title\":",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551192,
      "updated": 1688629390
    },
    {
      "id": "64a53f1e1280f00000997c03",
      "text": "             lineNo++;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551200,
      "updated": 1688629390
    },
    {
      "id": "64a53f221280f00000997c04",
      "text": "             break;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551203,
      "updated": 1688629390
    },
    {
      "id": "64a53f251280f00000997c05",
      "text": "           case \"codeBlock\":",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551207,
      "updated": 1688629390
    },
    {
      "id": "64a53f321280f00000997c06",
      "text": "             lineNo += block.content.split(\"\\n\").length + 1;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551219,
      "updated": 1688629390
    },
    {
      "id": "64a53f371280f00000997c07",
      "text": "             break;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551224,
      "updated": 1688629390
    },
    {
      "id": "64a53f411280f00000997c09",
      "text": "           case \"table\":",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551234,
      "updated": 1688629390
    },
    {
      "id": "64a53f3d1280f00000997c08",
      "text": "             lineNo += block.cells.length + 1;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551230,
      "updated": 1688629390
    },
    {
      "id": "64a53f481280f00000997c0a",
      "text": "             break;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551241,
      "updated": 1688629390
    },
    {
      "id": "64a53f4a1280f00000997c0b",
      "text": "           case \"line\": {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551243,
      "updated": 1688629390
    },
    {
      "id": "64a53f531280f00000997c0c",
      "text": "             const urls = block.nodes.flatMap((node) => getURLs(node));",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551252,
      "updated": 1688629390
    },
    {
      "id": "64a53f531280f00000997c0d",
      "text": "             if (urls.length > 0) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551252,
      "updated": 1688629390
    },
    {
      "id": "64a53f531280f00000997c0e",
      "text": "               total += urls.length;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551252,
      "updated": 1688629390
    },
    {
      "id": "64a53f531280f00000997c0f",
      "text": "               stack.push([result.value.lines[lineNo].id, urls]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551252,
      "updated": 1688629390
    },
    {
      "id": "64a53f531280f00000997c10",
      "text": "             }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551252,
      "updated": 1688629390
    },
    {
      "id": "64a53f531280f00000997c11",
      "text": "             lineNo++;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551252,
      "updated": 1688629390
    },
    {
      "id": "64a53f561280f00000997c12",
      "text": "             break;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551255,
      "updated": 1688629390
    },
    {
      "id": "64a53f5b1280f00000997c13",
      "text": "           }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551260,
      "updated": 1688629390
    },
    {
      "id": "64a53f191280f00000997c02",
      "text": "         }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551194,
      "updated": 1688629390
    },
    {
      "id": "64a52e971280f00000686f51",
      "text": "       }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546968,
      "updated": 1688629390
    },
    {
      "id": "64a53bd01280f00000686f87",
      "text": "       if (total === 0) continue;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688550353,
      "updated": 1688629390
    },
    {
      "id": "64a530e61280f00000686f5c",
      "text": "       console.debug(`[${i}/${list.length}] replace ${total} links in \"/${project}/${result.value.title}\"`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547559,
      "updated": 1688629390
    },
    {
      "id": "64a531c51280f00000686f65",
      "text": "       const pairs: [string, string][] = [];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547782,
      "updated": 1688629390
    },
    {
      "id": "64a532091280f00000686f69",
      "text": "       let counter = 0;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547850,
      "updated": 1688629390
    },
    {
      "id": "64a531531280f00000686f60",
      "text": "       for (const [hash, urls] of stack) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547668,
      "updated": 1688629390
    },
    {
      "id": "64a5317b1280f00000686f62",
      "text": "         for (const url of urls) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547708,
      "updated": 1688629390
    },
    {
      "id": "64a531811280f00000686f63",
      "text": "           const permalink = await uploadAndReplace(project, result.value.title, hash, url);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547715,
      "updated": 1688629390
    },
    {
      "id": "64a531db1280f00000686f66",
      "text": "           if (!permalink) continue;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547804,
      "updated": 1688629390
    },
    {
      "id": "64a532051280f00000686f68",
      "text": "           console.debug(`[${i}/${list.length}][${counter}/${total}] ${url} => ${permalink}`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547846,
      "updated": 1688629390
    },
    {
      "id": "64a531e31280f00000686f67",
      "text": "           pairs.push([`${url}`, permalink]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547812,
      "updated": 1688629390
    },
    {
      "id": "64a532271280f00000686f6a",
      "text": "           counter++;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547880,
      "updated": 1688629390
    },
    {
      "id": "64a531821280f00000686f64",
      "text": "         }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547715,
      "updated": 1688629390
    },
    {
      "id": "64a5316e1280f00000686f61",
      "text": "       }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547696,
      "updated": 1688629390
    },
    {
      "id": "64a53b141280f00000686f83",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688550165,
      "updated": 1688550165
    },
    {
      "id": "64a53b141280f00000686f84",
      "text": "本当は外部リンク記法内のURLのみを変換すべきだが、面倒なので文字列置換してしまう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688550165,
      "updated": 1688550203
    },
    {
      "id": "64a53b121280f00000686f82",
      "text": "code:script.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688550163,
      "updated": 1688550164
    },
    {
      "id": "64a670ba1280f00000132c44",
      "text": "       socket ??= await makeSocket();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629437,
      "updated": 1688629445
    },
    {
      "id": "64a532331280f00000686f6b",
      "text": "       await patch(project, result.value.title, (lines) => lines.map((line) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547892,
      "updated": 1688629397
    },
    {
      "id": "64a5328c1280f00000686f71",
      "text": "           let text = line.text;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547985,
      "updated": 1688629397
    },
    {
      "id": "64a532721280f00000686f6d",
      "text": "           for (const [b, a] of pairs) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547955,
      "updated": 1688629397
    },
    {
      "id": "64a5327d1280f00000686f6e",
      "text": "             text = text.replaceAll(b, a);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547967,
      "updated": 1688629397
    },
    {
      "id": "64a5327e1280f00000686f6f",
      "text": "           }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547967,
      "updated": 1688629397
    },
    {
      "id": "64a532a21280f00000686f72",
      "text": "           return text;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688548003,
      "updated": 1688629397
    },
    {
      "id": "64a532611280f00000686f6c",
      "text": "         }),",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688547939,
      "updated": 1688629430
    },
    {
      "id": "64a670b41280f00000132c43",
      "text": "         { socket }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629430,
      "updated": 1688629432
    },
    {
      "id": "64a532b11280f00000686f73",
      "text": "       );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688548018,
      "updated": 1688629397
    },
    {
      "id": "64a53aed1280f00000686f81",
      "text": "       console.debug(`[${i}/${list.length}] replaced links in \"/${project}/${result.value.title}\"`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688550126,
      "updated": 1688629397
    },
    {
      "id": "64a52b8b1280f00000686eb7",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546188,
      "updated": 1688629397
    },
    {
      "id": "64a670941280f00000132c40",
      "text": "   } finally {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629398,
      "updated": 1688629401
    },
    {
      "id": "64a670971280f00000132c41",
      "text": "     if (socket) disconnect(socket);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629401,
      "updated": 1688629412
    },
    {
      "id": "64a670981280f00000132c42",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688629402,
      "updated": 1688629402
    },
    {
      "id": "64a52b681280f00000686eb2",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546153,
      "updated": 1688546703
    },
    {
      "id": "64a51b7d1280f00000686e81",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688542078,
      "updated": 1688546089
    },
    {
      "id": "64a51ae81280f00000686e7d",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541928,
      "updated": 1688541928
    },
    {
      "id": "64a52d4b1280f00000686ec5",
      "text": "リンクがある行を抽出する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546636,
      "updated": 1688546650
    },
    {
      "id": "64a52d591280f00000686ec6",
      "text": "code:script.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546650,
      "updated": 1688550026
    },
    {
      "id": "64a52d711280f00000686ec7",
      "text": " const getURLs = (node: Node): URL[] => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546674,
      "updated": 1688546954
    },
    {
      "id": "64a52e5a1280f00000686f26",
      "text": "   switch (node.type) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546907,
      "updated": 1688546909
    },
    {
      "id": "64a52e5a1280f00000686f2a",
      "text": "     case \"decoration\":",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546907,
      "updated": 1688546916
    },
    {
      "id": "64a52e5a1280f00000686f2b",
      "text": "     case \"quote\":",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546907,
      "updated": 1688546916
    },
    {
      "id": "64a52e5a1280f00000686f2c",
      "text": "       return node.nodes.flatMap((node) => getURLs(node));",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546907,
      "updated": 1688546953
    },
    {
      "id": "64a52e6a1280f00000686f30",
      "text": "     case \"image\": {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546923,
      "updated": 1688550805
    },
    {
      "id": "64a52e741280f00000686f4c",
      "text": "       const url = new URL(node.src);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546933,
      "updated": 1688550853
    },
    {
      "id": "64a52e741280f00000686f4d",
      "text": "       if (url.hostname !== \"pbs.twimg.com\") return [];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546933,
      "updated": 1688548486
    },
    {
      "id": "64a52e741280f00000686f4e",
      "text": "       if (!url.pathname.startsWith(\"/media\")) return [];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546933,
      "updated": 1688546945
    },
    {
      "id": "64a52e741280f00000686f4f",
      "text": "       return [url];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546933,
      "updated": 1688546938
    },
    {
      "id": "64a52e6f1280f00000686f31",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546928,
      "updated": 1688546928
    },
    {
      "id": "64a52e5a1280f00000686f2d",
      "text": "     default:",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546907,
      "updated": 1688546917
    },
    {
      "id": "64a52e5a1280f00000686f2e",
      "text": "       return [];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546907,
      "updated": 1688546917
    },
    {
      "id": "64a52e5a1280f00000686f2f",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546907,
      "updated": 1688546911
    },
    {
      "id": "64a52e3a1280f00000686edf",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546876,
      "updated": 1688546960
    },
    {
      "id": "64a52daa1280f00000686ed7",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688546731,
      "updated": 1688546731
    },
    {
      "id": "64a534531280f00000686f75",
      "text": " await main();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688548436,
      "updated": 1688548440
    },
    {
      "id": "64a518771280f00000686e4d",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541304,
      "updated": 1688541304
    },
    {
      "id": "64a515a31280f00000686e13",
      "text": "code:replace.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540580,
      "updated": 1688540585
    },
    {
      "id": "64a515a81280f00000686e15",
      "text": " import { upload } from \"../../takker/deno-gyazo/mod.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688540585
    },
    {
      "id": "64a515a91280f00000686e16",
      "text": " import { getGyazoToken } from \"../../takker/scrapbox-userscript-std/rest.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688540585
    },
    {
      "id": "64a518fe1280f00000686e7a",
      "text": " import { encodeTitleURI } from \"../../takker/scrapbox-userscript-std/text.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541439,
      "updated": 1688548512
    },
    {
      "id": "64a515a91280f00000686e17",
      "text": " declare const GM_fetch: typeof fetch;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688540585
    },
    {
      "id": "64a515a91280f00000686e18",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688540585
    },
    {
      "id": "64a515a91280f00000686e19",
      "text": " let token = \"\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688540585
    },
    {
      "id": "64a515a91280f00000686e1a",
      "text": " let checked = false;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688540585
    },
    {
      "id": "64a515a91280f00000686e1b",
      "text": " export const uploadAndReplace = async (project: string, title: string, lineId: string, url: URL): Promise<string | undefined> => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688549959
    },
    {
      "id": "64a515a91280f00000686e1c",
      "text": "   if (url.hostname !== \"pbs.twimg.com\") return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688549975
    },
    {
      "id": "64a515a91280f00000686e1d",
      "text": "   if (!url.pathname.startsWith(\"/media\")) return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688549977
    },
    {
      "id": "64a518b91280f00000686e50",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541370,
      "updated": 1688541370
    },
    {
      "id": "64a515a91280f00000686e22",
      "text": "   if (!checked) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e23",
      "text": "     const result = await getGyazoToken();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a678611280f00000132c4f",
      "text": "     checked = true;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688631394,
      "updated": 1688631395
    },
    {
      "id": "64a515a91280f00000686e24",
      "text": "     if (!result.ok) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e25",
      "text": "       alert(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e26",
      "text": "         \"You haven't logged in Gyazo yet, so you can only upload images to scrapbox.io.\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e27",
      "text": "       );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e29",
      "text": "       return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688549984
    },
    {
      "id": "64a515a91280f00000686e2a",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e2b",
      "text": "     token = result.value || \"\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e2c",
      "text": "     if (!token) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e2d",
      "text": "       alert(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e2e",
      "text": "         \"You haven't connect Gyazo to scrapbox.io yet.\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e2f",
      "text": "       );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e31",
      "text": "       return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688549987
    },
    {
      "id": "64a515a91280f00000686e32",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541375
    },
    {
      "id": "64a515a91280f00000686e33",
      "text": "   } else if (!token) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688631382
    },
    {
      "id": "64a678541280f00000132c4a",
      "text": "     return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688631382,
      "updated": 1688631384
    },
    {
      "id": "64a678561280f00000132c4b",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688631384,
      "updated": 1688631385
    },
    {
      "id": "64a518d41280f00000686e79",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541397,
      "updated": 1688541397
    },
    {
      "id": "64a518d21280f00000686e77",
      "text": "   const res = await GM_fetch(url);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541394,
      "updated": 1688541394
    },
    {
      "id": "64a541141280f00000997c14",
      "text": "   if (!res.ok) return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688551702,
      "updated": 1688551708
    },
    {
      "id": "64a515a91280f00000686e34",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688540585
    },
    {
      "id": "64a515a91280f00000686e35",
      "text": "   const result = await upload(await res.blob(), {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541409
    },
    {
      "id": "64a515a91280f00000686e36",
      "text": "     accessToken: token,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541409
    },
    {
      "id": "64a515a91280f00000686e37",
      "text": "     // 本当は元tweetのURLにしたい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541464
    },
    {
      "id": "64a515a91280f00000686e38",
      "text": "     refererURL: `https://scrapbox.io/${project}/${encodeTitleURI(title)}#${lineId}`,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541501
    },
    {
      "id": "64a515a91280f00000686e39",
      "text": "   });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541409
    },
    {
      "id": "64a515a91280f00000686e3a",
      "text": "   if (!result.ok) throw Error(result.value.name);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541507
    },
    {
      "id": "64a519461280f00000686e7b",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688541511,
      "updated": 1688541511
    },
    {
      "id": "64a515a91280f00000686e3b",
      "text": "   return result.value.permalink_url;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688541507
    },
    {
      "id": "64a515a91280f00000686e3d",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688540585
    },
    {
      "id": "64a515a91280f00000686e3e",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540585,
      "updated": 1688540585
    },
    {
      "id": "64a515a41280f00000686e14",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1688540580,
      "updated": 1688540580
    },
    {
      "id": "64b48cb51280f0000028d1ca",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554103,
      "updated": 1689554103
    },
    {
      "id": "64b48cb51280f0000028d1cb",
      "text": "テスト：video URLを取得する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554103,
      "updated": 1689554113
    },
    {
      "id": "64b48cf61280f0000028d1e0",
      "text": " 2023-07-17 09:36:08 時点で動画を含むページは57 pagesあった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554168,
      "updated": 1689554181
    },
    {
      "id": "64b48cc01280f0000028d1cd",
      "text": "https://scrapbox-bundler.vercel.app?url=https://scrapbox.io/api/code/villagepump/Tweetの画像をGyazoにuploadするUserScript/list.ts&bundle&minify&run",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1ce",
      "text": "$ deno check --remote -r=https://scrapbox.io https://scrapbox.io/api/code/villagepump/Tweetの画像をGyazoにuploadするUserScript/list.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1cf",
      "text": "code:list.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1d0",
      "text": " import { exportPages } from \"../../takker/scrapbox-userscript-std/rest.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1d1",
      "text": " import { Scrapbox } from \"../../takker/scrapbox-jp%2Ftypes/userscript.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1d2",
      "text": " declare const scrapbox: Scrapbox;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1d3",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1d4",
      "text": " const result = await exportPages(scrapbox.Project.name, { metadata: false });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1d5",
      "text": " if (!result.ok) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1d6",
      "text": "   alert(`${result.value.name} ${result.value.message}`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1d7",
      "text": " } else {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1d8",
      "text": "   const titles = result.value.pages.flatMap(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1d9",
      "text": "     (page) => page.lines.some((line) => line.includes(\"video.twimg.com\")) ? [page.title] : []",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554126
    },
    {
      "id": "64b48cc01280f0000028d1da",
      "text": "   );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1db",
      "text": "   const blob = new Blob([JSON.stringify(titles)], { type: \"application/json\" });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1dc",
      "text": "   const url = URL.createObjectURL(blob);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1dd",
      "text": "   open(url);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1de",
      "text": " }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cc01280f0000028d1df",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554113,
      "updated": 1689554113
    },
    {
      "id": "64b48cb71280f0000028d1cc",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1689554105,
      "updated": 1689554105
    }
  ]
}