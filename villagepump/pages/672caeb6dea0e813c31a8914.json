{
  "id": "672caeb6dea0e813c31a8914",
  "title": "b1c6765e-e467-41bf-b501-2b919f823e33",
  "created": 1730981559,
  "updated": 1730984794,
  "lines": [
    {
      "id": "672caeb6dea0e813c31a8914",
      "text": "b1c6765e-e467-41bf-b501-2b919f823e33",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730981559,
      "updated": 1730981559
    },
    {
      "id": "672caeb671b3c2000044f474",
      "text": "code:scrapCrawler.ts",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730981559,
      "updated": 1730981568
    },
    {
      "id": "672caebf71b3c2000044f476",
      "text": "\tconst projectName: string = Deno.args[0];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730981568,
      "updated": 1730984526
    },
    {
      "id": "672cb4f871b3c20000048740",
      "text": " const queue: string[] = [",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048741",
      "text": "   Deno.args[1],",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730984532
    },
    {
      "id": "672cb4f871b3c20000048742",
      "text": " ];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048743",
      "text": " const marked: string[] = [];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048744",
      "text": " interface ScrapboxPage {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048745",
      "text": "   title: string;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048746",
      "text": "   links: string[];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048747",
      "text": "   relatedPages: { links1hop: Array<{ title: string }> };",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048748",
      "text": " }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048749",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004874a",
      "text": " async function sigIntHandler() {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004874b",
      "text": "   console.log(\"SIGINT received\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004874c",
      "text": "   await Deno.writeTextFile(\"result.json\", JSON.stringify(marked));",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004874d",
      "text": "   Deno.exit();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004874e",
      "text": " }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004874f",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048750",
      "text": " Deno.addSignalListener(\"SIGINT\", sigIntHandler);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048751",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048752",
      "text": " const sleep = (time: number) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048753",
      "text": "   return new Promise((resolve) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048754",
      "text": "     setTimeout(resolve, time);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048755",
      "text": "   });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048756",
      "text": " };",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048757",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048758",
      "text": " const elemview = (",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048759",
      "text": "   argarr: string[],",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004875a",
      "text": "   headortail?: \"head\" | \"tail\" | undefined",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004875b",
      "text": " ) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004875c",
      "text": "   if (argarr.length > 7) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004875d",
      "text": "     if (headortail == \"head\") {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004875e",
      "text": "       for (const elem of argarr.slice(0, 7)) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004875f",
      "text": "         console.log(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048760",
      "text": "           \"  \" + elem",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048761",
      "text": "         );",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048762",
      "text": "       }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048763",
      "text": "     }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048764",
      "text": "   } else {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048765",
      "text": "     for (const elem of argarr) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048766",
      "text": "       console.log(\"  \" + elem);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048767",
      "text": "     }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048768",
      "text": "     for (const _ of Array(7 - argarr.length)) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048769",
      "text": "       console.log(\"\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004876a",
      "text": "     }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004876b",
      "text": "   }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004876c",
      "text": " };",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004876d",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004876e",
      "text": " while (queue.length > 0) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004876f",
      "text": "   const pageName: string | undefined = queue.shift();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048770",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048771",
      "text": "   if (pageName == undefined) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048772",
      "text": "     break;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048773",
      "text": "   }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048774",
      "text": "   console.clear();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048775",
      "text": "   console.log(\"marked(\" + marked.length + \")\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048776",
      "text": "   console.log(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048777",
      "text": "     \"=>\" + pageName",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048778",
      "text": "   );",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048779",
      "text": "   elemview(queue, \"head\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004877a",
      "text": "   console.log(\"queue(\" + queue.length + \")\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004877b",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004877c",
      "text": "   const pageRes = await fetch(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004877d",
      "text": "     \"https://scrapbox.io/api/pages/\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004877e",
      "text": "       projectName +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004877f",
      "text": "       \"/\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048780",
      "text": "       encodeURIComponent(pageName)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048781",
      "text": "   );",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048782",
      "text": "   if (pageRes.ok) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048783",
      "text": "     const pageJson: Readonly<ScrapboxPage> = await pageRes.json();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048784",
      "text": "     marked.push(pageJson.title);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048785",
      "text": "     for (const element of pageJson.relatedPages.links1hop) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048786",
      "text": "       if (",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048787",
      "text": "         !marked.includes(element.title) && !queue.includes(element.title)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048788",
      "text": "       ) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c20000048789",
      "text": "         queue.push(element.title);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004878a",
      "text": "       }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004878b",
      "text": "     }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004878c",
      "text": "   }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cb4f871b3c2000004878d",
      "text": " }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    },
    {
      "id": "672cbb5971b3c20000ffc68b",
      "text": " await Deno.writeTextFile(\"result.json\", JSON.stringify(marked));",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730984793,
      "updated": 1730984794
    },
    {
      "id": "672cb4f871b3c2000004878e",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1730983160,
      "updated": 1730983160
    }
  ]
}