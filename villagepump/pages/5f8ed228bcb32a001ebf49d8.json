{
  "id": "5f8ed228bcb32a001ebf49d8",
  "title": "GephiでScrapboxのリンク構造を観察する",
  "created": 1603195436,
  "updated": 1621268064,
  "lines": [
    {
      "id": "5f8ed228bcb32a001ebf49d8",
      "text": "GephiでScrapboxのリンク構造を観察する",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195436,
      "updated": 1603195446
    },
    {
      "id": "5f8ed245dd59fe00003b688a",
      "text": "[Scrapboxのリンク構造を俯瞰したい]",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195534,
      "updated": 1603195538
    },
    {
      "id": "5f8ed2c1dd59fe00003b688b",
      "text": "グラフ可視化ツール[Gephi]を使ってみる",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195658,
      "updated": 1603195668
    },
    {
      "id": "5f8ed1eddd59fe00003b685b",
      "text": " 俯瞰ができる訳じゃないけど、色々な表示・配置方法を試したりできて面白いかも",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195446,
      "updated": 1603195783
    },
    {
      "id": "5f8fad13dd59fe0000d8bfda",
      "text": "  グラフを見ながら，フィルタを適用→レイアウトアルゴリズムを適用→ノードの間隔を開ける→ラベルが重ならないように動かす，みたいなのを試行錯誤できる",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603251477,
      "updated": 1603251771
    },
    {
      "id": "5f8ef4e2dd59fe000008f139",
      "text": " うーん、バグが多いし開発も止まってるので微妙な気がしてきた",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603204395,
      "updated": 1603204625
    },
    {
      "id": "5f8ed1fedd59fe00003b685d",
      "text": "",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195463,
      "updated": 1603195463
    },
    {
      "id": "5f8ed2d9dd59fe00003b688d",
      "text": "[https://gyazo.com/6aa466fea4edc7dd80a0b539023afaa3]",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195682,
      "updated": 1603251466
    },
    {
      "id": "5f8ed2d8dd59fe00003b688c",
      "text": "",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195681,
      "updated": 1603195681
    },
    {
      "id": "5f8ee419dd59fe000008f134",
      "text": "Degree Rangeフィルタとかを掛けると結構いい感じに骨組みが見える",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603200097,
      "updated": 1603200123
    },
    {
      "id": "5f8ee417dd59fe000008f133",
      "text": "[https://gyazo.com/cc095dd5bec41f7be35796317407deb1]",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603200096,
      "updated": 1603200102
    },
    {
      "id": "5f8fad56dd59fe0000d8bfdb",
      "text": " 表示する情報量を人間が把握できる程度まで自動的に削減するような仕組み・UIが作れれば構造を俯瞰するツールができるかも",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603251544,
      "updated": 1603251626
    },
    {
      "id": "60a296528ee92a00005fa060",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621268050,
      "updated": 1621268050
    },
    {
      "id": "60a296528ee92a00005fa061",
      "text": " 面白いですが、なんか役にたったことあります? [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621268050,
      "updated": 1621268064
    },
    {
      "id": "5f8ee41ddd59fe000008f135",
      "text": "",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603200102,
      "updated": 1603200102
    },
    {
      "id": "5f8ed20edd59fe00003b6889",
      "text": "↓これをコンソールで実行すると.gexfファイルができる",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195479,
      "updated": 1603195496
    },
    {
      "id": "5f8ed1fedd59fe00003b685e",
      "text": "code:gexf.js",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195463,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20add59fe00003b685f",
      "text": " (async () => {",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6860",
      "text": " \tconst pages = [];",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6861",
      "text": " \tlet followingId = null;",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6862",
      "text": " \tdo {",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6863",
      "text": " \t\tconst param = followingId === null ? '' : `?followingId=${followingId}`;",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6864",
      "text": " \t\tconst res = await fetch(",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6865",
      "text": " \t\t\t`https://scrapbox.io/api/pages/${scrapbox.Project.name}/search/titles${param}`",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6866",
      "text": " \t\t);",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6867",
      "text": " \t\tfollowingId = res.headers.get('X-Following-Id');",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6868",
      "text": " \t\tpages.push(...(await res.json()));",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6869",
      "text": " \t} while (followingId);",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b686a",
      "text": " ",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b686b",
      "text": " \tconst pageId = Object.fromEntries(pages.map((p, i) => [p.title, i]));",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b686c",
      "text": " \tconst edges = [];",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b686d",
      "text": " \tfor (const p of pages) {",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b686e",
      "text": " \t\tfor (const l of p.links) {",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b686f",
      "text": " \t\t\tif (pageId[l] === undefined) {",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6870",
      "text": " \t\t\t\tpageId[l] = Object.keys(pageId).length;",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6871",
      "text": " \t\t\t}",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6872",
      "text": " \t\t\tedges.push(`<edge id=\"${edges.length}\" source=\"${pageId[p.title]}\" target=\"${pageId[l]}\"/>`);",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6873",
      "text": " \t\t}",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6874",
      "text": " \t}",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6875",
      "text": " \tconst escape = s => s.replace(/\"/g, '&quot;').replace(/&/g, '&amp;');",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603202325
    },
    {
      "id": "5f8eecc3dd59fe000008f138",
      "text": " \tconst nodes = Object.entries(pageId).map(([t, i]) => `<node id=\"${i}\" label=\"${escape(t)}\"/>`);",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603202316,
      "updated": 1603202324
    },
    {
      "id": "5f8ed20bdd59fe00003b6876",
      "text": " \tconst xml = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6877",
      "text": " <gexf xmlns=\"http://www.gexf.net/1.2draft\"",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6878",
      "text": " \txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6879",
      "text": " \txsi:schemaLocation=\"http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd\"",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b687a",
      "text": " \tversion=\"1.2\">",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b687b",
      "text": " \t<graph defaultedgetype=\"directed\">",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b687c",
      "text": " \t\t<nodes>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b687d",
      "text": " \t\t\t${nodes.join('\\n')}",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b687e",
      "text": " \t\t</nodes>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b687f",
      "text": " \t\t<edges>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6880",
      "text": " \t\t\t${edges.join('\\n')}",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6881",
      "text": " \t\t</edges>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6882",
      "text": " \t</graph>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6883",
      "text": " </gexf>`;",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6884",
      "text": " \t",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6885",
      "text": " \tconst uri = 'data:application/x-octet-stream;,' + window.encodeURIComponent(xml);",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6886",
      "text": " \t$(`<a href=\"${uri}\" download=\"${scrapbox.Project.name}.gexf\"/>`)[0].click();",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6887",
      "text": " })();",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed20bdd59fe00003b6888",
      "text": " ",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195475,
      "updated": 1603195475
    },
    {
      "id": "5f8ed1eedd59fe00003b685c",
      "text": "",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1603195447,
      "updated": 1603195447
    }
  ]
}