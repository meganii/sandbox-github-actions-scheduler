{
  "id": "60c32ae3093fa9001fc81e4c",
  "title": "Scrapboxのページ遷移を検出",
  "created": 1623403236,
  "updated": 1631580434,
  "lines": [
    {
      "id": "60c32ae3093fa9001fc81e4c",
      "text": "Scrapboxのページ遷移を検出",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403236,
      "updated": 1623403236
    },
    {
      "id": "60c32ae4e5172d00008bdd30",
      "text": "[UserScript Event]の`page:changed`を監視すれば[ページ遷移]を検出できる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1623403236,
      "updated": 1631580417
    },
    {
      "id": "613ff0df1280f0000070ffd9",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1631580384,
      "updated": 1631580384
    },
    {
      "id": "613ff1011280f0000070ffdd",
      "text": "以下、[UserScript Event]が存在しなかった頃の情報",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1631580418,
      "updated": 1631580434
    },
    {
      "id": "613ff0d71280f0000070ffd8",
      "text": "[/icons/hr.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1631580375,
      "updated": 1631580383
    },
    {
      "id": "613ff0e11280f0000070ffdc",
      "text": "from [2021/04/21]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1631580385,
      "updated": 1631580385
    },
    {
      "id": "60c32ae4e5172d00008bdd31",
      "text": "Scrapbox内でページ遷移のたびに処理をするUserScriptを書くには、`window.addEventListener('load', ...)`でいいんでしょうか[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403236,
      "updated": 1623403251
    },
    {
      "id": "60c32ae4e5172d00008bdd32",
      "text": "　なんか発火してくれない…",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403236,
      "updated": 1623403251
    },
    {
      "id": "60c32ae4e5172d00008bdd33",
      "text": "　[SPA]だとその類のeventをページ遷移検知に使うことは出来ません",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403236,
      "updated": 1623403251
    },
    {
      "id": "60c32ae4e5172d00008bdd34",
      "text": "　 [/takker/SPAのページ遷移を外部のscriptから検知する方法]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403236,
      "updated": 1623403251
    },
    {
      "id": "60c32ae4e5172d00008bdd35",
      "text": "　自分が現時点でページ遷移に使っている方法は`<title>`の変更監視です[takker.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403236,
      "updated": 1623403251
    },
    {
      "id": "60c32ae4e5172d00008bdd36",
      "text": "　 [/programming-notes/scrapbox-text-bubble-2#607532b31280f00000058d5f]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403236,
      "updated": 1623403251
    },
    {
      "id": "60c32ae4e5172d00008bdd37",
      "text": "　 ありがとうございます、[/icons/なるほど.icon*2][yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403236,
      "updated": 1623403251
    },
    {
      "id": "60c32ae4e5172d00008bdd38",
      "text": "　確実な方法を見つけました[takker.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403236,
      "updated": 1623403251
    },
    {
      "id": "60c32ae4e5172d00008bdd39",
      "text": "　 [/takker/scrapboxのページ遷移を検出]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403236,
      "updated": 1623403251
    },
    {
      "id": "60c32aede5172d00008bdd3a",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403246,
      "updated": 1623403247
    },
    {
      "id": "60c32bc3e5172d0000a3a14d",
      "text": "example",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403460,
      "updated": 1623403462
    },
    {
      "id": "60c32bcee5172d0000a3a157",
      "text": " from [/kembo/Scrapbox の UserScript でページ遷移をキャッチする方法]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403472,
      "updated": 1623403472
    },
    {
      "id": "60c32bc6e5172d0000a3a14f",
      "text": "code:javascript",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403462,
      "updated": 1623403462
    },
    {
      "id": "60c32bc6e5172d0000a3a150",
      "text": " const target = document.getElementsByClassName(\"page-wrapper\")[0];",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403462,
      "updated": 1623403462
    },
    {
      "id": "60c32bc6e5172d0000a3a151",
      "text": " const observer = new MutationObserver((recs) => {",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403462,
      "updated": 1623403462
    },
    {
      "id": "60c32bc6e5172d0000a3a152",
      "text": " \tif (!recs[0].target.classList.contains(\"enter\")) {",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403462,
      "updated": 1623403462
    },
    {
      "id": "60c32bc6e5172d0000a3a153",
      "text": " \t\tconsole.log(\"ページ遷移完了\");",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403462,
      "updated": 1623403462
    },
    {
      "id": "60c32bc6e5172d0000a3a154",
      "text": " \t}",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403462,
      "updated": 1623403462
    },
    {
      "id": "60c32bc6e5172d0000a3a155",
      "text": " });",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403462,
      "updated": 1623403462
    },
    {
      "id": "60c32bc6e5172d0000a3a156",
      "text": " observer.observe(target, {attributes: true, attributeFilter: [\"class\"]});",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403462,
      "updated": 1623403462
    },
    {
      "id": "60c32bc4e5172d0000a3a14e",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1623403460,
      "updated": 1623403460
    }
  ]
}