{
  "id": "5fcb36f6d830010021f3846e",
  "title": "即席debug",
  "created": 1607153399,
  "updated": 1617797931,
  "lines": [
    {
      "id": "5fcb36f6d830010021f3846e",
      "text": "即席debug",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153399,
      "updated": 1607153402
    },
    {
      "id": "5fcb36fa1280f000002b9122",
      "text": "怪しそうなところに[コンソール出力関数]を挟んで値を見るという一番シンプルなやり方",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153402,
      "updated": 1607153478
    },
    {
      "id": "5fcb37041280f000002b9124",
      "text": "　タイトルは仮の名前。実際に命名されているのかどうかは知らない[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153413,
      "updated": 1607153445
    },
    {
      "id": "5fcb372b1280f000002b9127",
      "text": " 正式な名前は私[suto3.icon]も知らない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153451,
      "updated": 1607155229
    },
    {
      "id": "5fcb3e235b98c20000524646",
      "text": " 　[print debug] とか printf debug と言います",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1607155236,
      "updated": 1617738406
    },
    {
      "id": "5fcb3e525b98c20000524647",
      "text": " 　debug write というときもあります",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607155282,
      "updated": 1607155308
    },
    {
      "id": "5fcb3ef75b98c20000524648",
      "text": " 　snapshot というときもあります",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607155448,
      "updated": 1607155459
    },
    {
      "id": "606cbaa7e5172d00002e4d0a",
      "text": " よくやる[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1617738407,
      "updated": 1617738413
    },
    {
      "id": "606da31479d3a90000224f85",
      "text": " console.logと打つのだるいので`c=console.log`して`c(var1)`とかする[sta.icon]",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1617797910,
      "updated": 1617797931
    },
    {
      "id": "5fcb3dfd5b98c20000524645",
      "text": "#デバッグ",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1607155197,
      "updated": 1617738455
    },
    {
      "id": "606cbad8e5172d00002e4d0b",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1617738456,
      "updated": 1617738456
    },
    {
      "id": "5fcb381e1280f000002b9179",
      "text": "やり方",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153695,
      "updated": 1607153702
    },
    {
      "id": "5fcb38261280f000002b917a",
      "text": "\t変数を調べたい箇所に[コンソール出力関数]を挿入し、調べたい変数を渡す",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153702,
      "updated": 1607153769
    },
    {
      "id": "5fcb38691280f000002b917b",
      "text": "\t実行して、値が出力されるか見る",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153770,
      "updated": 1607153787
    },
    {
      "id": "5fcb387a1280f000002b917c",
      "text": "\t　もし何も出力されなかったら、その行が実行されていないと分かる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153787,
      "updated": 1607153809
    },
    {
      "id": "5fcb38901280f000002b917d",
      "text": "\t　　その行を含むblockが飛ばされている、その行を含む関数が実行されていない等いろいろ考えられる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153809,
      "updated": 1607153887
    },
    {
      "id": "5fcb38de1280f000002b917e",
      "text": "\t　出力されたら、その行が実行されているということが分かる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153887,
      "updated": 1607153910
    },
    {
      "id": "5fcb38f61280f000002b917f",
      "text": "\t　　あとは出力された値が期待通りのものか確かめる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153910,
      "updated": 1607153934
    },
    {
      "id": "5fcb390f1280f000002b9180",
      "text": "この方法をより簡単に行う仕組みが[break point]である。",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153936,
      "updated": 1607153959
    },
    {
      "id": "5fcb38131280f000002b9177",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153683,
      "updated": 1607153683
    },
    {
      "id": "5fcb37041280f000002b9123",
      "text": "[pin-diary]を題材に解説してみる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153413,
      "updated": 1607153507
    },
    {
      "id": "5fcb378c1280f000002b9172",
      "text": " [コンソール出力関数]として、`console.log`を使用する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153549,
      "updated": 1607153575
    },
    {
      "id": "5fcb38151280f000002b9178",
      "text": " 書式",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153685,
      "updated": 1607153971
    },
    {
      "id": "5fcb39331280f000002b9181",
      "text": " \t← : `console.log`を挿入する位置",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153971,
      "updated": 1607154038
    },
    {
      "id": "5fcb37621280f000002b9129",
      "text": " code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153507,
      "updated": 1607153510
    },
    {
      "id": "5fcb37661280f000002b912a",
      "text": "  const targetProject = 'villagepump';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153510,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b912b",
      "text": "  ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb377b1280f000002b9171",
      "text": " ←`console.log('The script is loaded');`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153532,
      "updated": 1607154059
    },
    {
      "id": "5fcb398b1280f000002b9186",
      "text": "  `'The script is loaded'`と出力されたら、少なくとも`user.js`が読み込まれている",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607154060,
      "updated": 1607154093
    },
    {
      "id": "5fcb37781280f000002b9170",
      "text": " code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153528,
      "updated": 1607153530
    },
    {
      "id": "5fcb37671280f000002b912c",
      "text": "  const handlePageChange = callback => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b912d",
      "text": "    callback()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b912e",
      "text": "    let path = null",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b912f",
      "text": "    const handleObserve = (mutations) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9130",
      "text": "        // 全部実行する必要はないので、１個だけ取り出す",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9131",
      "text": "        if (scrapbox.Project.name !== targetProject)  return",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9132",
      "text": "        ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9133",
      "text": "        // URLが変わったときだけ実行する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9134",
      "text": "        if (location.pathname !== path) callback()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9135",
      "text": "        ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9136",
      "text": "        path = location.pathname",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9137",
      "text": "    }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9138",
      "text": "    const observer1 = new MutationObserver(handleObserve);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9139",
      "text": "  ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b913a",
      "text": "    observer1.observe(document.querySelector('title'), { childList: true })",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b913b",
      "text": "  }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b913c",
      "text": "  ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b913d",
      "text": "  const $ = (query, parent = document) => parent.querySelector(query)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b913e",
      "text": "  const $$ = query => [...document.querySelectorAll(query)]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b913f",
      "text": "  const zero = n => String(n).padStart(2, '0');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9140",
      "text": "  const timestamp = date => `${date.getFullYear()}/${zero(date.getMonth() + 1)}/${zero(date.getDate())}`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9141",
      "text": "  ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9142",
      "text": "  const today = timestamp(new Date());",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9143",
      "text": "  const path = `/${targetProject}/${encodeURIComponent(today)}`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9144",
      "text": "  ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9145",
      "text": "  handlePageChange(() => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9146",
      "text": "    // トップページ以外では実行しない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9147",
      "text": "    if (location.pathname.slice(1, -1) !== targetProject) return",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9148",
      "text": "  ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb39e11280f000002b9188",
      "text": " 以下に埋め込まれている`console.log`は、値を確かめる目的で挿入されている",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607154146,
      "updated": 1607154184
    },
    {
      "id": "5fcb39de1280f000002b9187",
      "text": " code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607154143,
      "updated": 1607154144
    },
    {
      "id": "5fcb37671280f000002b9149",
      "text": "    const pinCards = $$('.page-list-item.grid-style-item.pin')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b914a",
      "text": "    const [actualLastPin, lastPin] = pinCards.slice(pinCards.length - 2)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b914b",
      "text": "    console.log('lastPin: %o',lastPin)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b914c",
      "text": "    // 日付ページを移動する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b914d",
      "text": "    const diary = $(`.page-list-item a[href=\"${path}\"]`)?.parentNode",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb3ad01280f000002b918d",
      "text": " [即席debug#5fcb37671280f000002b914d]で`diary`に代入したものを確認している",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607154385,
      "updated": 1607154412
    },
    {
      "id": "5fcb3aeb1280f000002b918e",
      "text": " 　もし`null`だったら日付ページが見つからなかったということ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607154412,
      "updated": 1607154436
    },
    {
      "id": "5fcb3ac71280f000002b918c",
      "text": " code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607154376,
      "updated": 1607154383
    },
    {
      "id": "5fcb37671280f000002b914e",
      "text": "    console.log('The diary page card: %o',diary)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b914f",
      "text": "    // pinの最後が日付ページだったらつけ直す",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9150",
      "text": "    if (lastPin === diary) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9151",
      "text": "      console.log('The diary page card is already pinned.');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9152",
      "text": "      console.log('actualLastPin: %o',actualLastPin)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9153",
      "text": "      actualLastPin?.after(lastPin);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9154",
      "text": "      console.log('Finish pinning the today\\'s diary page.')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9155",
      "text": "      return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9156",
      "text": "    }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9157",
      "text": "    if (diary) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9158",
      "text": "      diary.classList.add('pin');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9159",
      "text": "      // pinを作る",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b915a",
      "text": "      const pinMark = document.createElement('div');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b915b",
      "text": "      pinMark.classList.add('pin');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b915c",
      "text": "      $('.hover', diary).after(pinMark)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b915d",
      "text": "      lastPin?.after(diary)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b915e",
      "text": "    } else {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb3a4a1280f000002b9189",
      "text": " code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607154251,
      "updated": 1607154253
    },
    {
      "id": "5fcb37671280f000002b915f",
      "text": "      console.log('No diary page card found. Creating it....')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9160",
      "text": "      lastPin?.insertAdjacentHTML('afterend', `",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9161",
      "text": "        <li class=\"page-list-item grid-style-item pin\" style=\"opacity: 0.7;\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9162",
      "text": "          <a href=\"${path}\" rel=\"route\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9163",
      "text": "            <div class=\"hover\"></div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9164",
      "text": "            <div class=\"pin\"></div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9165",
      "text": "            <div class=\"content\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9166",
      "text": "              <div class=\"header\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9167",
      "text": "                <div class=\"title\">${today}</div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9168",
      "text": "              </div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b9169",
      "text": "              <div class=\"description\"></div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b916a",
      "text": "            </div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b916b",
      "text": "          </a>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b916c",
      "text": "        </li>`)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b916d",
      "text": "    }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b916e",
      "text": "    console.log('Finish pinning the today\\'s diary page.')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37671280f000002b916f",
      "text": "  });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153511,
      "updated": 1607153511
    },
    {
      "id": "5fcb37591280f000002b9128",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607153498,
      "updated": 1607153498
    }
  ]
}