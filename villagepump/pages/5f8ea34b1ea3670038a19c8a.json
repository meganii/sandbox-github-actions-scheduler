{
  "id": "5f8ea34b1ea3670038a19c8a",
  "title": "各projectの被リンク数histogram",
  "created": 1603183438,
  "updated": 1612529752,
  "lines": [
    {
      "id": "5f8ea34b1ea3670038a19c8a",
      "text": "各projectの被リンク数histogram",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183438,
      "updated": 1603183823
    },
    {
      "id": "5f8ea3f51280f0000095477d",
      "text": "[/villagepump] & [/suto3]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183605,
      "updated": 1603183628
    },
    {
      "id": "5f8ea36b1280f0000095472f",
      "text": "[| [https://gyazo.com/353f1d797d24876da3c89a49d1cbb0d5][https://gyazo.com/159dcfb1f171df874adba12dce6b3e58]]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183467,
      "updated": 1603183545
    },
    {
      "id": "5f8ea4101280f0000095477e",
      "text": "[/motoso] & [/nishio]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183632,
      "updated": 1603183640
    },
    {
      "id": "5f8ea3d01280f00000954778",
      "text": "[| [https://gyazo.com/edcbc6ffc99589a41a0ffce645b47844][https://gyazo.com/c849d02bd6476f6c3cdc283037633a83]]    ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183569,
      "updated": 1603183645
    },
    {
      "id": "5f8ea41e1280f00000954780",
      "text": "[/rashitamemo]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183646,
      "updated": 1603183652
    },
    {
      "id": "5f8ea41c1280f0000095477f",
      "text": "[https://gyazo.com/b566d14014f35d98cf27386ca519f20d]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183645,
      "updated": 1603183645
    },
    {
      "id": "5f8ea46b1280f00000954782",
      "text": "横軸のメモリ幅を統一したほうが比較しやすい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183724,
      "updated": 1603183741
    },
    {
      "id": "5f8ea46d1280f00000954783",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183725,
      "updated": 1603183725
    },
    {
      "id": "5f8ea39c1280f00000954735",
      "text": "使用したscript",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183516,
      "updated": 1603183520
    },
    {
      "id": "5f8ea3a01280f00000954737",
      "text": "code:plot.py",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183521,
      "updated": 1603183526
    },
    {
      "id": "5f8ea3a21280f00000954738",
      "text": " from __future__ import print_function",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954739",
      "text": " from __future__ import unicode_literals",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095473a",
      "text": " import requests",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095473b",
      "text": " import matplotlib.pyplot as plt",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095473c",
      "text": " import matplotlib as mpl",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095473d",
      "text": " import collections",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095473e",
      "text": " import argparse",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095473f",
      "text": " mpl.use(\"Agg\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954740",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603190000
    },
    {
      "id": "5f8ea3a21280f00000954741",
      "text": " # matplotlibで日本語を使えるようにする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954742",
      "text": " plt.rcParams[\"font.family\"] = \"Cica\" # お好きなFontに変えて下さい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954743",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603190001
    },
    {
      "id": "5f8ea3a21280f00000954744",
      "text": " def main(project):",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954745",
      "text": "     pages = []",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954746",
      "text": "     response = requests.get(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954747",
      "text": "         f'https://scrapbox.io/api/pages/{project}/search/titles')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954748",
      "text": "     followingId = response.headers.get('X-Following-Id')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954749",
      "text": "     pages += response.json()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095474a",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603190003
    },
    {
      "id": "5f8ea3a21280f0000095474b",
      "text": "     while followingId == None:",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095474c",
      "text": "         response = requests.get(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095474d",
      "text": "             f'https://scrapbox.io/api/pages/{project}/search/titles', params={'followingId': followingId})",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095474e",
      "text": "         followingId = response.headers.get('X-Following-Id')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095474f",
      "text": "         pages += response.json()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954750",
      "text": "         pass",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954751",
      "text": "     print('Finish loading all data')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954752",
      "text": "     # 取得結果の確認",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954753",
      "text": "     for page in pages:",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954754",
      "text": "         print(f'title = {page[\"title\"]}'",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954755",
      "text": "               f'\\n\\tlinks = {page[\"links\"]}')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954756",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603190005
    },
    {
      "id": "5f8ea3a21280f00000954757",
      "text": "     print('Calculating the number of back links...')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954758",
      "text": "     temp = []",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954759",
      "text": "     for page in pages:",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095475a",
      "text": "         temp+=page['links']",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095475b",
      "text": "     linkNum = collections.Counter(temp);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095475c",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603190006
    },
    {
      "id": "5f8ea3a21280f0000095475d",
      "text": "     print(linkNum)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095475e",
      "text": "     print('finished.')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095475f",
      "text": "     print('Plotting a histogram...')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954760",
      "text": "     n, bins, patches = plt.hist(linkNum.values(), bins=max(linkNum.values())-min(linkNum.values()), log=True)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954761",
      "text": "     [plt.text((bins[i+1]+bins[i])/2, n[i], int(n[i]), horizontalalignment='center')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954762",
      "text": "      for i in range(len(bins)-1)]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954763",
      "text": "     ax=plt.gca()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954764",
      "text": "     ax.set_title(project)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954765",
      "text": "     ax.set_xlabel('被リンク数')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954766",
      "text": "     ax.set_ylabel('ページ数')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954767",
      "text": "     plt.savefig(f'{project}.png')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954768",
      "text": "     print('finished.')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954769",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603190008
    },
    {
      "id": "5f8ea3a21280f0000095476a",
      "text": " if __name__ == \"__main__\":",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095476b",
      "text": "     # Command line argumentsの設定",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095476c",
      "text": "     parser = argparse.ArgumentParser(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095476d",
      "text": "             description=\"指定したscrapbox projectの被リンク数のhistogramを作成するscript\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095476e",
      "text": "     parser.add_argument('project',help='分析したいscrapbox project name')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f0000095476f",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603190010
    },
    {
      "id": "5f8ea3a21280f00000954770",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603190011
    },
    {
      "id": "5f8ea3a21280f00000954771",
      "text": "     # argumentsを解析する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954772",
      "text": "     args = parser.parse_args()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954773",
      "text": "     project = args.project",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954774",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603190012
    },
    {
      "id": "5f8ea3a21280f00000954775",
      "text": "     # main loop",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954776",
      "text": "     main(project)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189996
    },
    {
      "id": "5f8ea3a21280f00000954777",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183522,
      "updated": 1603189988
    },
    {
      "id": "5f8ea39c1280f00000954736",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183516,
      "updated": 1603183516
    },
    {
      "id": "5f8ea36e1280f00000954732",
      "text": "from [被リンク数の分布]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183471,
      "updated": 1603183475
    },
    {
      "id": "5f8ea35d1280f0000095472e",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1603183453,
      "updated": 1603183453
    },
    {
      "id": "601d40541280f00000979803",
      "text": "#scrapboxを統計する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1612529748,
      "updated": 1612529752
    },
    {
      "id": "601d40551280f00000979804",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1612529749,
      "updated": 1612529749
    }
  ]
}