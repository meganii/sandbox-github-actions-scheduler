{
  "id": "6712437beff39d1a41871386",
  "title": "プログラミング言語を作る準備運動 @moeki",
  "created": 1729250180,
  "updated": 1729256275,
  "lines": [
    {
      "id": "6712437beff39d1a41871386",
      "text": "プログラミング言語を作る準備運動 @moeki",
      "userId": "6619476365154e00252812e7",
      "created": 1729250180,
      "updated": 1729256275
    },
    {
      "id": "671247bc2812e70000dc75ed",
      "text": "[moeki.icon]",
      "userId": "6619476365154e00252812e7",
      "created": 1729251261,
      "updated": 1729251261
    },
    {
      "id": "6712438d2812e70000dc75af",
      "text": "[https://peggyjs.org/index.html Peggy – Parser Generator for JavaScript]",
      "userId": "6619476365154e00252812e7",
      "created": 1729250190,
      "updated": 1729251261
    },
    {
      "id": "671244d12812e70000dc75b3",
      "text": "このパーサージェネレータがなんかシンプルそう",
      "userId": "6619476365154e00252812e7",
      "created": 1729250513,
      "updated": 1729250534
    },
    {
      "id": "671245d62812e70000dc75d4",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729250774,
      "updated": 1729250782
    },
    {
      "id": "671246fc2812e70000dc75db",
      "text": "[PEG]という文法の実装なのか。",
      "userId": "6619476365154e00252812e7",
      "created": 1729251068,
      "updated": 1729251275
    },
    {
      "id": "671247ac2812e70000dc75eb",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729251245,
      "updated": 1729251245
    },
    {
      "id": "671246fd2812e70000dc75dc",
      "text": "[https://kschiess.github.io/parslet/ parslet - About]",
      "userId": "6619476365154e00252812e7",
      "created": 1729251070,
      "updated": 1729251245
    },
    {
      "id": "671247ab2812e70000dc75ea",
      "text": "Rubyのライブラリもあるな...",
      "userId": "6619476365154e00252812e7",
      "created": 1729251244,
      "updated": 1729251258
    },
    {
      "id": "671247aa2812e70000dc75e9",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729251242,
      "updated": 1729251242
    },
    {
      "id": "6712492f2812e70000dc75ee",
      "text": "なんかブラウザでインタプリタが動いたら楽しそうなので[Peggy]にする",
      "userId": "6619476365154e00252812e7",
      "created": 1729251631,
      "updated": 1729251799
    },
    {
      "id": "671249312812e70000dc75ef",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729251633,
      "updated": 1729251633
    },
    {
      "id": "67124a0d2812e70000dc75f0",
      "text": "code:javascript",
      "userId": "6619476365154e00252812e7",
      "created": 1729251853,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75f2",
      "text": " // Simple Arithmetics Grammar",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75f3",
      "text": " // ==========================",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75f4",
      "text": " //",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75f5",
      "text": " // Accepts expressions like \"2 * (3 + 4)\" and computes their value.",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75f6",
      "text": " ",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75f7",
      "text": " Expression",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75f8",
      "text": "   = head:Term tail:(_ (\"+\" / \"-\") _ Term)* {",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75f9",
      "text": "       return tail.reduce(function(result, element) {",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75fa",
      "text": "         if (element[1] === \"+\") { return result + element[3]; }",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75fb",
      "text": "         if (element[1] === \"-\") { return result - element[3]; }",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75fc",
      "text": "       }, head);",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75fd",
      "text": "     }",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc75fe",
      "text": "`Expression`とか`Term`が rule の名前らしい。head とか tail が分からんな。",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251934
    },
    {
      "id": "67124a202812e70000dc7611",
      "text": "\t[claude.icon]によると優先度が高いルールを先に定義するらしい",
      "userId": "6619476365154e00252812e7",
      "created": 1729251873,
      "updated": 1729252315
    },
    {
      "id": "67124c332812e70000dc761a",
      "text": "\t`_`は空白",
      "userId": "6619476365154e00252812e7",
      "created": 1729252403,
      "updated": 1729252408
    },
    {
      "id": "67124c3a2812e70000dc761b",
      "text": "\t`*` は0回以上の繰り返し。正規表現と一緒だ",
      "userId": "6619476365154e00252812e7",
      "created": 1729252411,
      "updated": 1729252428
    },
    {
      "id": "67124c4c2812e70000dc761d",
      "text": "\tあーそうか、`head`が`Term`で`tail`は`_ (\"+\" / \"-\") _ Term`の0回以上の繰り返しか。そして `element` には`tail`の文字列がくるんだ。",
      "userId": "6619476365154e00252812e7",
      "created": 1729252429,
      "updated": 1729252523
    },
    {
      "id": "67124bb22812e70000dc7619",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729252274,
      "updated": 1729252274
    },
    {
      "id": "67124a1c2812e70000dc7610",
      "text": "code:javascript",
      "userId": "6619476365154e00252812e7",
      "created": 1729251869,
      "updated": 1729251872
    },
    {
      "id": "67124a152812e70000dc75ff",
      "text": " Term",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc7600",
      "text": "   = head:Factor tail:(_ (\"*\" / \"/\") _ Factor)* {",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc7601",
      "text": "       return tail.reduce(function(result, element) {",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc7602",
      "text": "         if (element[1] === \"*\") { return result * element[3]; }",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc7603",
      "text": "         if (element[1] === \"/\") { return result / element[3]; }",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc7604",
      "text": "       }, head);",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc7605",
      "text": "     }",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc7606",
      "text": " ",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc7607",
      "text": " Factor",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc7608",
      "text": "   = \"(\" _ expr:Expression _ \")\" { return expr; }",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc7609",
      "text": "   / Integer",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124af02812e70000dc7617",
      "text": "`/ Integer` とは。。。",
      "userId": "6619476365154e00252812e7",
      "created": 1729252081,
      "updated": 1729252105
    },
    {
      "id": "67124dfc2812e70000dc761e",
      "text": "\t`Factor`にマッチしなかったら`Integer`を試すという意味らしい",
      "userId": "6619476365154e00252812e7",
      "created": 1729252860,
      "updated": 1729252883
    },
    {
      "id": "67124af52812e70000dc7618",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729252086,
      "updated": 1729252086
    },
    {
      "id": "67124a152812e70000dc760a",
      "text": "code:javascript",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729252085
    },
    {
      "id": "67124a152812e70000dc760b",
      "text": " Integer \"integer\"",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc760c",
      "text": "   = _ [0-9]+ { return parseInt(text(), 10); }",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124aef2812e70000dc7616",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729252079,
      "updated": 1729252079
    },
    {
      "id": "67124a152812e70000dc760d",
      "text": "これは分かる。もらったテキストを10進数にしてる。`text()` っていうのが突然現れるのがなんかキモいが...",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729252079
    },
    {
      "id": "67124aa62812e70000dc7614",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729252006,
      "updated": 1729252006
    },
    {
      "id": "67124a9d2812e70000dc7613",
      "text": "code:javascript",
      "userId": "6619476365154e00252812e7",
      "created": 1729251998,
      "updated": 1729252004
    },
    {
      "id": "67124a152812e70000dc760e",
      "text": " _ \"whitespace\"",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a152812e70000dc760f",
      "text": "   = [ \\t\\n\\r]*",
      "userId": "6619476365154e00252812e7",
      "created": 1729251861,
      "updated": 1729251861
    },
    {
      "id": "67124a0e2812e70000dc75f1",
      "text": "whitespaceは何と無く分かる。これらの文字列が空白を意味するよってことだ",
      "userId": "6619476365154e00252812e7",
      "created": 1729251855,
      "updated": 1729251997
    },
    {
      "id": "67124a8b2812e70000dc7612",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729251981,
      "updated": 1729251981
    },
    {
      "id": "67124e8f2812e70000dc761f",
      "text": "code:javascript ",
      "userId": "6619476365154e00252812e7",
      "created": 1729253007,
      "updated": 1729253031
    },
    {
      "id": "67124e932812e70000dc7625",
      "text": " Start",
      "userId": "6619476365154e00252812e7",
      "created": 1729253011,
      "updated": 1729253011
    },
    {
      "id": "67124e932812e70000dc7626",
      "text": "   = Statement+",
      "userId": "6619476365154e00252812e7",
      "created": 1729253011,
      "updated": 1729253011
    },
    {
      "id": "67124e932812e70000dc7627",
      "text": " ",
      "userId": "6619476365154e00252812e7",
      "created": 1729253011,
      "updated": 1729253011
    },
    {
      "id": "67124e932812e70000dc7628",
      "text": " Statement",
      "userId": "6619476365154e00252812e7",
      "created": 1729253011,
      "updated": 1729253011
    },
    {
      "id": "67124e932812e70000dc7629",
      "text": "   = Assignment",
      "userId": "6619476365154e00252812e7",
      "created": 1729253011,
      "updated": 1729253011
    },
    {
      "id": "67124e932812e70000dc762a",
      "text": "   / Expression",
      "userId": "6619476365154e00252812e7",
      "created": 1729253011,
      "updated": 1729253011
    },
    {
      "id": "67124e902812e70000dc7620",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729253009,
      "updated": 1729253009
    },
    {
      "id": "67124e942812e70000dc762b",
      "text": "これで式を定義できる",
      "userId": "6619476365154e00252812e7",
      "created": 1729253012,
      "updated": 1729253026
    },
    {
      "id": "67124e952812e70000dc762c",
      "text": "Statementの1つ以上の繰り返し",
      "userId": "6619476365154e00252812e7",
      "created": 1729253014,
      "updated": 1729253215
    },
    {
      "id": "67124f5e2812e70000dc7630",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729253215,
      "updated": 1729253215
    },
    {
      "id": "67124f5f2812e70000dc7633",
      "text": "code:code",
      "userId": "6619476365154e00252812e7",
      "created": 1729253216,
      "updated": 1729253245
    },
    {
      "id": "67124f5e2812e70000dc7631",
      "text": "\thoge = 1",
      "userId": "6619476365154e00252812e7",
      "created": 1729253215,
      "updated": 1729253246
    },
    {
      "id": "67124f5e2812e70000dc7632",
      "text": "\tfuga = 1",
      "userId": "6619476365154e00252812e7",
      "created": 1729253215,
      "updated": 1729253247
    },
    {
      "id": "67124f562812e70000dc762f",
      "text": "これすらもエラーになる。 `Line 2, column 1: Expected [*/], [+\\-], or whitespace but \"f\" found.`",
      "userId": "6619476365154e00252812e7",
      "created": 1729253206,
      "updated": 1729253266
    },
    {
      "id": "67124f832812e70000dc7634",
      "text": "EOSの定義が必要",
      "userId": "6619476365154e00252812e7",
      "created": 1729253252,
      "updated": 1729253507
    },
    {
      "id": "671250842812e70000dc7636",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729253508,
      "updated": 1729253508
    },
    {
      "id": "671250842812e70000dc7637",
      "text": "code:code",
      "userId": "6619476365154e00252812e7",
      "created": 1729253508,
      "updated": 1729253643
    },
    {
      "id": "6712510b2812e70000dc7638",
      "text": " EOS \"end of statement\"",
      "userId": "6619476365154e00252812e7",
      "created": 1729253643,
      "updated": 1729253643
    },
    {
      "id": "6712510b2812e70000dc7639",
      "text": "   = _ \";\"",
      "userId": "6619476365154e00252812e7",
      "created": 1729253643,
      "updated": 1729253643
    },
    {
      "id": "6712510b2812e70000dc763a",
      "text": "   / _ \"\\n\"",
      "userId": "6619476365154e00252812e7",
      "created": 1729253643,
      "updated": 1729253643
    },
    {
      "id": "6712510b2812e70000dc763b",
      "text": "   / _ EOF",
      "userId": "6619476365154e00252812e7",
      "created": 1729253643,
      "updated": 1729253643
    },
    {
      "id": "6712507e2812e70000dc7635",
      "text": "これで `hoge = 1;fuga = 1`はパースされるようになった。なぜか`\\n`がだめみたい。",
      "userId": "6619476365154e00252812e7",
      "created": 1729253502,
      "updated": 1729253804
    },
    {
      "id": "671252882812e70000edf82e",
      "text": "あー`_`が余計だな。でも`_ ;`の方は必要っぽい？",
      "userId": "6619476365154e00252812e7",
      "created": 1729254025,
      "updated": 1729254043
    },
    {
      "id": "671253132812e70000edf82f",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729254163,
      "updated": 1729254163
    },
    {
      "id": "671253132812e70000edf830",
      "text": "とりあえずこんなん",
      "userId": "6619476365154e00252812e7",
      "created": 1729254163,
      "updated": 1729254167
    },
    {
      "id": "671253172812e70000edf831",
      "text": "code:code",
      "userId": "6619476365154e00252812e7",
      "created": 1729254167,
      "updated": 1729254169
    },
    {
      "id": "671253192812e70000edf832",
      "text": " EOS",
      "userId": "6619476365154e00252812e7",
      "created": 1729254169,
      "updated": 1729254169
    },
    {
      "id": "671253192812e70000edf833",
      "text": "   = _ \";\" \"\\n\"*",
      "userId": "6619476365154e00252812e7",
      "created": 1729254169,
      "updated": 1729254169
    },
    {
      "id": "671253192812e70000edf834",
      "text": "   / \"\\n\"",
      "userId": "6619476365154e00252812e7",
      "created": 1729254169,
      "updated": 1729254169
    },
    {
      "id": "671253192812e70000edf835",
      "text": "   / _ EOF",
      "userId": "6619476365154e00252812e7",
      "created": 1729254169,
      "updated": 1729254169
    },
    {
      "id": "671251112812e70000dc763d",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729253649,
      "updated": 1729253649
    },
    {
      "id": "6712536c2812e70000edf836",
      "text": "標準出力をつける",
      "userId": "6619476365154e00252812e7",
      "created": 1729254253,
      "updated": 1729254258
    },
    {
      "id": "671253732812e70000edf838",
      "text": "code:code",
      "userId": "6619476365154e00252812e7",
      "created": 1729254260,
      "updated": 1729254567
    },
    {
      "id": "671254a62812e70000edf839",
      "text": " hoge = 1",
      "userId": "6619476365154e00252812e7",
      "created": 1729254567,
      "updated": 1729254567
    },
    {
      "id": "671254a72812e70000edf83a",
      "text": " $ hoge",
      "userId": "6619476365154e00252812e7",
      "created": 1729254567,
      "updated": 1729254622
    },
    {
      "id": "671253702812e70000edf837",
      "text": "意地でも予約語に英語を使わない",
      "userId": "6619476365154e00252812e7",
      "created": 1729254257,
      "updated": 1729254587
    },
    {
      "id": "671254aa2812e70000edf83b",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729254570,
      "updated": 1729254570
    },
    {
      "id": "671254f42812e70000edf83c",
      "text": "大体わかったので文法を考えていく。",
      "userId": "6619476365154e00252812e7",
      "created": 1729254645,
      "updated": 1729254652
    },
    {
      "id": "671254fc2812e70000edf83e",
      "text": "関数リテラルが大好きなのでそれを主にしよう。UI向けの言語にしたいのでそんな雰囲気で",
      "userId": "6619476365154e00252812e7",
      "created": 1729254653,
      "updated": 1729255400
    },
    {
      "id": "671254f72812e70000edf83d",
      "text": "",
      "userId": "6619476365154e00252812e7",
      "created": 1729254648,
      "updated": 1729254648
    }
  ]
}