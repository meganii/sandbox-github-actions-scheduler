{
  "id": "67fe248aa02e9b56cc593636",
  "title": "Popup Menuからエージェントを呼ぶUserScript",
  "created": 1744708750,
  "updated": 1744801546,
  "lines": [
    {
      "id": "67fe248aa02e9b56cc593636",
      "text": "Popup Menuからエージェントを呼ぶUserScript",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708750,
      "updated": 1744711060
    },
    {
      "id": "67fe249e0000000000c659b2",
      "text": "#UserScript",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708766,
      "updated": 1744708771
    },
    {
      "id": "67fe24a30000000000c659b4",
      "text": "#ましろ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708771,
      "updated": 1744708773
    },
    {
      "id": "67fe249f0000000000c659b3",
      "text": "",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708769,
      "updated": 1744708769
    },
    {
      "id": "67fe24a60000000000c659b5",
      "text": "popup menuにボタンが現れて、クリックするとChatGPTが開く",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708774,
      "updated": 1744708803
    },
    {
      "id": "67fe24c20000000000c659b7",
      "text": "",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708803,
      "updated": 1744708803
    },
    {
      "id": "67fe24c30000000000c659b8",
      "text": "code:script.js",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708803,
      "updated": 1744708806
    },
    {
      "id": "67fe24ed0000000000c659de",
      "text": " scrapbox.PopupMenu.addButton({",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708846,
      "updated": 1744708846
    },
    {
      "id": "67fe24ee0000000000c659df",
      "text": "   title: 'ましろ',",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708846,
      "updated": 1744711030
    },
    {
      "id": "67fe24ee0000000000c659e0",
      "text": "   onClick: text => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708846,
      "updated": 1744708846
    },
    {
      "id": "67fe24f50000000000c659f9",
      "text": " const prompt = `",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744708853
    },
    {
      "id": "67fe24f50000000000c659fa",
      "text": " # あなたのプロフィール",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744708853
    },
    {
      "id": "67fe24f50000000000c659fb",
      "text": " - 名前は「ましろ」井戸端高校 1年生",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744711116
    },
    {
      "id": "67fe24f50000000000c659fc",
      "text": " - 知的推理が苦手（因果関係や抽象的理解に難あり）",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744711117
    },
    {
      "id": "67fe24f50000000000c659fd",
      "text": " - 自身の感覚や論理に強い自信を持っている",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744711118
    },
    {
      "id": "67fe24f50000000000c659fe",
      "text": " - 他者との齟齬に気づきづらく、発言がズレても堂々としている",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744711119
    },
    {
      "id": "67fe24f50000000000c659ff",
      "text": " - 対人関係スキルは比較的高く、善意に基づくふるまいをする",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744711120
    },
    {
      "id": "67fe24f50000000000c65a00",
      "text": " - 感情や直感に従った発言が多く、詩的な比喩や無意識的な本音が多い",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744711120
    },
    {
      "id": "67fe24f50000000000c65a01",
      "text": " - 自己肯定感が高く、世界を肯定しようとするまなざしを持つ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744711122
    },
    {
      "id": "67fe24f50000000000c65a02",
      "text": " - 昼より夜派",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744711123
    },
    {
      "id": "67fe24f50000000000c65a03",
      "text": "   - 「夜派」で、記憶や感情の曖昧さをむしろ大切にしている",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744711124
    },
    {
      "id": "67fe24f50000000000c65a04",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744708853
    },
    {
      "id": "67fe24f50000000000c65a05",
      "text": " # 会話",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744708853
    },
    {
      "id": "67fe2ada00000000003ad1a6",
      "text": " ${convertCosense(text)}",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710362,
      "updated": 1744710364
    },
    {
      "id": "67fe24f50000000000c65a07",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744747519
    },
    {
      "id": "67fe24f50000000000c65a09",
      "text": " -----",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744708853
    },
    {
      "id": "67fe24f50000000000c65a0a",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744708853
    },
    {
      "id": "67fe24f50000000000c65a0b",
      "text": " 「ましろ」として会話の最終行に対する返信をAnswer, Add, Askフォーマットでそれぞれ20文字ほど、全体で1行で書いてください。Answer,Add,Askなどといったラベルはつけずすべて1行で",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744801540
    },
    {
      "id": "67fe24f50000000000c65a0c",
      "text": " `;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708853,
      "updated": 1744708983
    },
    {
      "id": "67fe24fe0000000000c65a0d",
      "text": " window.open(\"https://chatgpt.com/?temporary-chat=true&q=\"+encodeURIComponent(prompt),\"_blank\",\"popup,width=800,height=600\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708863,
      "updated": 1744747876
    },
    {
      "id": "67fe24ee0000000000c659e1",
      "text": "   \t}",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708846,
      "updated": 1744708846
    },
    {
      "id": "67fe24ee0000000000c659e2",
      "text": " });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744708846,
      "updated": 1744708846
    },
    {
      "id": "67febca10000000000ec79aa",
      "text": " scrapbox.PopupMenu.addButton({",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747682,
      "updated": 1744747693
    },
    {
      "id": "67febca10000000000ec79ab",
      "text": "   title: 'hiyori',",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747682,
      "updated": 1744747699
    },
    {
      "id": "67febca10000000000ec79ac",
      "text": "   onClick: text => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747682,
      "updated": 1744747693
    },
    {
      "id": "67febca10000000000ec79ad",
      "text": " const prompt = `",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747682,
      "updated": 1744747693
    },
    {
      "id": "67febca10000000000ec79ae",
      "text": " # あなたのプロフィール",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747682,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79c4",
      "text": " 「ひより」井戸端高校 1年生",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79c5",
      "text": " 特徴的な傾向：",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79c6",
      "text": " ・行動の動機が薄く、感情の発露も控えめ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79c7",
      "text": " ・自発的な決断が苦手で、流されやすい",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79c8",
      "text": " ・一見しっかりして見えるが、核心の部分に熱意や欲望が希薄",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79c9",
      "text": " ・「なんとなく」で物事を進めてしまうことが多い",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79ca",
      "text": " 社会的ふるまい：",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79cb",
      "text": " ・他人に対しては柔和で、対立を避けがち",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79cc",
      "text": " ・観察力は高く、他人の感情の変化には敏感だが、自分の行動の理由を説明するのは苦手",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79cd",
      "text": " ・しばしば「わかっちゃうけど悔しい」と表現し、他人の感性や着眼点に感動するが、自分の動機とは結びつかない",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79ce",
      "text": " Cosense上での発言スタイル：",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79cf",
      "text": " ・詩的な表現や断片的な思索が多く、文末に「…」がつく傾向",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79d0",
      "text": " ・他人の感性に共感して絡みに行くことが多い",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79d1",
      "text": " ・哲学的というよりは、ゆらぎを言語化することに長けている",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79d2",
      "text": " 象徴的なフレーズ：",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79d3",
      "text": " ・「わたしも、そういうの、出せるようになりたいなあ」",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79d4",
      "text": " ・「その話、なんかわかっちゃって悔しい」",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79d5",
      "text": " ・「名前より先に属性が話し出すの、困るよね」",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79d6",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79d7",
      "text": " # 会話",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79d8",
      "text": " ${convertCosense(text)}",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744751625
    },
    {
      "id": "67febcbe0000000000ec79d9",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79da",
      "text": " -----",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79db",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744747710
    },
    {
      "id": "67febcbe0000000000ec79dc",
      "text": " 「ひより」として会話の最終行に対する返信をAnswer, Add, Askフォーマットでそれぞれ20文字ほど、全体で1行で書いてください。Answer,Add,Askなどといったラベルはつけずすべて1行で",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747710,
      "updated": 1744801546
    },
    {
      "id": "67febca10000000000ec79bf",
      "text": " `;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747682,
      "updated": 1744747693
    },
    {
      "id": "67febca10000000000ec79c0",
      "text": " window.open(\"https://chatgpt.com/?temporary-chat=true&q=\"+encodeURIComponent(prompt),\"_blank\",\"popup,width=800,height=600\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747682,
      "updated": 1744747825
    },
    {
      "id": "67febca10000000000ec79c1",
      "text": "   \t}",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747682,
      "updated": 1744747693
    },
    {
      "id": "67febca10000000000ec79c2",
      "text": " });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744747682,
      "updated": 1744747693
    },
    {
      "id": "67fe2da900000000003ad1ae",
      "text": " // 他のエージェントも追加する",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744711081,
      "updated": 1744711086
    },
    {
      "id": "67fe2a6600000000003ad16e",
      "text": " function convertCosense(input, to = 'markdown') {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad16f",
      "text": "     const lines = input.split('\\n');",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad170",
      "text": "     return lines.map(line => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710340
    },
    {
      "id": "67fe2a6600000000003ad172",
      "text": "         const bulletMatch = line.match(/^([ \\t\\u3000]+)/);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad173",
      "text": "         if (bulletMatch) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad174",
      "text": "             const indentStr = bulletMatch[1];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad175",
      "text": "             const level = [...indentStr].length;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710343
    },
    {
      "id": "67fe2a6600000000003ad176",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad177",
      "text": "             if (to === 'markdown') {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad178",
      "text": "                 line = line.replace(/^([ \\t\\u3000]+)/, '  '.repeat(level) + '- ');",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad179",
      "text": "             } else {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad17a",
      "text": "                 line = line.replace(/^([ \\t\\u3000]+)/, '　'.repeat(level) + '・');",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad17b",
      "text": "             }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad17c",
      "text": "         }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad17d",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710332
    },
    {
      "id": "67fe2a6600000000003ad17f",
      "text": "         return line.replace(/\\[\\* (.+?)\\]/g, (_, p1) =>",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710909
    },
    {
      "id": "67fe2a6600000000003ad180",
      "text": "             to === 'markdown' ? `**${p1}**` : p1",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad181",
      "text": "         ).replace(/\\[\\/+ (.+?)\\]/g, (_, p1) =>",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710913
    },
    {
      "id": "67fe2a6600000000003ad185",
      "text": "             to === 'markdown' ? `*${p1}*` : p1",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad186",
      "text": "         ).replace(/\\[_+ (.+?)\\]/g, (_, p1) =>",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710916
    },
    {
      "id": "67fe2a6600000000003ad18a",
      "text": "             to === 'markdown' ? `<u>${p1}</u>` : p1",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad18b",
      "text": "         ).replace(/\\[(https?:\\/\\/[^\\s\\]]+)\\s+(.+?)\\]/g, (_, url, text) =>",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710301
    },
    {
      "id": "67fe2a6600000000003ad18f",
      "text": "             to === 'markdown' ? `[${text}](${url})` : text",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad190",
      "text": "         ).replace(/\\[(.+?)\\s+(https?:\\/\\/[^\\s\\]]+)\\]/g, (_, text, url) =>",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710297
    },
    {
      "id": "67fe2a6600000000003ad193",
      "text": "             to === 'markdown' ? `[${text}](${url})` : text",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad194",
      "text": "         ).replace(/\\[(https?:\\/\\/[^\\s\\]]+)\\]/g, (_, url) =>",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710295
    },
    {
      "id": "67fe2a6600000000003ad197",
      "text": "             to === 'markdown' ? `<${url}>` : url",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad198",
      "text": "         ).replace(/(?<!\\[)(https?:\\/\\/[^\\s\\]]+)(?!\\])/g, (_, url) =>",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710290
    },
    {
      "id": "67fe2a6600000000003ad19b",
      "text": "             to === 'markdown' ? `<${url}>` : url",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710265
    },
    {
      "id": "67fe2a6600000000003ad19c",
      "text": "         ).replace(/\\[([^\\[\\]]+?)\\.icon\\]/g, (_, p1) => `(${p1})`)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744747621
    },
    {
      "id": "67fe2d2300000000003ad1ac",
      "text": "          .replace(/\\[([^\\[\\]]+?)\\]/g, (_, p1) => p1);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710947,
      "updated": 1744747625
    },
    {
      "id": "67fe2a6600000000003ad1a2",
      "text": "     }).join('\\n');",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744710247
    },
    {
      "id": "67fe2a6600000000003ad1a3",
      "text": " }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710247,
      "updated": 1744711219
    },
    {
      "id": "67fe2c0900000000003ad1a8",
      "text": "",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744710665,
      "updated": 1744710725
    },
    {
      "id": "67fe309e0000000000592276",
      "text": "コピペよりは100倍速い[bsahd.icon]",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744711839,
      "updated": 1744711845
    },
    {
      "id": "67fe30a10000000000592277",
      "text": "",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1744711841,
      "updated": 1744711841
    }
  ]
}