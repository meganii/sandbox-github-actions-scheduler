{
  "id": "636e5a83b3cb2f00226e4a11",
  "title": "コードブロックをワンキーで分割したい",
  "created": 1668176520,
  "updated": 1723424933,
  "lines": [
    {
      "id": "636e5a83b3cb2f00226e4a11",
      "text": "コードブロックをワンキーで分割したい",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176520,
      "updated": 1668176520
    },
    {
      "id": "636e5a90e5172d00009c8a90",
      "text": "この操作を1つの操作でやりたい[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176530,
      "updated": 1668176588
    },
    {
      "id": "636e5a87e5172d00009c8a87",
      "text": "code:test",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176520,
      "updated": 1668176521
    },
    {
      "id": "636e5a87e5172d00009c8a88",
      "text": " line 1| ←ここにカーソル",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176521,
      "updated": 1668176570
    },
    {
      "id": "636e5a87e5172d00009c8a89",
      "text": " line 2",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176521,
      "updated": 1668176521
    },
    {
      "id": "636e5a87e5172d00009c8a8a",
      "text": "↓",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176521,
      "updated": 1668176521
    },
    {
      "id": "636e5a87e5172d00009c8a8b",
      "text": "code:test",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176521,
      "updated": 1668176521
    },
    {
      "id": "636e5a87e5172d00009c8a8c",
      "text": " line 1",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176521,
      "updated": 1668176521
    },
    {
      "id": "636e5abde5172d00009c8a91",
      "text": "| ←ここにカーソル",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176575,
      "updated": 1668176580
    },
    {
      "id": "636e5a87e5172d00009c8a8d",
      "text": "code:test",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176521,
      "updated": 1668176521
    },
    {
      "id": "636e5a87e5172d00009c8a8e",
      "text": " line 2",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176521,
      "updated": 1668176521
    },
    {
      "id": "636e5a87e5172d00009c8a8f",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176521,
      "updated": 1668176521
    },
    {
      "id": "636e5adfe5172d00009c8a93",
      "text": "　[コードブロックを分割して書き込み]するときに便利",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176609,
      "updated": 1668176700
    },
    {
      "id": "636e5adfe5172d00009c8a94",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176609,
      "updated": 1668176609
    },
    {
      "id": "636e5b85774b170000ccdcda",
      "text": "わかる〜[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1668176773,
      "updated": 1668176777
    },
    {
      "id": "636e5b42e5172d00009c8a95",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668176708,
      "updated": 1668176708
    },
    {
      "id": "636f6bd41280f000004d83e1",
      "text": "#コードブロック記法",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246486,
      "updated": 1668246486
    },
    {
      "id": "636f6ae81280f000009fe3c4",
      "text": "できた～[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246250,
      "updated": 1668246252
    },
    {
      "id": "636f7559774b17000077b5b0",
      "text": "　　早い[基素.icon][yosider.icon*2][wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1668248921,
      "updated": 1668256084
    },
    {
      "id": "636f7924e5172d0000b283cd",
      "text": "　　ありがてぇ…[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1668249892,
      "updated": 1668249899
    },
    {
      "id": "636f6e1d1280f00000d8ecd4",
      "text": " [https://gyazo.com/4398f623c6d14c1ae6064dc93133e397]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668247070,
      "updated": 1668247118
    },
    {
      "id": "636f6af31280f000009fe3c5",
      "text": " `Ctrl+Enter`で分割",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246260,
      "updated": 1668246268
    },
    {
      "id": "636e5b43e5172d00009c8a97",
      "text": " $ deno check --remote -r=https://scrapbox.io https://scrapbox.io/api/code/villagepump/コードブロックをワンキーで分割したい/sample.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668176708,
      "updated": 1668246488
    },
    {
      "id": "636f66181280f00000b23406",
      "text": " code:sample.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245017,
      "updated": 1668246489
    },
    {
      "id": "636f661c1280f00000b23408",
      "text": "  import { press, insertText, takeCursor, textInput } from \"../../takker/scrapbox-userscript-std/dom.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245022,
      "updated": 1668246489
    },
    {
      "id": "636f66391280f00000b2340a",
      "text": "  import { Scrapbox } from \"../../takker/scrapbox-jp%2Ftypes/userscript.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245050,
      "updated": 1668246489
    },
    {
      "id": "636f663d1280f00000b2340b",
      "text": "  declare const scrapbox: Scrapbox;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245055,
      "updated": 1668246489
    },
    {
      "id": "636f665d1280f00000b2340c",
      "text": "  ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245086,
      "updated": 1668246489
    },
    {
      "id": "636f6dbb1280f00000d8eccc",
      "text": " メインコード",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246972,
      "updated": 1668246977
    },
    {
      "id": "636f6dbb1280f00000d8eccd",
      "text": "  code:sample.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246972,
      "updated": 1668246978
    },
    {
      "id": "636f665d1280f00000b2340d",
      "text": "   textInput()!.addEventListener(\"keydown\", async (e) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245086,
      "updated": 1668246978
    },
    {
      "id": "636f66771280f00000b2340f",
      "text": "     if (e.key !== \"Enter\" || e.metaKey || e.altKey || !e.ctrlKey || e.shiftKey) return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245112,
      "updated": 1668246978
    },
    {
      "id": "66b960761280f00000f39649",
      "text": "  ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1723424887,
      "updated": 1723424888
    },
    {
      "id": "66b960701280f00000f39648",
      "text": "   [ScrapBindings]で使いたいときは、↑の条件文`<C-Enter>`にして登録すればいい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1723424882,
      "updated": 1723424933
    },
    {
      "id": "66b9607a1280f00000f3964a",
      "text": "  code:sample.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1723424891,
      "updated": 1723424891
    },
    {
      "id": "636f66fd1280f00000b23413",
      "text": "     if (scrapbox.Layout !== \"page\") return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245246,
      "updated": 1668246978
    },
    {
      "id": "636f6d3a1280f00000d8ecb3",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246844,
      "updated": 1668246978
    },
    {
      "id": "636f6dc41280f00000d8ecce",
      "text": "  コードブロック確認",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246981,
      "updated": 1668246993
    },
    {
      "id": "636f6dc41280f00000d8eccf",
      "text": "  code:sample.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246981,
      "updated": 1668246981
    },
    {
      "id": "636f67b31280f00000b23427",
      "text": "     const cursor = takeCursor()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245429,
      "updated": 1668246978
    },
    {
      "id": "636f66b51280f00000b23410",
      "text": "     const line = cursor.getPosition().line;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245175,
      "updated": 1668246978
    },
    {
      "id": "636f66ed1280f00000b23411",
      "text": "     const cursorLine = scrapbox.Page.lines[line];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245230,
      "updated": 1668246978
    },
    {
      "id": "636f6a171280f00000e55c84",
      "text": "     if (!(\"codeBlock\" in cursorLine)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246040,
      "updated": 1668246978
    },
    {
      "id": "636f69fd1280f00000b23444",
      "text": "       || cursorLine.codeBlock.start",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246014,
      "updated": 1668246978
    },
    {
      "id": "636f6a281280f00000e55c85",
      "text": "       || cursorLine.codeBlock.end) return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246058,
      "updated": 1668246978
    },
    {
      "id": "636f6d3d1280f00000d8ecb4",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246846,
      "updated": 1668246978
    },
    {
      "id": "636f6dc61280f00000d8ecd0",
      "text": "  分割実行",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246983,
      "updated": 1668246997
    },
    {
      "id": "636f6dc61280f00000d8ecd1",
      "text": "  code:sample.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246983,
      "updated": 1668246983
    },
    {
      "id": "636f6bf51280f000004d83e8",
      "text": "     press(\"End\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246518,
      "updated": 1668246978
    },
    {
      "id": "636f67331280f00000b23417",
      "text": "     press(\"Enter\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245300,
      "updated": 1668246978
    },
    {
      "id": "636f679b1280f00000b23425",
      "text": "     cursor.setPosition({ line: cursor.getPosition().line, char: cursorLine.codeBlock.indent - 1 });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245404,
      "updated": 1668246978
    },
    {
      "id": "636f67c71280f00000b23428",
      "text": "     press(\"End\", { shiftKey: true });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245448,
      "updated": 1668246978
    },
    {
      "id": "636f67d21280f00000b23429",
      "text": "     await insertText(`code:${cursorLine.codeBlock.filename ?? \"\"}`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245459,
      "updated": 1668246978
    },
    {
      "id": "636f673c1280f00000b23418",
      "text": "     press(\"Home\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245309,
      "updated": 1668246978
    },
    {
      "id": "636f67e41280f00000b2342a",
      "text": "     press(\"Enter\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245477,
      "updated": 1668246978
    },
    {
      "id": "636f67ea1280f00000b2342b",
      "text": "     press(\"ArrowUp\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245484,
      "updated": 1668246978
    },
    {
      "id": "636f6dc91280f00000d8ecd3",
      "text": " code:sample.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246986,
      "updated": 1668247001
    },
    {
      "id": "636f66731280f00000b2340e",
      "text": "  });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245108,
      "updated": 1668247001
    },
    {
      "id": "636f6b201280f000009fe3ca",
      "text": "  ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246305,
      "updated": 1668246489
    },
    {
      "id": "636f66211280f00000b23409",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245026,
      "updated": 1668246304
    },
    {
      "id": "636f6b201280f000009fe3c9",
      "text": "[get the code https://scrapbox-bundler.vercel.app?url=https://scrapbox.io/api/code/villagepump/コードブロックをワンキーで分割したい/sample.ts&bundle&minify]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668246305,
      "updated": 1723424395
    },
    {
      "id": "66b95e8d1280f00000f39646",
      "text": "依存コードをHTTP importからJSR importに変更したけど、ちゃんとbuildできてるようだね[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1723424398,
      "updated": 1723424432
    },
    {
      "id": "66b95eb21280f00000f39647",
      "text": "　よかったよかった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1723424435,
      "updated": 1723424439
    },
    {
      "id": "636f66181280f00000b23407",
      "text": "code:sample.min.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1668245017,
      "updated": 1668246303
    },
    {
      "id": "636f69a21280f00000b23435",
      "text": " var d=(e,t)=>{if(!(e instanceof HTMLTextAreaElement))throw new TypeError(`\"${t}\" must be HTMLTextAreaElement but actual is \"${e}\"`)};var o=()=>{let e=document.getElementById(\"text-input\");if(!!e)return d(e,\"textarea#text-input\"),e};var s=(e,t)=>{let{noModifiedKeys:i=!1,...n}=t??{},c={bubbles:!0,cancelable:!0,keyCode:x[e],...i?{}:{...n}},r=o();if(!r)throw Error(\"#text-input must exist.\");r.dispatchEvent(new KeyboardEvent(\"keydown\",c)),r.dispatchEvent(new KeyboardEvent(\"keyup\",c))},x={Backspace:8,Tab:9,Enter:13,Delete:46,Escape:27,\" \":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,F1:113,F2:114,F3:115,F4:116,F5:117,F6:118,F7:119,F8:120,F9:121,F10:122,F11:123,F12:124,\":\":186,\"*\":186,\";\":187,\"+\":187,\"-\":189,\"=\":189,\".\":190,\">\":190,\"/\":191,\"?\":191,\"@\":192,\"`\":192,\"[\":219,\"{\":219,\"\\\\\":220,\"|\":220,\"]\":221,\"}\":221,\"^\":222,\"~\":222,_:226};var a=e=>new Promise(t=>setTimeout(()=>t(),e));var m=async e=>{let t=o();if(!t)throw Error(\"#text-input is not ditected.\");t.focus(),t.value=e;let i=new InputEvent(\"input\",{bubbles:!0});t.dispatchEvent(i),await a(1)};var u=()=>{let e=o();if(!e)throw Error(\"#text-input is not found.\");let t=Object.keys(e).find(r=>r.startsWith(\"__reactFiber\"));if(!t)throw Error('#text-input must has the property whose name starts with \"__reactFiber\"');let i=e[t].return.return.stateNode._stores,n=i.find(r=>r.constructor.name===\"Cursor\");if(!n)throw Error('#text-input must has a \"Cursor\" store.');let c=i.find(r=>r.constructor.name===\"Selection\");if(!c)throw Error('#text-input must has a \"Selection\" store.');return{cursor:n,selection:c}};var p=()=>u().cursor;o().addEventListener(\"keydown\",async e=>{if(e.key!==\"Enter\"||e.metaKey||e.altKey||!e.ctrlKey||e.shiftKey||scrapbox.Layout!==\"page\")return;let t=p(),i=t.getPosition().line,n=scrapbox.Page.lines[i];!(\"codeBlock\"in n)||n.codeBlock.start||n.codeBlock.end||(s(\"End\"),s(\"Enter\"),t.setPosition({line:t.getPosition().line,char:n.codeBlock.indent-1}),s(\"End\",{shiftKey:!0}),await m(`code:${n.codeBlock.filename??\"\"}`),s(\"Home\"),s(\"Enter\"),s(\"ArrowUp\"))});",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1668245924,
      "updated": 1723424269
    },
    {
      "id": "636f6d191280f000004d8407",
      "text": " ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1723424268,
      "updated": 1723424268
    },
    {
      "id": "636f699e1280f00000b23434",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1723424268,
      "updated": 1723424268
    }
  ]
}