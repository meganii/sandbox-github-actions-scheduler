{
  "id": "6812383560e33643b4afc3b5",
  "title": "docker-compose.ymlのサンプルファイル",
  "created": 1746024651,
  "updated": 1746031931,
  "lines": [
    {
      "id": "6812383560e33643b4afc3b5",
      "text": "docker-compose.ymlのサンプルファイル",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024651,
      "updated": 1746024651
    },
    {
      "id": "681238cd0000000000731623",
      "text": "[docker-compose.yml]のサンプル",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024651,
      "updated": 1746024658
    },
    {
      "id": "681238d40000000000731625",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024658,
      "updated": 1746024658
    },
    {
      "id": "681238ea000000000073165b",
      "text": "[Docker Composeについてざっくり理解する【概要 / ymlファイル書き方 / コマンド操作】 #docker-compose - Qiita https://qiita.com/gon0821/items/77369def082745d19c38]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024680,
      "updated": 1746024680
    },
    {
      "id": "681238d40000000000731626",
      "text": "code:docker-compose.yml",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024658,
      "updated": 1746024664
    },
    {
      "id": "681238d90000000000731627",
      "text": " services: # 1: 作成するサービス（コンテナ）を定義する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731628",
      "text": "   db: # サービス名",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731629",
      "text": "     image: mysql:5.7 # 2: 既存イメージでビルドする",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da000000000073162a",
      "text": "     volumes: # 4: コンテナ内のディレクトリをホストと共有する設定",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681250f00000000000e5558b",
      "text": "       # ボリューム名:コンテナ内ディレクトリ",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746030830,
      "updated": 1746030830
    },
    {
      "id": "681250f10000000000e5558c",
      "text": "       # ややこしいが、ここで指定している名前はホストディレクトリではなく一番下で定義しているボリューム名を指している模様",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746030832,
      "updated": 1746030883
    },
    {
      "id": "681238da000000000073162b",
      "text": "       - db_data:/var/lib/mysql",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746030830
    },
    {
      "id": "681238da000000000073162c",
      "text": "     restart: always",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da000000000073162d",
      "text": "     environment: # 6: コンテナ内で利用可能な環境変数を設定する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da000000000073162e",
      "text": "       MYSQL_ROOT_PASSWORD: root_password",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da000000000073162f",
      "text": "       MYSQL_DATABASE: your_database",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731630",
      "text": "       MYSQL_USER: user_name",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731631",
      "text": "       MYSQL_PASSWORD: user_password",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731632",
      "text": " ",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731633",
      "text": "   web: # サービス名",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731634",
      "text": "     build: ./rails_project # 3: ビルドに使用するDockerfileがあるディレクトリのパスを指定する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731635",
      "text": "     command: bundle exec rails s -p 3000 -b '0.0.0.0' # 9: ",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731636",
      "text": "     volumes: # 4: コンテナ内のディレクトリをホストと共有する設定",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731637",
      "text": "       - .:/myapp # ホストディレクトリ:コンテナ内ディレクトリ",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731638",
      "text": "     ports: # 7: ホストとコンテナのポートを繋ぐ設定。コンテナとその外部で通信を行う際に設定する。",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da0000000000731639",
      "text": "       - \"3000:3000\" # ホストのポート番号:コンテナのポート番号",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da000000000073163a",
      "text": "     depends_on: # 8: このサービスの起動前に事前に起動するサービスを指定する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da000000000073163b",
      "text": "       - db",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da000000000073163c",
      "text": "       ",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238da000000000073163d",
      "text": " volumes: # 5: Dockerボリュームを定義する。ここで定義したものは、コンテナが削除されてもデータが消えない。",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "6812512f0000000000e5558d",
      "text": "   # ボリューム名",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746030893,
      "updated": 1746030911
    },
    {
      "id": "681251440000000000e5558e",
      "text": "   # 以下の定義方法だとコンテナを跨いだ共通ディレクトリとして機能しているが、コンテナの外部（ホスト側のディレクトリなど）とは接続されない",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746030914,
      "updated": 1746031638
    },
    {
      "id": "681238da000000000073163e",
      "text": "   db_data:",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746030913
    },
    {
      "id": "681238da000000000073163f",
      "text": " ",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024664,
      "updated": 1746024664
    },
    {
      "id": "681238e30000000000731641",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746024673,
      "updated": 1746024673
    },
    {
      "id": "6812547c0000000000e5558f",
      "text": "関連",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746031738,
      "updated": 1746031741
    },
    {
      "id": "6812547f0000000000e55591",
      "text": "\t[docker-compose.yml内のトップレベルのvolumes]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746031741,
      "updated": 1746031931
    },
    {
      "id": "6812547f0000000000e55590",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1746031741,
      "updated": 1746031741
    }
  ]
}