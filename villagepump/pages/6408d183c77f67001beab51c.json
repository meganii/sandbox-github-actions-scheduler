{
  "id": "6408d183c77f67001beab51c",
  "title": "雑に読むclusterのアーキテクチャ",
  "created": 1678299526,
  "updated": 1678343617,
  "lines": [
    {
      "id": "6408d183c77f67001beab51c",
      "text": "雑に読むclusterのアーキテクチャ",
      "userId": "59fb21121207900012774b17",
      "created": 1678299526,
      "updated": 1678343617
    },
    {
      "id": "6408d6e2774b170000ee4807",
      "text": ">[https://twitter.com/c_c_kato/status/1632954245711532037?s=20 @c_c_kato]: clusterのシステムアーキテクチャが公開されてる",
      "userId": "59fb21121207900012774b17",
      "created": 1678300899,
      "updated": 1678300905
    },
    {
      "id": "6408d6e9774b170000ee4808",
      "text": ">ゲームの技術でUGCやるし、3D空間同期＆アーカイブやるし、大規模イベントの同接スパイクをさばかないといけないし",
      "userId": "59fb21121207900012774b17",
      "created": 1678300905,
      "updated": 1678300905
    },
    {
      "id": "6408d6e9774b170000ee4809",
      "text": ">うちほど総合的かつ面白いサーバー・インフラの仕事はないと自負してるし、採用加速中なのでみんな来て！",
      "userId": "59fb21121207900012774b17",
      "created": 1678300905,
      "updated": 1678300905
    },
    {
      "id": "6408d6e9774b170000ee480a",
      "text": ">https://t.co/wUlJQJlJLU",
      "userId": "59fb21121207900012774b17",
      "created": 1678300905,
      "updated": 1678300905
    },
    {
      "id": "6408d6e9774b170000ee480b",
      "text": "",
      "userId": "59fb21121207900012774b17",
      "created": 1678300905,
      "updated": 1678300905
    },
    {
      "id": "6408d186774b170000ee47c7",
      "text": "[https://aws.amazon.com/jp/blogs/startup/tech-interview-cluster-2023/ AWS Graviton で EC2 コストを40%削減。国内最大級メタバース運営 クラスター社の AWS 活用 | AWS Startup ブログ]",
      "userId": "59fb21121207900012774b17",
      "created": 1678299526,
      "updated": 1678299530
    },
    {
      "id": "6408d2c9774b170000ee47d6",
      "text": "　[cluster]の事業",
      "userId": "59fb21121207900012774b17",
      "created": 1678299850,
      "updated": 1678300737
    },
    {
      "id": "6408d2ce774b170000ee47d7",
      "text": "　　toC",
      "userId": "59fb21121207900012774b17",
      "created": 1678299855,
      "updated": 1678299857
    },
    {
      "id": "6408d2da774b170000ee47da",
      "text": "　　 >コンテンツクリエイターの方々がアバターやクラフトアイテム、アクセサリーなどを「cluster」上で販売しマネタイズできるようなシステムを提供して、クリエイターのエコシステムを構築しています。",
      "userId": "59fb21121207900012774b17",
      "created": 1678299866,
      "updated": 1678299867
    },
    {
      "id": "6408d2d1774b170000ee47d8",
      "text": "　　toB",
      "userId": "59fb21121207900012774b17",
      "created": 1678299857,
      "updated": 1678299858
    },
    {
      "id": "6408d2d2774b170000ee47d9",
      "text": "　　 >法人企業から依頼を受け、メタバース空間上でプロモーションイベントやライブイベント、コンサート、ファンミーティングなどを開催します。クラスターはこのイベントの制作から運営までをワンストップで支援しています。",
      "userId": "59fb21121207900012774b17",
      "created": 1678299858,
      "updated": 1678299878
    },
    {
      "id": "6408d6a5774b170000ee4805",
      "text": "　課題",
      "userId": "59fb21121207900012774b17",
      "created": 1678300837,
      "updated": 1678300837
    },
    {
      "id": "6408d309774b170000ee47e3",
      "text": " 　3D のワールドやイベントを提供するためのサーバーとして、Amazon EC2 を使用しているが、インフラサービス利用者の増加に伴いインスタンスにかかるコストが大きくなっている",
      "userId": "59fb21121207900012774b17",
      "created": 1678299914,
      "updated": 1678300838
    },
    {
      "id": "6408d6a7774b170000ee4806",
      "text": " 対応",
      "userId": "59fb21121207900012774b17",
      "created": 1678300839,
      "updated": 1678300841
    },
    {
      "id": "6408d1aa774b170000ee47cc",
      "text": " 　広範囲のワークロードに対応し優れたコストパフォーマンスを発揮する[ AWS Graviton2] プロセッサ搭載の[EC2 C6g] インスタンスを導入し、インスタンスコスト 40% 減",
      "userId": "59fb21121207900012774b17",
      "created": 1678299563,
      "updated": 1678300841
    },
    {
      "id": "6408d3ca774b170000ee47f3",
      "text": " 　　すごい[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1678300107,
      "updated": 1678300841
    },
    {
      "id": "6408d342774b170000ee47e9",
      "text": "　システムアーキテクチャ",
      "userId": "59fb21121207900012774b17",
      "created": 1678299971,
      "updated": 1678299975
    },
    {
      "id": "6408d347774b170000ee47eb",
      "text": "　　Webサイトのホスティング",
      "userId": "59fb21121207900012774b17",
      "created": 1678299976,
      "updated": 1678299988
    },
    {
      "id": "6408d353774b170000ee47ec",
      "text": "　　3Dアバター情報配信（アバター更新をリアルタイムで同じ空間のユーザーに届ける）",
      "userId": "59fb21121207900012774b17",
      "created": 1678299988,
      "updated": 1678300211
    },
    {
      "id": "6408d375774b170000ee47ef",
      "text": "　　　[DynamoDB]",
      "userId": "59fb21121207900012774b17",
      "created": 1678300022,
      "updated": 1678300215
    },
    {
      "id": "6408d358774b170000ee47ed",
      "text": "　　ユーザーとのメッセージのやり取り",
      "userId": "59fb21121207900012774b17",
      "created": 1678299992,
      "updated": 1678300009
    },
    {
      "id": "6408d36a774b170000ee47ee",
      "text": "　　　API Gatewayの[WebSocket]",
      "userId": "59fb21121207900012774b17",
      "created": 1678300010,
      "updated": 1678300018
    },
    {
      "id": "6408d342774b170000ee47ea",
      "text": "　　主要なWebAPI",
      "userId": "59fb21121207900012774b17",
      "created": 1678299971,
      "updated": 1678300147
    },
    {
      "id": "6408d395774b170000ee47f0",
      "text": "　　 ALBの後段に[Amazon ECS]で動くWebサーバー",
      "userId": "59fb21121207900012774b17",
      "created": 1678300054,
      "updated": 1678300073
    },
    {
      "id": "6408d3a8774b170000ee47f1",
      "text": "　　 DBは[Amazon Aurora]",
      "userId": "59fb21121207900012774b17",
      "created": 1678300073,
      "updated": 1678300081
    },
    {
      "id": "6408d3d4774b170000ee47f4",
      "text": "　　 3D空間のユーザーのリアルタイム情報は[DynamoDB]に入れてる",
      "userId": "59fb21121207900012774b17",
      "created": 1678300116,
      "updated": 1678300173
    },
    {
      "id": "6408d439774b170000ee47f5",
      "text": "　　　　リアルタイム系はDynamoDBを使うのね[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1678300218,
      "updated": 1678300230
    },
    {
      "id": "6408d47c774b170000ee47f6",
      "text": "　　ルームサーバー",
      "userId": "59fb21121207900012774b17",
      "created": 1678300285,
      "updated": 1678300288
    },
    {
      "id": "6408d4ec774b170000ee47f9",
      "text": "　　　>3D 空間内でのワールドやイベントを提供するためのサーバー群です。「cluster」ではユーザーがワールドやイベントに入る場合、システム側では Amazon EC2 が起動しており、ユーザーはその Amazon EC2 に対して接続します",
      "userId": "59fb21121207900012774b17",
      "created": 1678300397,
      "updated": 1678300410
    },
    {
      "id": "6408d4da774b170000ee47f7",
      "text": "　　　今回のコストカットはここの話",
      "userId": "59fb21121207900012774b17",
      "created": 1678300378,
      "updated": 1678300384
    },
    {
      "id": "6408d4e0774b170000ee47f8",
      "text": "　　　Auto Scaling グループを用いて常時十分な量の Amazon EC2 インスタンスを立ち上げている",
      "userId": "59fb21121207900012774b17",
      "created": 1678300384,
      "updated": 1678300441
    },
    {
      "id": "6408d526774b170000ee47fc",
      "text": "　　　>3D 空間内での情報の同期を行うために、私たちは room server というソフトウェアを内製しています。",
      "userId": "59fb21121207900012774b17",
      "created": 1678300454,
      "updated": 1678300471
    },
    {
      "id": "6408d5ec774b170000ee4803",
      "text": "　　　　Go言語製",
      "userId": "59fb21121207900012774b17",
      "created": 1678300653,
      "updated": 1678300664
    },
    {
      "id": "6408d537774b170000ee47ff",
      "text": "　　　 >3D 空間のメタデータやアバター、アイテム、state などの同期を行うものです。",
      "userId": "59fb21121207900012774b17",
      "created": 1678300471,
      "updated": 1678300474
    },
    {
      "id": "6408d539774b170000ee4800",
      "text": "　　 >新しいバージョンの room server がリリースされた場合にスムーズに更新するため、[AWS Systems Manager Automation] を使っています",
      "userId": "59fb21121207900012774b17",
      "created": 1678300474,
      "updated": 1678300496
    },
    {
      "id": "6408d53f774b170000ee4801",
      "text": "　　  >それにより、その時点で起動されている Amazon EC2 で動く room server をすべて新しいバージョンに置き換えて、再デプロイできるようにしています。その際、[AWS AppConfig] の feature flag も活用しています。",
      "userId": "59fb21121207900012774b17",
      "created": 1678300479,
      "updated": 1678300500
    },
    {
      "id": "6408d519774b170000ee47fb",
      "text": "　　　サービス運営において AWS のコストが大きい部分だった",
      "userId": "59fb21121207900012774b17",
      "created": 1678300442,
      "updated": 1678300675
    },
    {
      "id": "6408d5e6774b170000ee4802",
      "text": "　　　GoだったのでCI/CDのビルド設定を変える程度で乗り換えることができた",
      "userId": "59fb21121207900012774b17",
      "created": 1678300646,
      "updated": 1678300699
    },
    {
      "id": "6408d186774b170000ee47c8",
      "text": "　月1でAWSとミーティング",
      "userId": "59fb21121207900012774b17",
      "created": 1678299527,
      "updated": 1678299627
    },
    {
      "id": "6408d278774b170000ee47d4",
      "text": "　>「cluster」は過去の実績として「イベント同時接続数 10 万人」と発表していますが、この数字がさらに大きくなっても、問題なくサービスを運営し続けられるアーキテクチャにしていきたいです。",
      "userId": "59fb21121207900012774b17",
      "created": 1678299769,
      "updated": 1678299770
    },
    {
      "id": "6408d27a774b170000ee47d5",
      "text": "　 素直に受け取るなら、現状はこれぐらいの規模が限界ということ[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1678299770,
      "updated": 1678299800
    },
    {
      "id": "6408d1e3774b170000ee47cf",
      "text": "　>もともと「cluster」は、IoT などのセンシングデバイスがサーバーにデータを送るために策定された [MQTT] プロトコルを、3D 空間のデータの同期に使うという発想から生まれたサービスでした。",
      "userId": "59fb21121207900012774b17",
      "created": 1678299620,
      "updated": 1678299767
    },
    {
      "id": "6408d1db774b170000ee47ce",
      "text": "  https://recruit.cluster.mu/ でも昔書かれていた[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1678299611,
      "updated": 1678299747
    },
    {
      "id": "6408d249774b170000ee47d3",
      "text": "",
      "userId": "59fb21121207900012774b17",
      "created": 1678299722,
      "updated": 1678299722
    }
  ]
}