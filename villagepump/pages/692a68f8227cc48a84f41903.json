{
  "id": "692a68f8227cc48a84f41903",
  "title": "ページの背景画像を変更するUserScript",
  "created": 1764387066,
  "updated": 1764388495,
  "lines": [
    {
      "id": "692a68f8227cc48a84f41903",
      "text": "ページの背景画像を変更するUserScript",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387066,
      "updated": 1764387066
    },
    {
      "id": "692a68fa0000000000866de7",
      "text": "このスクリプトは、[/customize/背景画像を設定するUserScript]のリメイクです",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387066,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866de8",
      "text": "挙動は少しだけ違います",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866de9",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866dea",
      "text": "table:list",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866deb",
      "text": "\tラベル\tURL\tコメント",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866dec",
      "text": "  1 サンタ衣装のふーこさん\t[https://i.gyazo.com/a9362ce5ef7fa9ec880efb98089c7fc0.png]\tふーこさん",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866ded",
      "text": "  2 サンタ衣装のましろさん\t[https://i.gyazo.com/15a000710dfc69c3b8b75cbcd1df6599.png]\tましろさん",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866dee",
      "text": "  3 サンタ衣装のひよりさん\t[https://i.gyazo.com/4647aaf2ee0cdb72a2556a5b6cef9b7c.png]\tひよりさん",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866def",
      "text": "\t 4 コルセットスカートのふーこさん\t[https://i.gyazo.com/e75528ee087d6bab9cf5f6e168f361a7.png]  ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866df0",
      "text": "\t 5 マジシャンましろさん\t[https://i.gyazo.com/ef9ead5cecd3848b1a83c4ff200483e3.png]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866df1",
      "text": "\t 6 コルセットスカートのひよりさん\t[https://i.gyazo.com/773076671263b4110fd88dd3acb1e1a9.png]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866df2",
      "text": " 7 コルセットスカートのましろさん\t[https://i.gyazo.com/89e6a4f1dec3eea1c3d7366b5e2551b0.png]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866df3",
      "text": " 8 セーラー服のふーこさん\t[https://i.gyazo.com/2839655d6f5772b5ee57620c028b794f.png]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866df4",
      "text": " 9 セーラー服のましろさん\t[https://i.gyazo.com/ab64a525d8eb6a660a19422fd476e503.png]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866df5",
      "text": " 10 セーラー服のひよりさん\t[https://i.gyazo.com/2a47ab88ff90697be1d54688483e6abd.png]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a690e0000000000866df6",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387086,
      "updated": 1764387086
    },
    {
      "id": "692a69380000000000866e74",
      "text": "使い方",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387128,
      "updated": 1764387519
    },
    {
      "id": "692a6abe000000000039c91b",
      "text": " 1. [テーブル記法]で、`table:list`を作成する",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387519,
      "updated": 1764388485
    },
    {
      "id": "692a6abe000000000039c91c",
      "text": " 2.  APIから `list.csv`にアクセスできることを確認",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387519,
      "updated": 1764387519
    },
    {
      "id": "692a6abe000000000039c91d",
      "text": "　3. [自分のページ]の`script.js`に",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387519,
      "updated": 1764388495
    },
    {
      "id": "692a6a6b000000000039c916",
      "text": "  code:sample-script.js",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387436,
      "updated": 1764387528
    },
    {
      "id": "692a6a6d000000000039c917",
      "text": "   import { setupWallpaperMenu } from \"/api/code/villagepump/ページの背景画像を変更するUserScript/script.js\";",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387437,
      "updated": 1764387528
    },
    {
      "id": "692a6a6d000000000039c919",
      "text": "     setupWallpaperMenu(\"/api/table/villagepump/ページの背景画像を変更するUserScript/list.csv\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387437,
      "updated": 1764387528
    },
    {
      "id": "692a6a6d000000000039c91a",
      "text": "  を追加",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387437,
      "updated": 1764387563
    },
    {
      "id": "692a6aea000000000039c920",
      "text": "  setupWallpaperMenu() 引数にはテーブル記法のAPI（CSVファイル）を指定する",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387563,
      "updated": 1764387563
    },
    {
      "id": "692a6aea000000000039c921",
      "text": "  リロード",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387563,
      "updated": 1764387563
    },
    {
      "id": "692a6aea000000000039c922",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387563,
      "updated": 1764387563
    },
    {
      "id": "692a6b99000000000039c929",
      "text": "実行例",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387737,
      "updated": 1764387746
    },
    {
      "id": "692a6b2b000000000039c926",
      "text": "[https://gyazo.com/d1fcd8aaab7e1aadd8e111db4baf40b6]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387628,
      "updated": 1764387726
    },
    {
      "id": "692a6b8e000000000039c928",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387726,
      "updated": 1764387726
    },
    {
      "id": "692a6b2b000000000039c927",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387628,
      "updated": 1764387628
    },
    {
      "id": "692a6aea000000000039c923",
      "text": "注意事項",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387563,
      "updated": 1764387563
    },
    {
      "id": "692a6aea000000000039c924",
      "text": "　リロード時にCSVファイルを読み込んで、メニューを作り直すので、すこし重い",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387563,
      "updated": 1764387563
    },
    {
      "id": "692a6aea000000000039c925",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387563,
      "updated": 1764387563
    },
    {
      "id": "692a6aca000000000039c91f",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387531,
      "updated": 1764387531
    },
    {
      "id": "692a69100000000000866df7",
      "text": "code:script.js",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387088,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866df8",
      "text": " // NOTE: This file is an ES Module.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866df9",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866dfa",
      "text": " /**",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866dfb",
      "text": "  * Creates a Scrapbox page menu to set a wallpaper from a list of images in a CSV file.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866dfc",
      "text": "  * @param {string} csvUrl - The URL of the CSV file containing image names and URLs.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866dfd",
      "text": "  */",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866dfe",
      "text": " export function setupWallpaperMenu(csvUrl) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866dff",
      "text": "   // Run only in a Scrapbox environment.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e00",
      "text": "   if (typeof scrapbox === \"undefined\") {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e01",
      "text": "     console.log(\"This script is intended to run in a Scrapbox environment.\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e02",
      "text": "     return;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e03",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e04",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e05",
      "text": "   scrapbox.PageMenu.addMenu({",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e06",
      "text": "     title: \"壁紙\",",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e07",
      "text": "     image: \"https://gyazo.com/8a40fddd4f7225e0226401afff3e5795/raw\",",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e08",
      "text": "     onClick: async () => {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e09",
      "text": "       const menu = scrapbox.PageMenu(\"壁紙\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e0a",
      "text": "       menu.addItem({ title: \"Now loading...\", onClick: () => null });",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e0b",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e0c",
      "text": "       try {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e0d",
      "text": "         const text = await fetchLists(csvUrl);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e0e",
      "text": "         const urls = [];",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e0f",
      "text": "         const menuItems = [];",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e10",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e11",
      "text": "         // 1. Prepare menu items and a list of valid URLs from the fetched text.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e12",
      "text": "         text.split(\"\\n\").forEach(line => {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e13",
      "text": "           if (!line) return;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e14",
      "text": "           const res = line.split(\",\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e15",
      "text": "           if (res.length < 2 || !res[1]) return;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e16",
      "text": "           ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e17",
      "text": "           const name = res[0].length ? res[0] : \"unknown\";",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e18",
      "text": "           const imageUrl = res[1].replace(/[[\\\\\\]]/g, \"\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e19",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e1a",
      "text": "           if (imageUrlRegex.test(imageUrl)) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e1b",
      "text": "             urls.push(imageUrl);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e1c",
      "text": "             menuItems.push({",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e1d",
      "text": "               title: name,",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e1e",
      "text": "               onClick: () => { changeCss(imageUrl); }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e1f",
      "text": "             });",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e20",
      "text": "           }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e21",
      "text": "         });",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e22",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e23",
      "text": "         // 2. Clear the \"Now loading...\" message.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e24",
      "text": "         menu.removeAllItems();",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e25",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e26",
      "text": "         // 3. Add the new menu items.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e27",
      "text": "         menu.addItem({",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e28",
      "text": "           title: \"消す\",",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e29",
      "text": "           onClick: () => { changeCss(null); }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e2a",
      "text": "         });",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e2b",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e2c",
      "text": "         menuItems.forEach(item => menu.addItem(item));",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e2d",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e2e",
      "text": "         if (urls.length > 0) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e2f",
      "text": "           menu.addItem({",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e30",
      "text": "             title: \"ランダム\",",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e31",
      "text": "             onClick: () => { changeCss(choice(urls)); }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e32",
      "text": "           });",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e33",
      "text": "         }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e34",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e35",
      "text": "       } catch (error) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e36",
      "text": "         console.error(\"Failed to load wallpaper list:\", error);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e37",
      "text": "         menu.removeAllItems();",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e38",
      "text": "         menu.addItem({ title: \"Error: Failed to load\", onClick: () => null });",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e39",
      "text": "       }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e3a",
      "text": "     }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e3b",
      "text": "   });",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e3c",
      "text": " }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e3d",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e3e",
      "text": " // --- Helper Functions (exported for testing) ---",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e3f",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e40",
      "text": " export const fetchLists = async (url) => {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e41",
      "text": "   const response = await fetch(url);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e42",
      "text": "   if (!response.ok) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e43",
      "text": "     throw new Error(\"Network response was not ok\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e44",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e45",
      "text": "   const text = await response.text();",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e46",
      "text": "   // Assuming the CSV has a header row to be skipped (slice(1))",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e47",
      "text": "   // and lines might start with a comma to be removed.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e48",
      "text": "   return text.split(\"\\n\").slice(1)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e49",
      "text": "     .map(line => line.replace(/^,/, \"\"))",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e4a",
      "text": "     .join(\"\\n\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e4b",
      "text": " };",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e4c",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e4d",
      "text": " export const changeCss = (imageUrl) => {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e4e",
      "text": "   const styleId = \"__bgi__\";",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e4f",
      "text": "   let style = document.getElementById(styleId);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e50",
      "text": "   if (style) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e51",
      "text": "     style.remove();",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e52",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e53",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e54",
      "text": "   // If imageUrl is not provided, simply remove the style and exit.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e55",
      "text": "   if (!imageUrl) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e56",
      "text": "     return;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e57",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e58",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e59",
      "text": "   const css = `",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e5a",
      "text": "     .page {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e5b",
      "text": "       background-image: url(\"${imageUrl}\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e5c",
      "text": "       background-repeat: repeat-y;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e5d",
      "text": "       background-attachment: scroll;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e5e",
      "text": "       background-position: right top;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e5f",
      "text": "       background-size: 60% auto;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e60",
      "text": "     }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e61",
      "text": "   `;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e62",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e63",
      "text": "   style = document.createElement(\"style\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e64",
      "text": "   style.setAttribute(\"id\", styleId);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e65",
      "text": "   style.appendChild(document.createTextNode(css.trim()));",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e66",
      "text": "   document.head.appendChild(style);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e67",
      "text": " };",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e68",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e69",
      "text": " export const choice = (arr) => {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e6a",
      "text": "   if (!arr || arr.length === 0) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e6b",
      "text": "     return null;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e6c",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e6d",
      "text": "   return arr[Math.floor(Math.random() * arr.length)];",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e6e",
      "text": " };",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e6f",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e70",
      "text": " // A more robust regex for image URLs.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e71",
      "text": " export const imageUrlRegex = /(https?:\\/\\/[\\w\\-\\.\\/?\\#\\:\\%\\u3000-\\u30FE\\u4E00-\\u9FA0\\uFF01-\\uFFE3\\[\\]]+)\\.(jpg|jpeg|gif|png|webp|svg)/i;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e72",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387123
    },
    {
      "id": "692a69330000000000866e73",
      "text": "#井戸端アドベントカレンダー2025",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387123,
      "updated": 1764387932
    },
    {
      "id": "692a6c57000000000039c92b",
      "text": "[UserScript.icon]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387928,
      "updated": 1764387958
    },
    {
      "id": "692a6c70000000000039c92c",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764387953,
      "updated": 1764387953
    }
  ]
}