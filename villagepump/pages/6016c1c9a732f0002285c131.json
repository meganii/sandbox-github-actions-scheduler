{
  "id": "6016c1c9a732f0002285c131",
  "title": "alert()やconfirm()を回避する",
  "created": 1612104138,
  "updated": 1633702745,
  "lines": [
    {
      "id": "6016c1c9a732f0002285c131",
      "text": "alert()やconfirm()を回避する",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104165
    },
    {
      "id": "6016c1cee5172d0000ce31fb",
      "text": "[alert()]で出てきたOKボタンとかキャンセルボタンってjavascriptで取得できるんですかね…？[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104145
    },
    {
      "id": "6016c1cee5172d0000ce31fc",
      "text": "\tOKとキャンセルがあるのは[confirm()]だった",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6016c1cee5172d0000ce31fd",
      "text": "\tJSからクリックしたい",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6016c1cee5172d0000ce31fe",
      "text": "\t僕も昨日それ思ってた[dnin.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1613112371
    },
    {
      "id": "6016c1cee5172d0000ce31ff",
      "text": "\tブラウザ固有の物なので無理では[kuuote.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6016c1cee5172d0000ce3200",
      "text": "\tおそらくできないし、てきたらもはや警告windowの意味をなさない[takker.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6016c1cee5172d0000ce3201",
      "text": " \tユーザへ警告を出さずに、ありとあらゆる危険な操作を勝手にできてしまうことになる",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6016c1cee5172d0000ce3202",
      "text": "\t\t[/icons/たしかに.icon][yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6016c1cee5172d0000ce3203",
      "text": " [開発者コンソール]でalert()やconfirm()を上書きすると回避できるというworkaround",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6016c1cee5172d0000ce3204",
      "text": " \tcode:js",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6018d41c1280f00000b84d4a",
      "text": " \t const originalConfirm = window.confirm;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1612239915,
      "updated": 1612239930
    },
    {
      "id": "6016c1cee5172d0000ce3205",
      "text": " \t window.confirm = (nope) => { return true; }",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612239914
    },
    {
      "id": "6016c1cee5172d0000ce3206",
      "text": "\t\t[https://stackoverflow.com/a/563908/7218932 Is there a way to simulate a click on an alert in JavaScript? - Stack Overflow]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6016c1cee5172d0000ce3207",
      "text": "\t\t本当に[その発想はなかった][takker.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6016c1cee5172d0000ce3208",
      "text": "\t\tん？てことはこれを使えばScrapboxページの自動削除が可能に……？",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6018d4511280f00000b84d4b",
      "text": "\t\t 2021-02-02 13:26:23 自動削除できた。[/icons/こわい.icon][takker.icon][yuki_minoh.icon]",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1612239968,
      "updated": 1633622464
    },
    {
      "id": "615f201f6668720000caa902",
      "text": "\t\t 　邪悪なハックだ。。。[yuki_minoh.icon]",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633624096,
      "updated": 1633624107
    },
    {
      "id": "6016c1cee5172d0000ce3209",
      "text": "\t\tというかこんなことがまかり通っちゃう[JavaScript]怖すぎだろ……",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "6016c1cee5172d0000ce320a",
      "text": "\t\t なんでこんな地雷言語がweb programmingの第一線で使われ続けているんだ",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104138,
      "updated": 1612104143
    },
    {
      "id": "60195e7ee5172d00001488eb",
      "text": "\t\t よくわからないけど[const]みたいに上書きできないようにはなってないんだろうか？[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612275327,
      "updated": 1612275354
    },
    {
      "id": "601966574bb2e20000a0c7e7",
      "text": "\t\t  JavaScriptの仕様としてwindowオブジェクトがGlobal Scopeという物があって、オブジェクトの中身は普通書き換え可能なので(つらい)",
      "userId": "5e8944948a182900174bb2e2",
      "created": 1612277199,
      "updated": 1612277308
    },
    {
      "id": "6019b926e5172d0000d1eafa",
      "text": "\t\t  \t[/icons2/へえ〜.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612298534,
      "updated": 1612298539
    },
    {
      "id": "601966c54bb2e20000a0c7e8",
      "text": "\t\t  Object.freezeを適用したら凍結はできるけど、多分やるとグローバルスコープを書き換える前提になっているものが軒並み死ぬ",
      "userId": "5e8944948a182900174bb2e2",
      "created": 1612277308,
      "updated": 1612277344
    },
    {
      "id": "615f20c46668720000caa904",
      "text": "\t\t   windowを凍らせたら変数とか関数とか何も登録できなくなりそう[yuki_minoh.icon]",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633624261,
      "updated": 1633624280
    },
    {
      "id": "615f1e046668720000caa8f8",
      "text": "\t\t  これが原因やな[yuki_minoh.icon]",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633623556,
      "updated": 1633623563
    },
    {
      "id": "615f1df56668720000caa8f6",
      "text": "\t\t  [https://gyazo.com/0e1a1951b9e326dc4cf8fab8f4076300]",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633623541,
      "updated": 1633623551
    },
    {
      "id": "615f1dff6668720000caa8f7",
      "text": "　　　　　デフォルトが「編集可能」「書き込み可能」になっている",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633623551,
      "updated": 1633623945
    },
    {
      "id": "615f1f7a6668720000caa8ff",
      "text": "　　　　　[https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty Object.defineProperty() - JavaScript | MDN]",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633623930,
      "updated": 1633623931
    },
    {
      "id": "615f1e3d6668720000caa8f9",
      "text": "    `Object.defineProperty(window, \"confirm\", {value: _confirm, writable:false, configurable:false})`で見た目ロックしたみたいにはできますね",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633623613,
      "updated": 1633623658
    },
    {
      "id": "615f1e6a6668720000caa8fa",
      "text": "    　[https://gyazo.com/cdafe2c65897945dfd861153acdd3f67]",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633623658,
      "updated": 1633623685
    },
    {
      "id": "615f1e856668720000caa8fb",
      "text": "　　　　　 confirmを常にtrue出すように上書きしてもconfirmダイアログが（ちゃんと表示されて）falseを返す",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633623685,
      "updated": 1633623996
    },
    {
      "id": "615f204a6668720000caa903",
      "text": "　　　　　 事前に`var _confirm = window.confirm`をやってます",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633624138,
      "updated": 1633624141
    },
    {
      "id": "615f1eef6668720000caa8fc",
      "text": "　　　　　ただ、この後Object.definePropertyをもう一回実行されると突破されますね笑",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633623791,
      "updated": 1633623904
    },
    {
      "id": "615f1f1a6668720000caa8fd",
      "text": "　　　　　　対抗するには`Object`への参照を吹き飛ばす他ない",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633623835,
      "updated": 1633623895
    },
    {
      "id": "615f1f5a6668720000caa8fe",
      "text": "　　　　　　[https://qiita.com/shellyln/items/af200a1953991de1698d JavaScriptのプロトタイプ汚染攻撃対策は難しい - Qiita]",
      "userId": "5ee7f26f1c0c850025666872",
      "created": 1633623898,
      "updated": 1633624047
    },
    {
      "id": "6016c1dde5172d000078f1b6",
      "text": " [TamperMonkey]が使えた",
      "userId": "612309a719e67d001dd0ca1c",
      "created": 1612104153,
      "updated": 1631965625
    },
    {
      "id": "6145d1b8d0ca1c0000f3fd6f",
      "text": " 　[Linkclump]と組み合わせてページを一括削除できる",
      "userId": "612309a719e67d001dd0ca1c",
      "created": 1631965625,
      "updated": 1631965638
    },
    {
      "id": "6145d1b3d0ca1c0000f3fd6e",
      "text": " もしかして[FooView]ってこれを使ってダイアログ無視してるのか?",
      "userId": "612309a719e67d001dd0ca1c",
      "created": 1631965619,
      "updated": 1631965619
    },
    {
      "id": "6016c1dbe5172d000078f1b5",
      "text": "from [2021/01/29]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104151,
      "updated": 1612104151
    },
    {
      "id": "6016c1dfe5172d000078f1b7",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1612104155,
      "updated": 1612104155
    }
  ]
}