{
  "id": "5fa9355df9d4a500388709c3",
  "title": "d3-piechart-button",
  "created": 1604924794,
  "updated": 1606992168,
  "lines": [
    {
      "id": "5fa9355df9d4a500388709c3",
      "text": "d3-piechart-button",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924794,
      "updated": 1605365915
    },
    {
      "id": "5fa935795b98c200008448fd",
      "text": "[D3.js]で円グラフ（pie chart）の描画テストをする[アイコンボタン]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924794,
      "updated": 1605082379
    },
    {
      "id": "5fa936925b98c20000ced6e3",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604925074,
      "updated": 1604925074
    },
    {
      "id": "5fa936b45b98c20000ced6e4",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604925109,
      "updated": 1604925109
    },
    {
      "id": "5fa9357a5b98c200008448ff",
      "text": "↓実行ボタン",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844900",
      "text": "[d3-piechart-button.icon]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605365918
    },
    {
      "id": "5fa9357a5b98c20000844901",
      "text": "ページの一番下に表示されるんですね｡",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604926107
    },
    {
      "id": "5fa93a9bd4387500002dbc09",
      "text": "　表示場所どうやって制御するのか、わからんのです[suto3.icon]",
      "userId": "5fa258bdb102120024d43875",
      "created": 1604926107,
      "updated": 1604926613
    },
    {
      "id": "5fa93c575b98c20000c1cc90",
      "text": " エディタ領域の一番下に表示するように変更",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604926551,
      "updated": 1605082181
    },
    {
      "id": "5fab9c485b98c2000056602c",
      "text": " <div>タグのid属性のところへ配置できそうだが、Scrapbox でどうやって<div>タグを作るのかがわからない",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605082184,
      "updated": 1605082362
    },
    {
      "id": "5fab9c015b98c2000056602b",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605082113,
      "updated": 1605082113
    },
    {
      "id": "5fa936e75b98c20000c1e436",
      "text": "円グラフを消すには、再読み込み（リロード）してください",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604925160,
      "updated": 1604925233
    },
    {
      "id": "5faba2b05b98c20000566053",
      "text": "　あと、これ以外に消す方法をご存知でしたら、教えて下さい。",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605083825,
      "updated": 1605083905
    },
    {
      "id": "5fabb2671280f000005220ec",
      "text": "　 見えなくするだけであれば、`style.display='none'`で消せます",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605087848,
      "updated": 1605087930
    },
    {
      "id": "5fabb2ba1280f000005220ed",
      "text": "　 DOMの削除なら`element.parentNode.removeChild(element)`です",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605087931,
      "updated": 1605088001
    },
    {
      "id": "5fabb22f1280f000005220ea",
      "text": "　[Page Menu]で表示を切り替えるボタンを作るとかどうでしょう？",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1605087791,
      "updated": 1646400188
    },
    {
      "id": "5fabb2621280f000005220eb",
      "text": "　もう一度押すと消えるようにしました",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605087843,
      "updated": 1605144603
    },
    {
      "id": "5fac901a1280f000001d3eff",
      "text": "　\t更にもう一度押すとエラーになってしまいますが……",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605144603,
      "updated": 1605144616
    },
    {
      "id": "5fae92295b98c20000c942cf",
      "text": "　\t　<script>タグは消せるけど、読み込まれた JavaScript は消えないんですね…",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605276202,
      "updated": 1605276275
    },
    {
      "id": "5fb4cb551280f00000a540d9",
      "text": "  ESModule版でon/offの切り替えができるようにしました",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605684053,
      "updated": 1605684089
    },
    {
      "id": "5fb4d1871280f000008c07b2",
      "text": "   cursorの縦棒(`<svg>`で作られている)が消えるバグがあったので直しました",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605685640,
      "updated": 1605685663
    },
    {
      "id": "5fa936e75b98c20000c1e437",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604925160,
      "updated": 1604925160
    },
    {
      "id": "5fa9357a5b98c20000844902",
      "text": "↓アイコン用画像",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fc8c1275b98c20000114da3",
      "text": "[https://gyazo.com/58190a627c321348da36503278c6a731]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1606992167,
      "updated": 1606992168
    },
    {
      "id": "5faff1a85b98c200005c7f45",
      "text": "[https://gyazo.com/222c66942292c1a2fa6e9c3569cfe4bb]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605366185,
      "updated": 1605366186
    },
    {
      "id": "5faff1a95b98c200005c7f46",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605366186,
      "updated": 1605366186
    },
    {
      "id": "5fa9357a5b98c20000844906",
      "text": "code:button.js",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844907",
      "text": " (function () {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605087269
    },
    {
      "id": "5fa9357a5b98c20000844908",
      "text": "   let D3js = document.getElementById('__D3js__')",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844909",
      "text": "   if (!D3js) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605120230
    },
    {
      "id": "5fa9357a5b98c2000084490c",
      "text": "     D3js = document.createElement(\"script\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084490d",
      "text": "     D3js.id = '__D3js__'",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605111160
    },
    {
      "id": "5fa9357a5b98c2000084490f",
      "text": "     D3js.src = '//cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js'",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605111139
    },
    {
      "id": "5fa9357a5b98c20000844910",
      "text": "     document.head.appendChild(D3js);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605081964
    },
    {
      "id": "5fa9357a5b98c20000844911",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844912",
      "text": "  ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844913",
      "text": "   let chart =  document.getElementById('__pie__')",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844914",
      "text": "   if (!chart) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605120229
    },
    {
      "id": "5fa9357a5b98c20000844917",
      "text": "     chart = document.createElement(\"script\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844918",
      "text": "     chart.id = '__pie__'",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605111153
    },
    {
      "id": "5fa9357a5b98c2000084491a",
      "text": "     chart.src = '/api/code/villagepump/d3-piechart-button/d3script.js'",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605365958
    },
    {
      "id": "5fa9357a5b98c2000084491b",
      "text": "     document.head.appendChild(chart);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605081954
    },
    {
      "id": "5fa9357a5b98c2000084491c",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605144494
    },
    {
      "id": "5fac8f6c1280f00000fc4c25",
      "text": "   // 既にchartがある場合は削除する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605144428,
      "updated": 1605144428
    },
    {
      "id": "5fac8f751280f00000fc4c26",
      "text": "   chart.parentNode.removeChild(chart);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605144438,
      "updated": 1605144453
    },
    {
      "id": "5fac8f921280f00000fc4c34",
      "text": "   document.getElementById('editor').getElementsByTagName('svg')?.[0]?.remove();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605144469,
      "updated": 1605144515
    },
    {
      "id": "5fa9357a5b98c2000084491d",
      "text": " })()",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605087296
    },
    {
      "id": "5fa9357a5b98c20000844920",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605144501
    },
    {
      "id": "5fa9357a5b98c20000844921",
      "text": "code:d3script.js",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605365970
    },
    {
      "id": "5fa9357a5b98c20000844922",
      "text": " // データセット",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844923",
      "text": " const dataset = [",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844924",
      "text": "   { \"name\": \"A\", \"value\": 5 },",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924913
    },
    {
      "id": "5fa9357a5b98c20000844925",
      "text": "   { \"name\": \"B\", \"value\": 6 },",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844926",
      "text": "   { \"name\": \"C\", \"value\": 8 },",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844927",
      "text": "   { \"name\": \"D\", \"value\": 1 },",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844928",
      "text": "   { \"name\": \"E\", \"value\": 2 },",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844929",
      "text": "   { \"name\": \"F\", \"value\": 6 },",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084492a",
      "text": "   { \"name\": \"G\", \"value\": 8 },",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084492b",
      "text": "   { \"name\": \"H\", \"value\": 6 },",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084492c",
      "text": "   { \"name\": \"I\", \"value\": 10 },",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084492d",
      "text": "   { \"name\": \"J\", \"value\": 9 }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084492e",
      "text": " ] ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084492f",
      "text": " const width = 600 // グラフの幅",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844930",
      "text": " const height = 600 // グラフの高さ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844931",
      "text": " const radius = Math.min(width, height) / 2 - 10 ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844932",
      "text": " // SVG領域の設定",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844933",
      "text": " const svg = d3.select(\"#editor\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1605081936
    },
    {
      "id": "5fa9357a5b98c20000844934",
      "text": "   .append(\"svg\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844935",
      "text": "   .attr(\"width\", width)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844936",
      "text": "   .attr(\"height\", height)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844937",
      "text": " const g = svg.append(\"g\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844938",
      "text": "   .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844939",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084493a",
      "text": " // カラーの設定",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084493b",
      "text": " const color = d3.scaleOrdinal()",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084493c",
      "text": "   .range([\"#DC3912\", \"#3366CC\", \"#109618\", \"#FF9900\", \"#990099\"])",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084493d",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084493e",
      "text": " // パイチャートデータセット用関数の設定",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084493f",
      "text": " const pie = d3.pie()",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844940",
      "text": "   .value((d) => d.value)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844941",
      "text": "   .sort(null)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844942",
      "text": " // パイチャートSVG要素の設定",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844943",
      "text": " const pieGroup = g.selectAll(\".pie\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844944",
      "text": "   .data(pie(dataset))",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844945",
      "text": "   .enter()",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844946",
      "text": "   .append(\"g\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844947",
      "text": "   .attr(\"class\", \"pie\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844948",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844949",
      "text": " const arc = d3.arc()",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084494a",
      "text": "   .outerRadius(radius)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084494b",
      "text": "   .innerRadius(radius / 2)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084494c",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084494d",
      "text": " pieGroup.append(\"path\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084494e",
      "text": "   .attr(\"d\", arc)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084494f",
      "text": "   .attr(\"fill\", (d) => color(d.index) )",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844950",
      "text": "   .attr(\"opacity\", 0.75)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844951",
      "text": "   .attr(\"stroke\", \"white\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844952",
      "text": " // パイチャートテキストSVG要素の設定",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844953",
      "text": " const text = d3.arc()",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844954",
      "text": "   .outerRadius(radius - 30)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844955",
      "text": "   .innerRadius(radius - 30)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844956",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844957",
      "text": " pieGroup.append(\"text\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844958",
      "text": "   .attr(\"fill\", \"black\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c20000844959",
      "text": "   .attr(\"transform\", (d) => \"translate(\" + text.centroid(d) + \")\" )",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084495a",
      "text": "   .attr(\"dy\", \"5px\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084495b",
      "text": "   .attr(\"font\", \"10px\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084495c",
      "text": "   .attr(\"text-anchor\", \"middle\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084495d",
      "text": "   .text((d) => d.data.name);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fa9357a5b98c2000084495e",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fb4b1b51280f000007931b1",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605677493,
      "updated": 1605677493
    },
    {
      "id": "5fb4b1b51280f000007931b2",
      "text": "code:button2.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605677493,
      "updated": 1605677493
    },
    {
      "id": "5fb4b1b51280f000007931b3",
      "text": " import {installCDN} from '/api/code/villagepump/install-CDN/script.js';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605677493,
      "updated": 1605685576
    },
    {
      "id": "5fb4b1b51280f000007931b4",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605677493,
      "updated": 1605677493
    },
    {
      "id": "5fb4b1b51280f000007931b5",
      "text": " export async function execute() {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605677493,
      "updated": 1605685543
    },
    {
      "id": "5fb4b1b51280f000007931b6",
      "text": " \tawait installCDN({id: '__D3js__', src: '//cdnjs.cloudflare.com/ajax/libs/d3/6.2.0/d3.min.js'});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605677493,
      "updated": 1605685524
    },
    {
      "id": "5fb4b5a01280f0000042e21f",
      "text": " \tconst {PieChart} = await import('/api/code/villagepump/d3-piechart-button/pieChart.js');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678496,
      "updated": 1605685529
    },
    {
      "id": "5fb4b5b11280f0000042e220",
      "text": " \tconst pieChart = new PieChart({id: '__pie__'});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678513,
      "updated": 1605685531
    },
    {
      "id": "5fb4cab91280f00000fd9075",
      "text": " \tif (pieChart.hasChart()) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605683897,
      "updated": 1605685532
    },
    {
      "id": "5fb4cade1280f00000fd9076",
      "text": "     \tpieChart.remove();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605683934,
      "updated": 1605685533
    },
    {
      "id": "5fb4cae51280f00000fd9078",
      "text": "     \treturn;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605683941,
      "updated": 1605685534
    },
    {
      "id": "5fb4cae21280f00000fd9077",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605683939,
      "updated": 1605685540
    },
    {
      "id": "5fb4b5ba1280f0000042e221",
      "text": " \tpieChart.draw();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678523,
      "updated": 1605685538
    },
    {
      "id": "5fb4b1b51280f000007931b8",
      "text": " }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605677493,
      "updated": 1605677493
    },
    {
      "id": "5fa9357a5b98c2000084495f",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924795,
      "updated": 1604924795
    },
    {
      "id": "5fb4b4471280f0000042e1bd",
      "text": "code:pieChart.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678151,
      "updated": 1605678169
    },
    {
      "id": "5fb4b4681280f0000042e1eb",
      "text": " // データセット",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678185,
      "updated": 1605678186
    },
    {
      "id": "5fb4b46a1280f0000042e1ed",
      "text": " const dataset = [",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1ee",
      "text": "   { \"name\": \"A\", \"value\": 5 },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1ef",
      "text": "   { \"name\": \"B\", \"value\": 6 },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1f0",
      "text": "   { \"name\": \"C\", \"value\": 8 },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1f1",
      "text": "   { \"name\": \"D\", \"value\": 1 },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1f2",
      "text": "   { \"name\": \"E\", \"value\": 2 },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1f3",
      "text": "   { \"name\": \"F\", \"value\": 6 },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1f4",
      "text": "   { \"name\": \"G\", \"value\": 8 },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1f5",
      "text": "   { \"name\": \"H\", \"value\": 6 },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1f6",
      "text": "   { \"name\": \"I\", \"value\": 10 },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1f7",
      "text": "   { \"name\": \"J\", \"value\": 9 }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1f8",
      "text": " ] ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1f9",
      "text": " const width = 600 // グラフの幅",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1fa",
      "text": " const height = 600 // グラフの高さ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b46a1280f0000042e1fb",
      "text": " const radius = Math.min(width, height) / 2 - 10 ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678186,
      "updated": 1605678190
    },
    {
      "id": "5fb4b4681280f0000042e1ec",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678185,
      "updated": 1605678185
    },
    {
      "id": "5fb4b4701280f0000042e1fc",
      "text": " export class PieChart {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678193,
      "updated": 1605678206
    },
    {
      "id": "5fb4b4821280f0000042e1fe",
      "text": "\t  constructor({id}) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678210,
      "updated": 1605678531
    },
    {
      "id": "5fb4b5401280f0000042e21e",
      "text": "\t  \tthis.id = id;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678400,
      "updated": 1605678535
    },
    {
      "id": "5fb4b53f1280f0000042e21d",
      "text": "\t  }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678399,
      "updated": 1605678399
    },
    {
      "id": "5fb4b4d11280f0000042e20e",
      "text": "   draw() {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678290,
      "updated": 1605678322
    },
    {
      "id": "5fb4b4601280f0000042e1bf",
      "text": "     // SVG領域の設定",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678279,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1c0",
      "text": "     const svg = d3.select(\"#editor\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1c1",
      "text": "       .append(\"svg\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678284,
      "updated": 1605678309
    },
    {
      "id": "5fb4b5381280f0000042e21c",
      "text": "       .attr(\"id\", this.id)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678392,
      "updated": 1605683529
    },
    {
      "id": "5fb4b4601280f0000042e1c2",
      "text": "       .attr(\"width\", width)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678284,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1c3",
      "text": "       .attr(\"height\", height)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678284,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1c4",
      "text": "     const g = svg.append(\"g\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1c5",
      "text": "       .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678281,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1c6",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1c7",
      "text": "     // カラーの設定",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1c8",
      "text": "     const color = d3.scaleOrdinal()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1c9",
      "text": "       .range([\"#DC3912\", \"#3366CC\", \"#109618\", \"#FF9900\", \"#990099\"])",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1ca",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1cb",
      "text": "     // パイチャートデータセット用関数の設定",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1cc",
      "text": "     const pie = d3.pie()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1cd",
      "text": "       .value((d) => d.value)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1ce",
      "text": "       .sort(null)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1cf",
      "text": "     // パイチャートSVG要素の設定",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1d0",
      "text": "     const pieGroup = g.selectAll(\".pie\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1d1",
      "text": "       .data(pie(dataset))",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1d2",
      "text": "       .enter()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1d3",
      "text": "       .append(\"g\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1d4",
      "text": "       .attr(\"class\", \"pie\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1d5",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1d6",
      "text": "     const arc = d3.arc()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1d7",
      "text": "       .outerRadius(radius)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1d8",
      "text": "       .innerRadius(radius / 2)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1d9",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1da",
      "text": "     pieGroup.append(\"path\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1db",
      "text": "       .attr(\"d\", arc)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1dc",
      "text": "       .attr(\"fill\", (d) => color(d.index) )",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1dd",
      "text": "       .attr(\"opacity\", 0.75)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1de",
      "text": "       .attr(\"stroke\", \"white\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1df",
      "text": "     // パイチャートテキストSVG要素の設定",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1e0",
      "text": "     const text = d3.arc()",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1e1",
      "text": "       .outerRadius(radius - 30)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1e2",
      "text": "       .innerRadius(radius - 30)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1e3",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1e4",
      "text": "     pieGroup.append(\"text\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1e5",
      "text": "       .attr(\"fill\", \"black\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1e6",
      "text": "       .attr(\"transform\", (d) => \"translate(\" + text.centroid(d) + \")\" )",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1e7",
      "text": "       .attr(\"dy\", \"5px\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1e8",
      "text": "       .attr(\"font\", \"10px\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1e9",
      "text": "       .attr(\"text-anchor\", \"middle\")",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4601280f0000042e1ea",
      "text": "       .text((d) => d.data.name);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678177,
      "updated": 1605678309
    },
    {
      "id": "5fb4b4e61280f0000042e20f",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678310,
      "updated": 1605678313
    },
    {
      "id": "5fb4ca731280f00000fd9071",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605683827,
      "updated": 1605683827
    },
    {
      "id": "5fb4ca731280f00000fd9072",
      "text": "   hasChart() { return document.getElementById(this.id) !== null;}",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605683828,
      "updated": 1605683849
    },
    {
      "id": "5fb4b4ec1280f0000042e210",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678317,
      "updated": 1605678317
    },
    {
      "id": "5fb4b4ed1280f0000042e211",
      "text": "   remove() {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678318,
      "updated": 1605678337
    },
    {
      "id": "5fb4b5031280f0000042e213",
      "text": "     const chart = document.getElementById(this.id);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678339,
      "updated": 1605683872
    },
    {
      "id": "5fb4caa01280f00000fd9073",
      "text": "     if (!chart) return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605683872,
      "updated": 1605683879
    },
    {
      "id": "5fb4cab01280f00000fd9074",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605683888,
      "updated": 1605683888
    },
    {
      "id": "5fb4b5031280f0000042e215",
      "text": "     // 既にchartがある場合は削除する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678340,
      "updated": 1605683886
    },
    {
      "id": "5fb4b5031280f0000042e216",
      "text": "     console.log('The chart already exists. Removing it...');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678340,
      "updated": 1605683886
    },
    {
      "id": "5fb4b5031280f0000042e217",
      "text": "     chart.parentNode.removeChild(chart);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678340,
      "updated": 1605683886
    },
    {
      "id": "5fb4b5011280f0000042e212",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678337,
      "updated": 1605678338
    },
    {
      "id": "5fb4b5151280f0000042e21b",
      "text": " }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1605678357,
      "updated": 1605678359
    },
    {
      "id": "5faff0fb5b98c200007d689c",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605366011,
      "updated": 1605366017
    },
    {
      "id": "5faff0fc5b98c200007d689e",
      "text": "[d3-piechart-button.icon] ← 実行ボタン",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605366012,
      "updated": 1605366028
    },
    {
      "id": "5faff0fb5b98c200007d689d",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605366011,
      "updated": 1605366011
    },
    {
      "id": "5fa936075b98c20000ced6dd",
      "text": "参考ページ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924935,
      "updated": 1604924948
    },
    {
      "id": "5fa9360c5b98c20000ced6de",
      "text": "[Mousetrap]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924941,
      "updated": 1604924962
    },
    {
      "id": "5fa936225b98c20000ced6df",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1604924962,
      "updated": 1604924962
    },
    {
      "id": "5fabbeb95b98c200001c0428",
      "text": "#UserScript",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605091002,
      "updated": 1605091010
    },
    {
      "id": "5faba30b5b98c20000566054",
      "text": "#icon-button",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605083916,
      "updated": 1605083925
    },
    {
      "id": "5faba30d5b98c20000566055",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1605083918,
      "updated": 1605083918
    }
  ]
}