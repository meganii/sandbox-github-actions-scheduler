{
  "id": "607a52191cc917001c60e1dd",
  "title": "2オクターブ無限音階",
  "created": 1618629147,
  "updated": 1633743629,
  "lines": [
    {
      "id": "607a52191cc917001c60e1dd",
      "text": "2オクターブ無限音階",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629147,
      "updated": 1618629147
    },
    {
      "id": "6160f30c8ee92a0000adfb98",
      "text": "[https://gyazo.com/d0fbedec12aa9700a0a289b12dde102a]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1633743629,
      "updated": 1633743629
    },
    {
      "id": "6160f30d8ee92a0000adfb99",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1633743629,
      "updated": 1633743629
    },
    {
      "id": "607a52538ee92a0000146637",
      "text": " [WebAudioAPI]を使った[無限音階]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629204,
      "updated": 1618629219
    },
    {
      "id": "607a538b8ee92a00000878f0",
      "text": " [ScrapExec]で実行できる",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629515,
      "updated": 1618629536
    },
    {
      "id": "607a53a88ee92a000059f3b9",
      "text": " Qwertyキーボードを音楽鍵盤だと思って弾く",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629544,
      "updated": 1618629562
    },
    {
      "id": "607a52f68ee92a00000a2ff8",
      "text": "  e, r, t などを押すとドレミが出る",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629367,
      "updated": 1618629563
    },
    {
      "id": "607a53bc8ee92a000059f3ba",
      "text": " 2オクターブ上がると元の音に戻る",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629564,
      "updated": 1618629580
    },
    {
      "id": "607a55168ee92a000083df6d",
      "text": " ブラウザ上でこういう謎[楽器]作れるの面白い",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629910,
      "updated": 1618631425
    },
    {
      "id": "607a55608ee92a0000d1d5d8",
      "text": " プレゼン中にBGM弾けたりして",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629984,
      "updated": 1618630001
    },
    {
      "id": "60adcf698ee92a0000c7b159",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1622003562,
      "updated": 1622003562
    },
    {
      "id": "60adcf718ee92a0000c7b15c",
      "text": " こちらで普通に試せます [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1622003570,
      "updated": 1622003578
    },
    {
      "id": "60adcf6a8ee92a0000c7b15a",
      "text": "  [http://www.pitecan.com/Infinite/ 2オクターブ無限音階]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1622003562,
      "updated": 1622003577
    },
    {
      "id": "607a52538ee92a0000146638",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629204,
      "updated": 1618629943
    },
    {
      "id": "607a521b8ee92a0000725144",
      "text": "code:mugen.js",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629147,
      "updated": 1618629155
    },
    {
      "id": "607a52228ee92a00007251a1",
      "text": " $(function() {",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629155,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251a3",
      "text": "     $('body').on('keydown',keydown)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251a4",
      "text": "     $('body').on('keyup',keyup)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a522f8ee92a00007251fd",
      "text": "     Start()",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629167,
      "updated": 1618629170
    },
    {
      "id": "607a52238ee92a00007251a5",
      "text": " });",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251a6",
      "text": " ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251a7",
      "text": " keys = [",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251a8",
      "text": "     'q', '2', 'w', 'e', '4', 'r', '5', 't', 'y', '7', 'u', '8', 'i', '9', 'o', 'p',",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251a9",
      "text": "     'z', 's', 'x', 'c', 'f', 'v', 'g', 'b', 'n', 'j', 'm', 'k', ',', 'l', '.', '/'",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251aa",
      "text": " ]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251ab",
      "text": " ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251ac",
      "text": " notes = [",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251ad",
      "text": "     'A', 'A#', 'B', 'C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A2', 'A2#', 'B2', 'C2',",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251ae",
      "text": "     'A2', 'A2#', 'B2', 'C2', 'C2#', 'D2', 'D2#', 'E2', 'F2', 'F2#', 'G2', 'G2#', 'A3', 'A3#', 'B3', 'C3', 'C3#'",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251af",
      "text": " ]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251b0",
      "text": " ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251b1",
      "text": " function key2c(key){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251b2",
      "text": "     var ind = keys.indexOf(key)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251b3",
      "text": "     if(ind >= 0)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251b4",
      "text": " \t    return notes[ind]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629233
    },
    {
      "id": "607a52238ee92a00007251b5",
      "text": "     else",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251b6",
      "text": " \t    return null",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629235
    },
    {
      "id": "607a52238ee92a00007251b7",
      "text": " }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251b8",
      "text": " ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251b9",
      "text": " function keydown(e){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52388ee92a00007251fe",
      "text": "     e.preventDefault()",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629176,
      "updated": 1618629182
    },
    {
      "id": "607a52238ee92a00007251ba",
      "text": "     var c = key2c(e.key)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251bb",
      "text": "     if(c){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251bc",
      "text": " \t    for(var s=0;s<9;s++){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629241
    },
    {
      "id": "607a52238ee92a00007251bd",
      "text": " \t        gain[c+s].gain.value = keygain(osc[c+s].frequency.value)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629242
    },
    {
      "id": "607a52238ee92a00007251be",
      "text": " \t    }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629243
    },
    {
      "id": "607a52238ee92a00007251bf",
      "text": "     }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251c0",
      "text": " }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251c1",
      "text": " function keyup(e){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52408ee92a00007251ff",
      "text": "     e.preventDefault()",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629184,
      "updated": 1618629189
    },
    {
      "id": "607a52238ee92a00007251c2",
      "text": "     var c = key2c(e.key)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251c3",
      "text": "     if(c){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251c4",
      "text": " \t    for(var s=0;s<9;s++){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629248
    },
    {
      "id": "607a52238ee92a00007251c5",
      "text": " \t        gain[c+s].gain.value = 0.0",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629249
    },
    {
      "id": "607a52238ee92a00007251c6",
      "text": " \t    }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629251
    },
    {
      "id": "607a52238ee92a00007251c7",
      "text": "     }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251c8",
      "text": " }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251c9",
      "text": " ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251ca",
      "text": " function keygain(freq){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251cb",
      "text": "     freq = Number(freq)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251cc",
      "text": "     var l = (Math.log(freq) - Math.log(440)) / Math.log(2)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251cd",
      "text": "     return 1 / 2 ** Math.abs(l)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251ce",
      "text": " }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251cf",
      "text": " ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251d0",
      "text": " function keyhandler(e){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251d1",
      "text": "     var c = e.target.id",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251d2",
      "text": " ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251d3",
      "text": "     if(e.type == 'mousedown'){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251d4",
      "text": " \t    for(var s=0;s<9;s++){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629260
    },
    {
      "id": "607a52238ee92a00007251d5",
      "text": "             gain[c+s].gain.value = keygain(osc[c+s].frequency.value)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629268
    },
    {
      "id": "607a52238ee92a00007251d6",
      "text": " \t    }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629271
    },
    {
      "id": "607a52238ee92a00007251d7",
      "text": "     }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251d8",
      "text": "     if(e.type == 'mouseup'){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251d9",
      "text": " \t    for(var s=0;s<9;s++){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629277
    },
    {
      "id": "607a52238ee92a00007251da",
      "text": " \t        gain[c+s].gain.value = 0.0",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629278
    },
    {
      "id": "607a52238ee92a00007251db",
      "text": " \t    }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629280
    },
    {
      "id": "607a52238ee92a00007251dc",
      "text": "     }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251dd",
      "text": " }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251de",
      "text": " function setkey(c,freq){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251df",
      "text": "     $('<span>').text(c)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251e0",
      "text": " \t  .appendTo($('body'))",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629283
    },
    {
      "id": "607a52238ee92a00007251e1",
      "text": " \t  .on('mousedown',keyhandler)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629284
    },
    {
      "id": "607a52238ee92a00007251e2",
      "text": " \t  .on('mouseup',keyhandler)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629286
    },
    {
      "id": "607a52238ee92a00007251e3",
      "text": " \t  .attr('id',c)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629289
    },
    {
      "id": "607a52238ee92a00007251e4",
      "text": "     $('body').append($('<span> </span>'))",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251e5",
      "text": "     for(var s=0;s<9;s++){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251e6",
      "text": " \t    gain[c+s] = new GainNode(audioctx);",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629324
    },
    {
      "id": "607a52238ee92a00007251e7",
      "text": " \t    gain[c+s].gain.value = 0.0",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629326
    },
    {
      "id": "607a52238ee92a00007251e8",
      "text": " \t    osc[c+s] = new OscillatorNode(audioctx);",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629328
    },
    {
      "id": "607a52238ee92a00007251e9",
      "text": " \t    osc[c+s].frequency.value = freq * (4 ** Number(s)) / 16.0",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629330
    },
    {
      "id": "607a52238ee92a00007251ea",
      "text": " \t    osc[c+s].connect(gain[c+s]).connect(audioctx.destination);",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629333
    },
    {
      "id": "607a52238ee92a00007251eb",
      "text": " \t    osc[c+s].start();",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629335
    },
    {
      "id": "607a52238ee92a00007251ec",
      "text": "     }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251ed",
      "text": " }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251ee",
      "text": " ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251ef",
      "text": " function Start() {",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251f0",
      "text": "     osc = {}",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251f1",
      "text": "     gain = {}",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251f2",
      "text": "     audioctx = new AudioContext();       // AudioContext を作成",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251f3",
      "text": "     for(var i=0;i<notes.length;i++){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251f4",
      "text": " \t    if(i < 16){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629406
    },
    {
      "id": "607a52238ee92a00007251f5",
      "text": "     \t    setkey(notes[i],440 * (2.0 ** (i / 12.0)))",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251f6",
      "text": " \t    }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629408
    },
    {
      "id": "607a52238ee92a00007251f7",
      "text": " \t    else {",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629410
    },
    {
      "id": "607a52238ee92a00007251f8",
      "text": "     \t    setkey(notes[i],440 * (2.0 ** ((i-4) / 12.0)))",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251f9",
      "text": " \t    }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629412
    },
    {
      "id": "607a52238ee92a00007251fa",
      "text": "     }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251fb",
      "text": " }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a52238ee92a00007251fc",
      "text": " ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629156,
      "updated": 1618629156
    },
    {
      "id": "607a521f8ee92a00007251a0",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1618629152,
      "updated": 1618629152
    }
  ]
}