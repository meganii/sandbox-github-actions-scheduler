{
  "id": "64573a49a00ea8b564dda23b",
  "title": "Pythonでクラスをexportする方法",
  "created": 1683438154,
  "updated": 1686672995,
  "lines": [
    {
      "id": "64573a49a00ea8b564dda23b",
      "text": "Pythonでクラスをexportする方法",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683438154,
      "updated": 1683438157
    },
    {
      "id": "647b510e7838e300003eae6b",
      "text": "なんか説明（とタイトル）が正確じゃないな[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803276,
      "updated": 1685804002
    },
    {
      "id": "647b510e7838e300003eae6c",
      "text": "\t自分でも何を言いたいのかがわからなくなっているので書き直す",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803276,
      "updated": 1685803284
    },
    {
      "id": "647b51167838e300003eae6e",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803284,
      "updated": 1685803286
    },
    {
      "id": "647b51187838e300003eae6f",
      "text": "以下のような構造でモジュールが入っていたとする",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803286,
      "updated": 1685803312
    },
    {
      "id": "647b51317838e300003eae71",
      "text": "root",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803312,
      "updated": 1685803438
    },
    {
      "id": "647b51387838e300003eae72",
      "text": "┣ `foo/`",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803318,
      "updated": 1685803436
    },
    {
      "id": "647b51c07838e300003eae77",
      "text": "┃┣ `__init__.py`",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803454,
      "updated": 1685803464
    },
    {
      "id": "647b516c7838e300003eae73",
      "text": "┃┗ `a.py`",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803370,
      "updated": 1685803420
    },
    {
      "id": "647b51197838e300003eae70",
      "text": "┗ `main.py`",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803288,
      "updated": 1685803420
    },
    {
      "id": "647b510e7838e300003eae6a",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803276,
      "updated": 1685803276
    },
    {
      "id": "647b51ee7838e300003eae7d",
      "text": "`a.py`の中身は以下とする",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803501,
      "updated": 1685803523
    },
    {
      "id": "647b51b37838e300003eae76",
      "text": "code:a.py",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803442,
      "updated": 1685803450
    },
    {
      "id": "647b51cb7838e300003eae78",
      "text": " class A:",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803465,
      "updated": 1685803479
    },
    {
      "id": "647b51da7838e300003eae79",
      "text": "     pass",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803480,
      "updated": 1685803484
    },
    {
      "id": "647b51897838e300003eae74",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803400,
      "updated": 1685803400
    },
    {
      "id": "647b51fd7838e300003eae7e",
      "text": "この状況下で`main.py`は、以下のような方法で`a.py`をimportできる",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803516,
      "updated": 1685804108
    },
    {
      "id": "647b52437838e300003eae7f",
      "text": "code:main.py",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803585,
      "updated": 1685803589
    },
    {
      "id": "647b52b37838e300003eae80",
      "text": " from .foo.a import A",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803698,
      "updated": 1685803713
    },
    {
      "id": "647b51df7838e300003eae7b",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803485,
      "updated": 1685803485
    },
    {
      "id": "647b52c87838e300003eae83",
      "text": "でもこれはできない",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803718,
      "updated": 1685803721
    },
    {
      "id": "647b52cb7838e300003eae85",
      "text": "code:main.py",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803721,
      "updated": 1685803725
    },
    {
      "id": "647b52cf7838e300003eae86",
      "text": " from .foo import A",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803725,
      "updated": 1685803733
    },
    {
      "id": "647b52d97838e300003eae87",
      "text": " # フォルダ指定でimportすることはできない",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803735,
      "updated": 1685803862
    },
    {
      "id": "647b535c7838e300003eae88",
      "text": "本当に動かないかは検証していないけれど、[mypy]はエラーを吐いた[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803867,
      "updated": 1685803895
    },
    {
      "id": "647b52c87838e300003eae84",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803718,
      "updated": 1685803718
    },
    {
      "id": "647b537a7838e300003eae89",
      "text": "フォルダ指定でimport出来るようにするために、[__init__.py]を作成する",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803896,
      "updated": 1685803934
    },
    {
      "id": "647b539f7838e300003eae8b",
      "text": "code:__init__.py",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803934,
      "updated": 1685803941
    },
    {
      "id": "647b53a77838e300003eae8c",
      "text": " from .a import A",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803941,
      "updated": 1685803947
    },
    {
      "id": "647b53ad7838e300003eae8d",
      "text": " ",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803948,
      "updated": 1685803948
    },
    {
      "id": "647b53ae7838e300003eae8e",
      "text": " __all__ = [",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803948,
      "updated": 1685803956
    },
    {
      "id": "647b53b67838e300003eae8f",
      "text": "     \"A\",",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803956,
      "updated": 1685803960
    },
    {
      "id": "647b53b67838e300003eae90",
      "text": " ]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803956,
      "updated": 1685803957
    },
    {
      "id": "6488704de5172d00003cbd1b",
      "text": "この例では.aの有無だけだが、aの階層が深いときは便利[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1686663245,
      "updated": 1686663324
    },
    {
      "id": "6488702de5172d00003cbd1a",
      "text": "__init__.pyでimportしておくだけではだめなんだっけ？[yosider.icon][nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1686663214,
      "updated": 1686667927
    },
    {
      "id": "64888297aff09e000060e212",
      "text": "今のところ__all__は何も関係ないのでは。[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1686667927,
      "updated": 1686668005
    },
    {
      "id": "648882e2aff09e000060e213",
      "text": "　__all__の意味をちゃんとドキュメント読んだ方がいい。",
      "userId": "582e63d27c56960011aff09e",
      "created": 1686668002,
      "updated": 1686668002
    },
    {
      "id": "648882e6aff09e000060e214",
      "text": "　https://docs.python.org/ja/3/tutorial/modules.html",
      "userId": "582e63d27c56960011aff09e",
      "created": 1686668007,
      "updated": 1686668009
    },
    {
      "id": "647b53c17838e300003eae91",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803968,
      "updated": 1685803968
    },
    {
      "id": "647b53c27838e300003eae92",
      "text": "こうすることで、フォルダ指定で`A`をimportしてもエラーを吐かなくなる",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803969,
      "updated": 1685803992
    },
    {
      "id": "647b537a7838e300003eae8a",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803896,
      "updated": 1685803896
    },
    {
      "id": "647b51897838e300003eae75",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803400,
      "updated": 1685803400
    },
    {
      "id": "64573a707838e3000005cf32",
      "text": "[Mijinko_SD.icon] from [2023/05/07]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683438154,
      "updated": 1683438160
    },
    {
      "id": "64573a707838e3000005cf33",
      "text": "[Pythonでクラスをexportする方法]を探していた",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683438154,
      "updated": 1683438154
    },
    {
      "id": "64573a707838e3000005cf34",
      "text": "\t[https://gyazo.com/07e5df73f0cefe66336216fdfc70ce30] [https://gyazo.com/4eb36292f06841b68ace22dc914ba59e]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683438154,
      "updated": 1683438154
    },
    {
      "id": "64573a707838e3000005cf35",
      "text": "\t← ダメな例　良い例 →",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683438154,
      "updated": 1683438154
    },
    {
      "id": "64573a707838e3000005cf36",
      "text": "\tとりあえず[__all__]に名前を突っ込んでおけばexportできる",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683438154,
      "updated": 1683438154
    },
    {
      "id": "64573a707838e3000005cf37",
      "text": " [https://docs.python.org/ja/3/tutorial/modules.html#importing-from-a-package 6. モジュール — Python 3.11.3 ドキュメント #importing-from-a-package]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1683438154,
      "updated": 1683439438
    },
    {
      "id": "64573edde5172d00009c7019",
      "text": "  > import 文の使う規約は、パッケージの __init__.py コードに __all__ という名前のリストが定義されていれば、 from package import * が現れたときに import すべきモジュール名のリストとして使う、というものです。",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1683439326,
      "updated": 1683439371
    },
    {
      "id": "64573f0ee5172d00009c701a",
      "text": "  これ？[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1683439374,
      "updated": 1683439381
    },
    {
      "id": "64573eb4e5172d00009c7018",
      "text": " exportというのはどういう動作を指しているんだろう[yosider.icon][nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1683439284,
      "updated": 1683455117
    },
    {
      "id": "6457405de5172d00009c701c",
      "text": "  他の.pyからimportできるようにしたい？",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1683439709,
      "updated": 1683439726
    },
    {
      "id": "645781067838e300001eb2b9",
      "text": "　　\tこれ[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683456224,
      "updated": 1683456233
    },
    {
      "id": "645781207838e300001eb2ba",
      "text": "　　\t正確には、別のファイルで実装したクラスを、また別のファイルを経由してimportできるようにしたかった",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683456250,
      "updated": 1683456313
    },
    {
      "id": "645781607838e300001eb2bb",
      "text": "　　\tファイルAで定義したクラスを、ファイルBをimportすることでも使えるようにするのが目的",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683456314,
      "updated": 1683456370
    },
    {
      "id": "645781b47838e300001eb2bc",
      "text": "　　\t\t[mod.ts]のように、同じパッケージディレクトリで定義したものをまとめてexportしたかった",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683456397,
      "updated": 1683456427
    },
    {
      "id": "6457404ee5172d00009c701b",
      "text": "　　「exportする」という手段の質問をしてるけど、それによって達成したかった目的が謎だ[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1683439694,
      "updated": 1683455175
    },
    {
      "id": "64577cc7aff09e00007fa7bd",
      "text": "　　 多分手段の選択が間違ってる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1683455175,
      "updated": 1683455185
    },
    {
      "id": "64577cd1aff09e00007fa7be",
      "text": "　　 なんか名前ついてたな、なんだっけ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1683455186,
      "updated": 1683455195
    },
    {
      "id": "64577cdaaff09e00007fa7bf",
      "text": "　　 　[XY問題]かな？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1683455195,
      "updated": 1683455202
    },
    {
      "id": "645780f27838e300001eb2b3",
      "text": "　　JavaScript的なexportをイメージしてました[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1683456204,
      "updated": 1683456219
    },
    {
      "id": "646a139de5172d00006c6fff",
      "text": "　　何もつけなくてもimportできるはず[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1684673436,
      "updated": 1684673447
    },
    {
      "id": "646a13d1e5172d00006c7000",
      "text": "　　　後からJSを知ったので、[export]ってわざわざ書かないといけないんだ～となった",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1684673488,
      "updated": 1684673520
    },
    {
      "id": "646a90dc1280f000000e5bf1",
      "text": "　　　むしろexportなしでimportできる仕様のほうがこわいと思う[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1684705502,
      "updated": 1684705536
    },
    {
      "id": "646a90fd1280f000000e5bf2",
      "text": "　　　 [グローバル汚染]しまくりじゃん",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1684705536,
      "updated": 1684705580
    },
    {
      "id": "64888310aff09e000060e215",
      "text": "　　　 　　これ根本的に理解してない発言[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1686668049,
      "updated": 1686668078
    },
    {
      "id": "64889654e5172d00008cad3e",
      "text": "　　　 　　 そうなのか(?)[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1686672981,
      "updated": 1686672995
    },
    {
      "id": "646ae984e5172d00009c6ff8",
      "text": "　　　 \t基本的には`from <module> import <class>`みたいな感じでmodule名込みでimportするので、意図せず名前が被ってしまうことはそうそうないと思う[yosider.icon][inajob.icon]",
      "userId": "58442db3ee4a2400116eb406",
      "created": 1684728197,
      "updated": 1684731842
    },
    {
      "id": "646af7c16eb4060000476dc4",
      "text": "　　　 \t[https://docs.python.org/ja/3/tutorial/classes.html#tut-private 9. クラス — Python 3.11.3 ドキュメント]",
      "userId": "58442db3ee4a2400116eb406",
      "created": 1684731842,
      "updated": 1684731845
    },
    {
      "id": "646af7c56eb4060000476dc5",
      "text": "     \t> オブジェクトの中からしかアクセス出来ない \"プライベート\" インスタンス変数は、 Python にはありません。しかし、ほとんどの Python コードが従っている慣習があります。アンダースコアで始まる名前 (例えば _spam) は、 (関数であれメソッドであれデータメンバであれ) 非 public なAPIとして扱います。これらは、予告なく変更されるかもしれない実装の詳細として扱われるべきです。",
      "userId": "58442db3ee4a2400116eb406",
      "created": 1684731845,
      "updated": 1684731864
    },
    {
      "id": "646af7d86eb4060000476dc6",
      "text": "     \t慣習だがアンダースコアで始めるというのがよくやられている[inajob.icon]",
      "userId": "58442db3ee4a2400116eb406",
      "created": 1684731865,
      "updated": 1684731909
    },
    {
      "id": "646a91071280f000000e5bf3",
      "text": "　　　 さわって欲しくないmodule内のクラスや変数にアクセスできてしまう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1684705545,
      "updated": 1684705561
    },
    {
      "id": "646ae9a0e5172d00009c6ff9",
      "text": "　　　 [「こわさ」と便利さのトレードオフ]？[yosider.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1684728225,
      "updated": 1684728934
    },
    {
      "id": "646aa33f7838e300000838a4",
      "text": "　　　こういう書き方をしないと、たしか[mypy]がエラー吐いた気がします[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1684710208,
      "updated": 1684710239
    },
    {
      "id": "646aa35e7838e300000838a5",
      "text": "　　　　後で検証できたらしておきたい",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1684710240,
      "updated": 1684710248
    },
    {
      "id": "646aa3707838e300000838a6",
      "text": "　　　　[__all__]を書かなくても、[__init__.py]だけあれば大丈夫な説はあるけれど",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1684710257,
      "updated": 1684710309
    },
    {
      "id": "646ae879e5172d0000d5cc36",
      "text": "　　　　そうなのか、、気になる[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1684727930,
      "updated": 1684727967
    },
    {
      "id": "64577c90aff09e00007fa7bc",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1683455121,
      "updated": 1683455121
    },
    {
      "id": "647b50e37838e300003eae67",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1685803234,
      "updated": 1685803234
    }
  ]
}