{
  "id": "6049e184b7ce98001c121637",
  "title": "ショートカットキーでScrapCalcを動かす",
  "created": 1615454597,
  "updated": 1646202147,
  "lines": [
    {
      "id": "6049e184b7ce98001c121637",
      "text": "ショートカットキーでScrapCalcを動かす",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a0000235233",
      "text": " [Page MenuからScrapCalcを動かす] を改良したもの [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454698
    },
    {
      "id": "6049e1958ee92a0000235280",
      "text": " Ctrl-Cを押すと計算結果が表示される",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454614,
      "updated": 1615454624
    },
    {
      "id": "6049e86f8ee92a0000d79027",
      "text": " もう一度押すと元に戻る",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615456367,
      "updated": 1615456370
    },
    {
      "id": "6049ecc98ee92a0000d79028",
      "text": " [*/ すごく気持ち良い!]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615457482,
      "updated": 1615475935
    },
    {
      "id": "6049ee218ee92a0000d79029",
      "text": " [Excel]とかもこういう方式でいいんじゃないの",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615457827,
      "updated": 1646167070
    },
    {
      "id": "604a35248ee92a00008685d2",
      "text": "  ふだんは式が見えてて、計算を指示したときだけ値が表示されるみたいな",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615476004,
      "updated": 1615476035
    },
    {
      "id": "621f0c647838e300009c5a54",
      "text": "  たしかに[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1646201957,
      "updated": 1646201961
    },
    {
      "id": "621f0c6b7838e300009c5a55",
      "text": "  　というか式をまとめて見る方法自体無いのが辛い[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1646201965,
      "updated": 1646202013
    },
    {
      "id": "6049efb78ee92a0000751081",
      "text": "\tトグルせずに常に結果も見えていて良い気がする[inajob.icon]",
      "userId": "58442db3ee4a2400116eb406",
      "created": 1615458231,
      "updated": 1646202072
    },
    {
      "id": "621f0ccb6eb4060000114642",
      "text": "\t\t読みにくくなることを危惧している？",
      "userId": "58442db3ee4a2400116eb406",
      "created": 1646202060,
      "updated": 1646202147
    },
    {
      "id": "6049efb78ee92a0000751082",
      "text": "[https://gyazo.com/f11d5497143fe78f12fe1ca65eb69137]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615458232,
      "updated": 1615458233
    },
    {
      "id": "6049e1858ee92a0000235236",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a0000235237",
      "text": " 以下のUserCSSとUserScriptで[ScrapCalc]をショートカットキーで呼ぶことができます [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a0000235238",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a0000235239",
      "text": "[[サンプル]]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a000023523a",
      "text": " [% a = 10] [% b = 20]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1646167040
    },
    {
      "id": "6049e1858ee92a000023523b",
      "text": " a × b = [% a * b]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1646167042
    },
    {
      "id": "6049e1858ee92a000023523c",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a000023523d",
      "text": "[[応用例]]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a000023523e",
      "text": " [スプレッドシート]みたいに使う",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a000023523f",
      "text": " 電卓みたいにちょっとした計算に使う",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a0000235240",
      "text": "  √2 = [% Math.sqrt(2)]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1646167025
    },
    {
      "id": "6049e1858ee92a0000235241",
      "text": "  今日 = [% Date()]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1646167028
    },
    {
      "id": "6049e1858ee92a0000235242",
      "text": " [東京オリンピック]まで [% Math.floor((new Date('2021-7-23') - Date.now()) / (24 * 60 * 60 * 1000))] 日",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1646167031
    },
    {
      "id": "6049e1858ee92a0000235243",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a0000235244",
      "text": "[[使い方]]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e1858ee92a0000235245",
      "text": " 以下のUserCSSとUserScriptを自分のページに貼ると使えます",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454597,
      "updated": 1615454597
    },
    {
      "id": "6049e2618ee92a00003adf95",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615454817,
      "updated": 1615454817
    },
    {
      "id": "604a31c98ee92a0000d4a5b0",
      "text": "`[= 数式 = 0]` ⇒ [= 数式 = 0] みたいな装飾表示",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475146,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5b2",
      "text": "code:style.css",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5b3",
      "text": "  .deco-\\= {",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5b4",
      "text": "    color: #111;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5b5",
      "text": "    background-color: #ffddff;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5b6",
      "text": "    padding: 0.1em 0.2em 0.1em 0.2em;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5b7",
      "text": "  }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5b8",
      "text": "  .scrapcalc_result {",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475545
    },
    {
      "id": "604a31ca8ee92a0000d4a5b9",
      "text": "     font-style:italic;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5ba",
      "text": "     font-weight:bold;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5bb",
      "text": "     background-color:yellow;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5bc",
      "text": "  }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5bd",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5be",
      "text": " `strict`の制限を回避",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5bf",
      "text": " https://stackoverflow.com/questions/6020178/can-i-disable-ecmascript-strict-mode-for-specific-functions の方法 を利用",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5c0",
      "text": "code:script.js",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5c1",
      "text": " function scrapcalc_commands(){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475339
    },
    {
      "id": "604a31ca8ee92a0000d4a5c2",
      "text": "    const commands = [];",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475173
    },
    {
      "id": "604a31ca8ee92a0000d4a5c3",
      "text": "    let count = 0;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5c4",
      "text": "    for(let expr of document.querySelectorAll('.scrapcalc_result')){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475250
    },
    {
      "id": "604a31ca8ee92a0000d4a5c5",
      "text": "       expr.remove();",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5c6",
      "text": "    }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5c7",
      "text": "    for(let expr of document.querySelectorAll('.deco-\\\\=')){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5c8",
      "text": "       let text = expr.innerText;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5c9",
      "text": "       if(text.match(/=/)){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5ca",
      "text": "           commands.push(decodeURI(text) + ';');",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5cb",
      "text": "       }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5cc",
      "text": "       else {",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5cd",
      "text": "           let id = `scrapcalc_element_id_${count}`;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5ce",
      "text": "           var span = document.createElement('span');",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5cf",
      "text": "           span.id = id;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5d0",
      "text": "           span.classList.add(\"scrapcalc_result\");",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475255
    },
    {
      "id": "604a31ca8ee92a0000d4a5d1",
      "text": "           expr.parentNode.appendChild(span)",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5d2",
      "text": "           expr.classList.add(\"scrapcalc_exp\")",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475555
    },
    {
      "id": "604a31ca8ee92a0000d4a5d3",
      "text": "           expr.style.display = 'none';",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5d4",
      "text": "           commands.push(`document.getElementById(\"${id}\").innerText = ${decodeURI(text)};`);",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5d5",
      "text": "           count += 1;",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5d6",
      "text": "       }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5d7",
      "text": "    }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5d8",
      "text": "    return commands.join(\"\\n\");",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5d9",
      "text": " }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5da",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5db",
      "text": " ショートカットキー(Ctrl-C)でScrapCalcを呼び出す",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5dc",
      "text": " 何かクリックされたらもとに戻す",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5dd",
      "text": " トグルする",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5de",
      "text": "code:script.js",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5df",
      "text": " function scrapcalc_reset(){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5e0",
      "text": "     for(let expr of document.querySelectorAll('.scrapcalc_result')){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475269
    },
    {
      "id": "604a31ca8ee92a0000d4a5e1",
      "text": "         expr.remove();",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5e2",
      "text": "     }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5e3",
      "text": "     for(let expr of document.querySelectorAll('.scrapcalc_exp')){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475273
    },
    {
      "id": "604a31ca8ee92a0000d4a5e4",
      "text": "        expr.style.display = 'inline';",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5e5",
      "text": "     }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5e6",
      "text": " }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5e7",
      "text": " document.addEventListener('keypress', e => {",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5e8",
      "text": "    if (e.key == 'c' && e.ctrlKey){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5e9",
      "text": "        if(document.querySelectorAll('.scrapcalc_result').length == 0){",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475276
    },
    {
      "id": "604a31ca8ee92a0000d4a5ea",
      "text": "            const scrapcalc_func = Function(`(() => {${scrapcalc_commands()}})();`);",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475350
    },
    {
      "id": "604a31ca8ee92a0000d4a5eb",
      "text": "            scrapcalc_func();",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475312
    },
    {
      "id": "604a31ca8ee92a0000d4a5ec",
      "text": "        }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5ed",
      "text": "        else {",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5ee",
      "text": "            scrapcalc_reset();",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5ef",
      "text": "        }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5f0",
      "text": "     }",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5f1",
      "text": " })",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604b6dc98ee92a00009d6be1",
      "text": " /*",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615556041,
      "updated": 1615556042
    },
    {
      "id": "604a31ca8ee92a0000d4a5f2",
      "text": " document.addEventListener('click', e => {",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5f3",
      "text": "    scrapcalc_reset();",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604a31ca8ee92a0000d4a5f4",
      "text": " })",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    },
    {
      "id": "604b6dcd8ee92a00009d6be2",
      "text": " */",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615556045,
      "updated": 1615556046
    },
    {
      "id": "604a31ca8ee92a0000d4a5f5",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615475147,
      "updated": 1615475147
    }
  ]
}