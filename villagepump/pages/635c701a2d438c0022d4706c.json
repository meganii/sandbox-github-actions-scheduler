{
  "id": "635c701a2d438c0022d4706c",
  "title": "インライン問題方式を実験してみる",
  "created": 1667002396,
  "updated": 1667950366,
  "lines": [
    {
      "id": "635c701a2d438c0022d4706c",
      "text": "インライン問題方式を実験してみる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002396,
      "updated": 1667002396
    },
    {
      "id": "635c701c1280f0000026bece",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002396,
      "updated": 1667002549
    },
    {
      "id": "635c701d1280f0000026becf",
      "text": "題材",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002397,
      "updated": 1667002522
    },
    {
      "id": "635c709a1280f0000026bed1",
      "text": "　[ダブルスタンダード]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002522,
      "updated": 1667002528
    },
    {
      "id": "635c70251280f0000026bed0",
      "text": "  >    (double standard) 仲間内と部外者、国内向けと外国向けなどのように、対象によって異なった価値判断の基準を使い分けること。",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002405,
      "updated": 1667002537
    },
    {
      "id": "635c70b21280f0000026bed9",
      "text": "   [Anki.icon]英語：{{c1::double standard}}\\n日本語：{{c2::二重規範}}",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002547,
      "updated": 1667002635
    },
    {
      "id": "635c710c1280f0000026bedf",
      "text": "   [Anki.icon]対象によって{{c1::異なった価値判断の基準}}を使い分けることを{{c2::ダブルスタンダード::カタカナ英語}}と呼ぶ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002636,
      "updated": 1667002737
    },
    {
      "id": "635c70a91280f0000026bed3",
      "text": "  > ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002537,
      "updated": 1667002537
    },
    {
      "id": "635c70a91280f0000026bed4",
      "text": "  > ダブルスタンダードとは - コトバンク",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002537,
      "updated": 1667002537
    },
    {
      "id": "635c71731280f0000026bee0",
      "text": "   [Anki.icon]{{c1::二重規範::全部漢字}}は略して{{c2::ダブスタ}}とも呼ぶ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002740,
      "updated": 1667002841
    },
    {
      "id": "635c70a91280f0000026bed5",
      "text": "  > 略してダブスタ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002537,
      "updated": 1667002537
    },
    {
      "id": "635c70a91280f0000026bed6",
      "text": "  > 二重規範とも",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002537,
      "updated": 1667002537
    },
    {
      "id": "635c70a91280f0000026bed7",
      "text": "  > ふたつ以上の場合は、マルチスタンダード／多重規範というらしい [suto3.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002537,
      "updated": 1667002546
    },
    {
      "id": "635c71931280f0000026bee4",
      "text": "   [Anki.icon]2つ以上の異なった価値判断の基準を使う場合は、{{c1::二重規範}}ではなく{{c1::多重規範}}とも呼ぶ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002771,
      "updated": 1667002825
    },
    {
      "id": "635c70a91280f0000026bed8",
      "text": "  > 通常、人を非難する場合に使われる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002537,
      "updated": 1667002537
    },
    {
      "id": "635c71dd1280f0000026bee5",
      "text": "   [Anki.icon]二重規範は主に人を{{c1::非難}}する場合に使われる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002845,
      "updated": 1667002871
    },
    {
      "id": "635d04ba1280f000008ad735",
      "text": " 本当はAnkiの問題とページ本文とを区別しないほうが楽なのかもしれないが、問題として加工する必要があるし、難しそう[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667040442,
      "updated": 1667040492
    },
    {
      "id": "635d04ed1280f000008ad736",
      "text": " とりあえず↑のように別行に問題を記述する方針で実装してみる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667040493,
      "updated": 1667040527
    },
    {
      "id": "635c70a71280f0000026bed2",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002536,
      "updated": 1667002536
    },
    {
      "id": "635c71ff1280f0000026bee7",
      "text": "書式",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002879,
      "updated": 1667002882
    },
    {
      "id": "635c72021280f0000026bee8",
      "text": " [- 行頭に][Anki.icon][- を付けている行が変換対象]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002882,
      "updated": 1667948861
    },
    {
      "id": "636ae13d1280f000000a3af5",
      "text": "  [- 「]`Anki`[- 」でもいいかもしれない][takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948861,
      "updated": 1667948861
    },
    {
      "id": "636ae13d1280f000000a3af6",
      "text": "   [- [記法展開によるちらつき]][- をなくせる]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948861,
      "updated": 1667948861
    },
    {
      "id": "636ae13d1280f000000a3af7",
      "text": " [- 改行するときは]`\\n`[- と書く]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948861,
      "updated": 1667948861
    },
    {
      "id": "636ae13d1280f000000a3af8",
      "text": " 複数行にも対応できるようにしてみる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948862,
      "updated": 1667948877
    },
    {
      "id": "636ae3c11280f000000a3b05",
      "text": "  from [/takker/Anki記法検討]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949506,
      "updated": 1667949508
    },
    {
      "id": "636ae14d1280f000000a3afa",
      "text": "  単一行",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948877,
      "updated": 1667948879
    },
    {
      "id": "636ae1501280f000000a3afb",
      "text": "   [Anki.icon]`%9E}%=)=5I`対象によって{{c1::異なった価値判断の基準}}を使い分けることを{{c2::ダブルスタンダード::カタカナ英語}}と呼ぶ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948880,
      "updated": 1667948905
    },
    {
      "id": "636ae3f91280f000000a3b06",
      "text": "    インデント配下の文章は無視する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949561,
      "updated": 1667949576
    },
    {
      "id": "636ae6671280f000000a3b11",
      "text": "   `%9E}%=)=5I`は問題の[GUID]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667950184,
      "updated": 1667950193
    },
    {
      "id": "636ae6731280f000000a3b12",
      "text": "    1秒に1個問題を新規作成する場合、衝突確率が1%になるまで約31年以上かかる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667950195,
      "updated": 1667950353
    },
    {
      "id": "636ae7151280f000000a3b13",
      "text": "    これだけ衝突確率が低ければ十分だろう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667950358,
      "updated": 1667950366
    },
    {
      "id": "636ae16a1280f000000a3afc",
      "text": "  複数行",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948906,
      "updated": 1667948911
    },
    {
      "id": "636ae16f1280f000000a3afd",
      "text": "   [Anki.icon]`Za?7qh#5-a`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948911,
      "updated": 1667948913
    },
    {
      "id": "636ae1721280f000000a3afe",
      "text": "    {{c1::温度ひび割れ}}の対策",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948914,
      "updated": 1667949398
    },
    {
      "id": "636ae3561280f000000a3aff",
      "text": "     {{c2::温度変化}}を弱める",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949398,
      "updated": 1667949398
    },
    {
      "id": "636ae3561280f000000a3b00",
      "text": "      {{c3::水和熱}}を抑える",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949398,
      "updated": 1667949398
    },
    {
      "id": "636ae3561280f000000a3b01",
      "text": "      コンクリートを{{c4::冷却}}する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949398,
      "updated": 1667949398
    },
    {
      "id": "636ae3561280f000000a3b02",
      "text": "     {{c5::引張}}応力を抑える",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949398,
      "updated": 1667949398
    },
    {
      "id": "636ae3561280f000000a3b03",
      "text": "     ひび割れを{{c6::分散}}させる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949398,
      "updated": 1667949398
    },
    {
      "id": "636ae3601280f000000a3b04",
      "text": "   配下の行全てを一つの問題とみなす",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949408,
      "updated": 1667949432
    },
    {
      "id": "635c71fe1280f0000026bee6",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002879,
      "updated": 1667002879
    },
    {
      "id": "635c70de1280f0000026beda",
      "text": "問題作成支援ツール",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002590,
      "updated": 1667002597
    },
    {
      "id": "635c70e41280f0000026bedd",
      "text": " [/takker/Ankiの穴埋めを作るPopupMenu]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002597,
      "updated": 1667002597
    },
    {
      "id": "635c70e51280f0000026bede",
      "text": "  穴埋め記号を作る",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002597,
      "updated": 1667002601
    },
    {
      "id": "636adce81280f000000a3ae2",
      "text": " 行頭にアイコンとIDを入れる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667947753,
      "updated": 1667947761
    },
    {
      "id": "636adcf11280f000000a3ae3",
      "text": "  code:popup.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667947761,
      "updated": 1667948032
    },
    {
      "id": "636adcf61280f000000a3ae8",
      "text": "   import { customAlphabet } from \"./nanoid.js\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667947767,
      "updated": 1667948027
    },
    {
      "id": "636add111280f000000a3ae9",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667947794,
      "updated": 1667947794
    },
    {
      "id": "636adcf31280f000000a3ae5",
      "text": "   const alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz-!\"#$%&\\'^()=~|{@[+*};:]<>?_,./';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667947764,
      "updated": 1667947764
    },
    {
      "id": "636adcf31280f000000a3ae6",
      "text": "   const nanoid = customAlphabet(alphabet, 10);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667947764,
      "updated": 1667947764
    },
    {
      "id": "636add1b1280f000000a3aea",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667947803,
      "updated": 1667947803
    },
    {
      "id": "636add801280f000000a3aec",
      "text": "   scrapbox.PopupMenu.addButton({",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667947904,
      "updated": 1667947918
    },
    {
      "id": "636ade021280f000000a3af2",
      "text": "     title: (text) => /^\\s+/.test(text) ? \"☆\" : \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948034,
      "updated": 1667948178
    },
    {
      "id": "636ade131280f000000a3af3",
      "text": "     onClick: (text) => /^\\s+/.test(text) ? text.replace(/^(\\s+)/, `$1[Anki.icon]\\`${nanoid()}\\``) : text,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948051,
      "updated": 1667948281
    },
    {
      "id": "636add8e1280f000000a3aed",
      "text": "   });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667947918,
      "updated": 1667948286
    },
    {
      "id": "636adefe1280f000000a3af4",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948286,
      "updated": 1667948286
    },
    {
      "id": "636addef1280f000000a3af1",
      "text": " https://esm.sh/nanoid@4.0.0/non-secure の中身",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948015,
      "updated": 1667950011
    },
    {
      "id": "635c70e11280f0000026bedb",
      "text": "  code:nanoid.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002593,
      "updated": 1667948020
    },
    {
      "id": "636adde01280f000000a3aef",
      "text": "   /* esm.sh - esbuild bundle(nanoid@4.0.0/non-secure) es2022 production */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948001,
      "updated": 1667948020
    },
    {
      "id": "636adde11280f000000a3af0",
      "text": "   var i=\"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\",h=(t,e=21)=>(l=e)=>{let r=\"\",n=l;for(;n--;)r+=t[Math.random()*t.length|0];return r},o=(t=21)=>{let e=\"\",l=t;for(;l--;)e+=i[Math.random()*64|0];return e};export{h as customAlphabet,o as nanoid};",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667948001,
      "updated": 1667948020
    },
    {
      "id": "636adddc1280f000000a3aee",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667947997,
      "updated": 1667947997
    },
    {
      "id": "635c724f1280f0000026beee",
      "text": "実装",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002959,
      "updated": 1667002961
    },
    {
      "id": "635c72511280f0000026bef0",
      "text": " 一つのscrapboxのページデータを入力して、Ankiの問題を出力する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002961,
      "updated": 1667002986
    },
    {
      "id": "635c726b1280f0000026bef1",
      "text": "  code:parse.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002986,
      "updated": 1667002989
    },
    {
      "id": "636ae4331280f000000a3b07",
      "text": "   import { parseScrapbox } from \"./deps.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949619,
      "updated": 1667949993
    },
    {
      "id": "636ae4331280f000000a3b08",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949619,
      "updated": 1667949619
    },
    {
      "id": "635c726d1280f0000026bef2",
      "text": "   export const parse = (text: string): string[] => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002989,
      "updated": 1667949666
    },
    {
      "id": "636ae4611280f000000a3b0a",
      "text": "     const blocks = parseScrapbox(text, { hasTitle: true });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949666,
      "updated": 1667949688
    },
    {
      "id": "636ae45b1280f000000a3b09",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949660,
      "updated": 1667949696
    },
    {
      "id": "636ae4871280f000000a3b0c",
      "text": "     return blocks.map((block) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949703,
      "updated": 1667949765
    },
    {
      "id": "636ae4c41280f000000a3b0d",
      "text": "       case \"table\"",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949765,
      "updated": 1667949768
    },
    {
      "id": "636ae4c41280f000000a3b0e",
      "text": "     })",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949765,
      "updated": 1667949765
    },
    {
      "id": "635c72911280f0000026bef3",
      "text": "     text.split(\"\\n\").flatMap((line) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003025,
      "updated": 1667003039
    },
    {
      "id": "635c72a01280f0000026bef4",
      "text": "       const question = line.match(/^\\s*\\[anki.icon\\](.*)\\s*$/i)?.[1];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003039,
      "updated": 1667003106
    },
    {
      "id": "635c72e11280f0000026bef6",
      "text": "       return question ? [question] : [];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003106,
      "updated": 1667003120
    },
    {
      "id": "635c72a01280f0000026bef5",
      "text": "     });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003040,
      "updated": 1667003123
    },
    {
      "id": "635c72f91280f0000026bef7",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003129,
      "updated": 1667003130
    },
    {
      "id": "635c72501280f0000026beef",
      "text": " projectからページを全部取得し、Ankiの問題を生成する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667002961,
      "updated": 1667003152
    },
    {
      "id": "635c73101280f0000026bef9",
      "text": "  owner権限のある場合はexport apiで一度に取得し、それ以外の場合は[api/pages/:project/:title]で1ページずつクロールする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003152,
      "updated": 1667003205
    },
    {
      "id": "635c73461280f0000026befa",
      "text": "  code:loadAllPages.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003206,
      "updated": 1667003222
    },
    {
      "id": "635c73821280f0000026beff",
      "text": "   import { exportPages, readLinks, getPage } from \"./deps.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003267,
      "updated": 1667040769
    },
    {
      "id": "635c73821280f0000026bf00",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003267,
      "updated": 1667003267
    },
    {
      "id": "635c734a1280f0000026befb",
      "text": "   export const loadAllPages = async (project: string) => Promise<Result<Page[], NotFoundError | NotLoggedInError>> => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003210,
      "updated": 1667040744
    },
    {
      "id": "635d055e1280f000008ad737",
      "text": "     const result = await exportPages(project);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667040606,
      "updated": 1667040624
    },
    {
      "id": "635d05711280f000008ad738",
      "text": "     if (result.ok) return { ok: true, value: result.value.pages };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667040625,
      "updated": 1667040684
    },
    {
      "id": "635d05971280f000008ad739",
      "text": "     if (result.value.name !== NotPrivilegeError) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667040664,
      "updated": 1667040688
    },
    {
      "id": "635d05b11280f000008ad73a",
      "text": "       return { ok: false, value: result.value };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667040688,
      "updated": 1667040702
    },
    {
      "id": "635c737c1280f0000026befd",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003261,
      "updated": 1667040704
    },
    {
      "id": "635d06091280f000008ad73d",
      "text": "     // 一ページずつ取得する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667040777,
      "updated": 1667040784
    },
    {
      "id": "635d06101280f000008ad73e",
      "text": "     // 実装はOmnibox版HelpLineを参照して書く",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667040784,
      "updated": 1667040809
    },
    {
      "id": "635d05c11280f000008ad73b",
      "text": "     for await (const link of readLinks()) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667040705,
      "updated": 1667040725
    },
    {
      "id": "635d05d51280f000008ad73c",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667040725,
      "updated": 1667040725
    },
    {
      "id": "635c737b1280f0000026befc",
      "text": "   };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003259,
      "updated": 1667003259
    },
    {
      "id": "635c72fb1280f0000026bef8",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003131,
      "updated": 1667003131
    },
    {
      "id": "635c738e1280f0000026bf01",
      "text": "code:deps.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003278,
      "updated": 1667003281
    },
    {
      "id": "635c73911280f0000026bf03",
      "text": " export * from \"https://github.com/takker99/scrapbox-userscript-std/blob/main/rest/mod.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003281,
      "updated": 1667003308
    },
    {
      "id": "635c73ac1280f0000026bf04",
      "text": " export { parse as parseScrapbox } from \"https://esm.sh/@progfay/scrapbox-parser@8.1.0\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003308,
      "updated": 1667949982
    },
    {
      "id": "636ae59e1280f000000a3b0f",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667949983,
      "updated": 1667949983
    },
    {
      "id": "635c738f1280f0000026bf02",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1667003280,
      "updated": 1667003280
    }
  ]
}