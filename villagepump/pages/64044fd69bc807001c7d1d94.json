{
  "id": "64044fd69bc807001c7d1d94",
  "title": "渡せるtokenいっぱいまで渡したい",
  "created": 1678004183,
  "updated": 1678119263,
  "lines": [
    {
      "id": "64044fd69bc807001c7d1d94",
      "text": "渡せるtokenいっぱいまで渡したい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004183
    },
    {
      "id": "64044fd7aff09e00001130a0",
      "text": "from [2023/2/21 Scrapboxの内容を元にしたチャットbotを実装する]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004183
    },
    {
      "id": "64044fd7aff09e00001130a1",
      "text": "現状毎回4チャンクだけ文章を取ってきているが、渡せるtokenいっぱいまで渡したい[blu3mo.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004202
    },
    {
      "id": "64044fd7aff09e00001130a3",
      "text": "　わかるわかる[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130a4",
      "text": "　ベストマッチから4チャンク連続で取ってる？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130a5",
      "text": "　 yes[blu3mo.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130a6",
      "text": "　個人的にはTop Kの値を増やして「関係ありそうなところをあちこち読む」のの方が「[関係の発見]」を強く支援してくれるのではないかと思ってる([類似度Top Kをプロンプトに積みたい])",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130a7",
      "text": "　 それに合った適切なPromptを見つけられれば、良さそう[blu3mo.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130a8",
      "text": "　　 現状、渡したドキュメントをそのまま吐き出すみたいな回答をしてくるので、そのPromptのままでソースのランダムさを高めると回答がよりとんちんかんになりそう",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130a9",
      "text": "　　なるほど[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130aa",
      "text": "　　\t今のクオリアさんは「下記の議論を参考にあなたの意見を述べよ」ってプロンプトなので僕の意見や他人のTweetやScrapbox上の議論を雑に突っ込んで運用してるけどあんまり気にならないな",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130ab",
      "text": "　　\t確かに話が連続してない格言集を連続で読ませて生成した時には雑な短い要約の羅列になってイマイチだった",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130ac",
      "text": "　　\t　[/nishio/AIバルタサル・グラシアン実験#63fecb29aff09e0000a01299]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130ad",
      "text": "　　\t要約をするのではなく論点を一つに絞って語れ、というプロンプトに明示するといいのかな〜",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004193
    },
    {
      "id": "64044fd7aff09e00001130ae",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004183
    },
    {
      "id": "64044fd7aff09e00001130af",
      "text": "2023-03-05[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004183,
      "updated": 1678004252
    },
    {
      "id": "6404501caff09e0000c03371",
      "text": " ユーザの入力のトークン数を[tiktoken]で数える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004252,
      "updated": 1678004435
    },
    {
      "id": "6404577baff09e00001130b0",
      "text": " \t`tiktoken.get_encoding(\"cl100k_base\").encode(\"Hello, world.\")`",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678006139,
      "updated": 1678006141
    },
    {
      "id": "6404505faff09e0000c03374",
      "text": " 残り何トークン取得できるか調べる(X)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004319,
      "updated": 1678004344
    },
    {
      "id": "64045032aff09e0000c03372",
      "text": " ベクトルサーチの結果を",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004274,
      "updated": 1678004349
    },
    {
      "id": "6404508caff09e0000c03376",
      "text": " 　A: トークン上限Xで返させる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004364,
      "updated": 1678007986
    },
    {
      "id": "6404507caff09e0000c03375",
      "text": "  B: 多めに返させて自分で切る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004349,
      "updated": 1678004385
    },
    {
      "id": "640450a3aff09e0000c03378",
      "text": "  当初BのつもりだったがAのオプションがあるならそれでもいいな",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004388,
      "updated": 1678004407
    },
    {
      "id": "64045e9faff09e0000c0338c",
      "text": "  [LlamaIndex]にAはない　[2023-03-31 LlamaIndexのコードを読む#64045d69aff09e00001130b3]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678007967,
      "updated": 1678008170
    },
    {
      "id": "64045049aff09e0000c03373",
      "text": "　うーん、じゃあLlamaIndexのアドバンテージは特にないわけなので[LangChain]ベースに切り替えて[LangChain]と[scrapchat]のソースを読むかな",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678004297,
      "updated": 1678008371
    },
    {
      "id": "64045014aff09e0000c03370",
      "text": "　　[scrapchat]の元は[LangChain Chat][blu3mo.icon]",
      "userId": "5d89b1f60230ae001779e113",
      "created": 1678004245,
      "updated": 1678014647
    },
    {
      "id": "6404789279e1130000cd0cc2",
      "text": "",
      "userId": "5d89b1f60230ae001779e113",
      "created": 1678014610,
      "updated": 1678014610
    },
    {
      "id": "640609afaff09e0000e41042",
      "text": "[AIクオリアさんv3]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678117295,
      "updated": 1678117320
    },
    {
      "id": "640609c8aff09e0000e41044",
      "text": " tiktokenでトークン数を数えた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678117320,
      "updated": 1678117812
    },
    {
      "id": "64060bbaaff09e0000e41045",
      "text": " プロンプトが400程度",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678117819,
      "updated": 1678117826
    },
    {
      "id": "64060bc2aff09e0000e41046",
      "text": " サンプルが1200程度",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678117826,
      "updated": 1678117844
    },
    {
      "id": "64060bd4aff09e0000e41047",
      "text": " たくさん読ませたい時にサンプルを削るのが面倒で少ないけど、もっと入れられる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678117845,
      "updated": 1678117904
    },
    {
      "id": "64060c10aff09e0000e41048",
      "text": " ベクトルサーチの前にまずはそこを作る",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678117905,
      "updated": 1678117918
    },
    {
      "id": "64060d06aff09e0000911d35",
      "text": " day74を丸ごと追加したけど2599",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678118150,
      "updated": 1678118492
    },
    {
      "id": "64060e5eaff09e0000e41049",
      "text": " 80件くらいのリストを作ったら5000超えたのでひとまずこれで良い",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678118495,
      "updated": 1678118519
    },
    {
      "id": "64060ea7aff09e0000e4104a",
      "text": " 　多分全体では10倍くらいある",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678118568,
      "updated": 1678118576
    },
    {
      "id": "640610afaff09e0000e4104c",
      "text": " 頭から順に入るだけ入れる",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678119087,
      "updated": 1678119098
    },
    {
      "id": "640610bdaff09e0000e4104d",
      "text": " できた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678119102,
      "updated": 1678119103
    },
    {
      "id": "64060eb0aff09e0000e4104b",
      "text": "  code:json",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678118576,
      "updated": 1678119106
    },
    {
      "id": "64061091aff09e0000911d37",
      "text": "   \"usage\": {",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678119057,
      "updated": 1678119106
    },
    {
      "id": "64061091aff09e0000911d38",
      "text": "       \"completion_tokens\": 72,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678119057,
      "updated": 1678119106
    },
    {
      "id": "64061091aff09e0000911d39",
      "text": "       \"prompt_tokens\": 3828,",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678119057,
      "updated": 1678119106
    },
    {
      "id": "64061091aff09e0000911d3a",
      "text": "       \"total_tokens\": 3900",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678119057,
      "updated": 1678119106
    },
    {
      "id": "64061091aff09e0000911d3b",
      "text": "   }",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678119057,
      "updated": 1678119106
    },
    {
      "id": "64060d16aff09e0000911d36",
      "text": "　あとはこのリストが類似度順ソートになればいい",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678118167,
      "updated": 1678119120
    },
    {
      "id": "640610c4aff09e0000e4104e",
      "text": "　この時点で人がプロンプトを書いていたv2までとは違うものになったと思うのでv3にした",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678119109,
      "updated": 1678119263
    },
    {
      "id": "64061123aff09e0000e4104f",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1678119203,
      "updated": 1678119203
    }
  ]
}