{
  "id": "650560b0adc165001b6e4ed2",
  "title": "url-customizerでtweetを展開する際に絵文字が入っているとバグる",
  "created": 1694851251,
  "updated": 1696085758,
  "lines": [
    {
      "id": "650560b0adc165001b6e4ed2",
      "text": "url-customizerでtweetを展開する際に絵文字が入っているとバグる",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851251,
      "updated": 1694851251
    },
    {
      "id": "650560b25f1e0d00008c605f",
      "text": "[scrapbox-url-customizer]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851251,
      "updated": 1694851270
    },
    {
      "id": "650560c55f1e0d00008c6063",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851271,
      "updated": 1694851271
    },
    {
      "id": "650560eb5f1e0d00008c6066",
      "text": "色んなものを展開しようとこのサイトのポストで試していたら再現",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851309,
      "updated": 1694853489
    },
    {
      "id": "6505696d5f1e0d0000319082",
      "text": " [1つのツイートに動画、画像、GIFを同時に添付できるようになりました https://blog.twitter.com/ja_jp/topics/product/2022/introducing_mixed_media_videos_images_gifs_together_one_tweet]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853487,
      "updated": 1694853489
    },
    {
      "id": "650560b85f1e0d00008c6060",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851258,
      "updated": 1694851258
    },
    {
      "id": "6505611c5f1e0d00008c6067",
      "text": "おかしい例( https://twitter.com/discord/status/1702000633421746233 )",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851358,
      "updated": 1694851401
    },
    {
      "id": "650561205f1e0d00008c6069",
      "text": "> [Discord(@discord) https://twitter.com/discord/status/1702000633421746233]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851362,
      "updated": 1694851364
    },
    {
      "id": "650561225f1e0d00008c606a",
      "text": "> 🚨 New Desktop Feature: Channel Status",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851364,
      "updated": 1694851364
    },
    {
      "id": "650561225f1e0d00008c606b",
      "text": "> ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851364,
      "updated": 1694851364
    },
    {
      "id": "650561225f1e0d00008c606c",
      "text": "> Let the rest of the server know what you're up to in voice so people can join in. &lt;3 Enjoy!",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851364,
      "updated": 1694853463
    },
    {
      "id": "650561225f1e0d00008c606d",
      "text": "> [https://pbs.twimg.com/media/F564jbGX0AYZKrg.png]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851364,
      "updated": 1694851364
    },
    {
      "id": "650561225f1e0d00008c606e",
      "text": "> Y",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851364,
      "updated": 1694851364
    },
    {
      "id": "6505611f5f1e0d00008c6068",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851360,
      "updated": 1694851930
    },
    {
      "id": "6505638d5f1e0d00008c607a",
      "text": " 最後の行に`Y`が入っている",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851983,
      "updated": 1694851991
    },
    {
      "id": "650563565f1e0d00008c6076",
      "text": " これ例としてよくないな...[wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851928,
      "updated": 1694851937
    },
    {
      "id": "650563615f1e0d00008c6077",
      "text": "  `<`が展開できていないのも含んでいる",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851938,
      "updated": 1694851962
    },
    {
      "id": "6505637b5f1e0d00008c6078",
      "text": "  後で調べる",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851964,
      "updated": 1694851967
    },
    {
      "id": "6505637d5f1e0d00008c6079",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851967,
      "updated": 1694851967
    },
    {
      "id": "650561585f1e0d00008c606f",
      "text": "期待する展開",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851418,
      "updated": 1694851421
    },
    {
      "id": "6505615c5f1e0d00008c6071",
      "text": "> [Discord(@discord) https://twitter.com/discord/status/1702000633421746233]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851422,
      "updated": 1694851423
    },
    {
      "id": "6505615e5f1e0d00008c6072",
      "text": "> 🚨 New Desktop Feature: Channel Status",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851423,
      "updated": 1694851423
    },
    {
      "id": "6505615e5f1e0d00008c6073",
      "text": "> ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851423,
      "updated": 1694851423
    },
    {
      "id": "6505615e5f1e0d00008c6074",
      "text": "> Let the rest of the server know what you're up to in voice so people can join in. <3 Enjoy!",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851423,
      "updated": 1694851436
    },
    {
      "id": "6505615e5f1e0d00008c6075",
      "text": "> [https://pbs.twimg.com/media/F564jbGX0AYZKrg.png]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851423,
      "updated": 1694851423
    },
    {
      "id": "650561595f1e0d00008c6070",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851419,
      "updated": 1694851419
    },
    {
      "id": "6505639b5f1e0d00008c607b",
      "text": "原因",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851998,
      "updated": 1694851998
    },
    {
      "id": "6505639b5f1e0d00008c607c",
      "text": " [https://code2svg.vercel.app/svg/L92-104/https://raw.githubusercontent.com/takker99/scrapbox-url-customizer/456c3fcb1bce21e5b73f873d81bfda5089b0c3ae/internal/processTweet.ts#.svg https://github.com/takker99/scrapbox-url-customizer/blob/456c3fcb1bce21e5b73f873d81bfda5089b0c3ae/internal/processTweet.ts#L92]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694851998,
      "updated": 1694852458
    },
    {
      "id": "650563b65f1e0d00008c607d",
      "text": "  `tweet.text`はツイートの文章(短縮リンクやハッシュタグを含む)",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852024,
      "updated": 1694852262
    },
    {
      "id": "650564a45f1e0d0000d8405a",
      "text": "   `text.slice()`で要素ごとに分割しているが絵文字が含まれると正しく取り出せない",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852262,
      "updated": 1694852371
    },
    {
      "id": "650565125f1e0d0000d8405c",
      "text": "   [https://zenn.dev/leaner_dev/articles/20221014-javascript-unicode-substring JavaScriptでマルチバイト文字列のsubstringは問題なく動く]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852372,
      "updated": 1694852774
    },
    {
      "id": "650566a55f1e0d000056efa0",
      "text": "   [https://www.utakata.work/entry/20180110/1515574086 JavaScript の正規表現で、改行も含めた全ての文字列マッチがうまくいかない - 猫でもわかるWebプログラミングと副業]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852774,
      "updated": 1694852776
    },
    {
      "id": "6505651e5f1e0d0000d8405d",
      "text": "   code:js",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852774,
      "updated": 1694852774
    },
    {
      "id": "6505658c5f1e0d0000d8405e",
      "text": "    const unicodeSubstring `` = (str, start, end) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694852493,
      "updated": 1694856172
    },
    {
      "id": "650566905f1e0d000056ef9c",
      "text": "      const reg = new RegExp(`^[\\\\s\\\\S]{${start}}([\\\\s\\\\S]{0,${end - start}})`, 'u')",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852754,
      "updated": 1694852756
    },
    {
      "id": "650566905f1e0d000056ef9d",
      "text": "      return str.match(reg)?.[1]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852754,
      "updated": 1694852756
    },
    {
      "id": "650566905f1e0d000056ef9e",
      "text": "    }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852754,
      "updated": 1694852756
    },
    {
      "id": "650566905f1e0d000056ef9f",
      "text": "    unicodeSubstring(tweet.text,indices[0] - offset,tweet.text.length)",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852754,
      "updated": 1694852756
    },
    {
      "id": "650567ec5f1e0d00001b2a4a",
      "text": "  誤",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853101,
      "updated": 1694853101
    },
    {
      "id": "650567915f1e0d00001b2a3b",
      "text": "   `before`:`\"🚨 New Desktop Feature: Channel Status\\n\\nLet the rest of the server know what you're up to in voice so people can join in. &lt;3 Enjoy! \"`",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853011,
      "updated": 1694853042
    },
    {
      "id": "650567c05f1e0d00001b2a47",
      "text": "   `text`:`'Y'`",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853058,
      "updated": 1694853063
    },
    {
      "id": "650567ed5f1e0d00001b2a4e",
      "text": "  正",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853103,
      "updated": 1694853103
    },
    {
      "id": "650567915f1e0d00001b2a3d",
      "text": "   `before`:`\"🚨 New Desktop Feature: Channel Status\\n\\nLet the rest of the server know what you're up to in voice so people can join in. &lt;3 Enjoy!\"`",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853011,
      "updated": 1694853051
    },
    {
      "id": "650567915f1e0d00001b2a42",
      "text": "   `text`:`''`",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853011,
      "updated": 1694853092
    },
    {
      "id": "650567915f1e0d00001b2a43",
      "text": " 　あっ………………………………………………………………………………………………………………………………………………………[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694853011,
      "updated": 1694855492
    },
    {
      "id": "650573d61280f000006b7ff8",
      "text": " 　取り急ぎ[修正 https://github.com/takker99/scrapbox-url-customizer/pull/32]しました",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694856151,
      "updated": 1694856161
    },
    {
      "id": "650573e01280f000006b7ff9",
      "text": " 　 `unicodeSubstring`ではなく[spread operator]で[書記素クラスター]ごとに分割する方法を取っています",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694856161,
      "updated": 1694856220
    },
    {
      "id": "650567915f1e0d00001b2a44",
      "text": "   こっちのほうがスマートでGOOD[wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853011,
      "updated": 1694856226
    },
    {
      "id": "6505743b1280f000006b7ffa",
      "text": "   ちなみに[Full Emoji Modifier]の分割には失敗しました[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694856251,
      "updated": 1694856283
    },
    {
      "id": "6505745b1280f000006b7ffb",
      "text": "    こんな文字は「しらんがな」です",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694856283,
      "updated": 1694856335
    },
    {
      "id": "6505756f5f1e0d0000de7238",
      "text": "    [絵文字の闇]すぎるから困ったときに直そう...[wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856561,
      "updated": 1694856571
    },
    {
      "id": "650565945f1e0d0000d84062",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852502,
      "updated": 1694852502
    },
    {
      "id": "650566235f1e0d0000d84066",
      "text": "> [Discord(@discord) https://twitter.com/discord/status/1702000633421746233]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852644,
      "updated": 1694853258
    },
    {
      "id": "650568885f1e0d0000319078",
      "text": "> 🚨 New Desktop Feature: Channel Status",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853258,
      "updated": 1694853258
    },
    {
      "id": "650568885f1e0d0000319079",
      "text": "> ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853258,
      "updated": 1694853258
    },
    {
      "id": "650568885f1e0d000031907a",
      "text": "> Let the rest of the server know what you're up to in voice so people can join in. &lt;3 Enjoy! ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853258,
      "updated": 1694853258
    },
    {
      "id": "650568885f1e0d000031907b",
      "text": "> [https://pbs.twimg.com/media/F564jbGX0AYZKrg.png]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853258,
      "updated": 1694853258
    },
    {
      "id": "650568885f1e0d000031907c",
      "text": "> ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853258,
      "updated": 1694853258
    },
    {
      "id": "650566235f1e0d0000d84067",
      "text": " 場当たり的に追加した[/yuyasurarin/url-customizer-script#6505681b5f1e0d000099b8f7]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694852644,
      "updated": 1694853280
    },
    {
      "id": "6505688d5f1e0d000031907d",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853262,
      "updated": 1694853262
    },
    {
      "id": "650568e35f1e0d000031907e",
      "text": "オマケ:`<`について",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853349,
      "updated": 1694853477
    },
    {
      "id": "650569585f1e0d000031907f",
      "text": " [https://www.cis.twcu.ac.jp/~asakawa/comp2d-2008/special_chars.html html の特殊文字]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853465,
      "updated": 1694853550
    },
    {
      "id": "650569875f1e0d0000319084",
      "text": " [https://shanabrian.com/web/javascript/unescape-html.php HTML文字列をアンエスケープ | JavaScript逆引き | Webサイト制作支援 | ShanaBrian Website]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853513,
      "updated": 1694854300
    },
    {
      "id": "65056e045f1e0d0000ea7164",
      "text": " [/yuyasurarin/url-customizer-script#6505681b5f1e0d000099b8f7]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854661,
      "updated": 1694854662
    },
    {
      "id": "6505749c1280f000006b7ffc",
      "text": " 便利そうなので取り込みます[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694856349,
      "updated": 1694856361
    },
    {
      "id": "65057b461280f000006b8002",
      "text": "  https://github.com/takker99/scrapbox-url-customizer/pull/33",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858055,
      "updated": 1694858057
    },
    {
      "id": "65056deb5f1e0d0000ea7163",
      "text": "旧",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854637,
      "updated": 1694854640
    },
    {
      "id": "650569855f1e0d0000319083",
      "text": "> [BcS114(@YSurarin) https://twitter.com/YSurarin/status/1702965451712819281]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853511,
      "updated": 1694853626
    },
    {
      "id": "650569f85f1e0d0000319086",
      "text": "> &amp;quot;\"\"\"クォーテーション&amp;amp;\"&amp;\"アンパサンド&amp;lt;\"&lt;\"小なり&amp;gt;\"&gt;\"大なり&amp;nbsp;\" \"空白&amp;copy;\"©\"コピーライト",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853626,
      "updated": 1694853626
    },
    {
      "id": "650569f85f1e0d0000319087",
      "text": "> ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853626,
      "updated": 1694853626
    },
    {
      "id": "650569f85f1e0d0000319088",
      "text": "> テスト",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853626,
      "updated": 1694853626
    },
    {
      "id": "65056de75f1e0d0000ea7162",
      "text": "新",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854633,
      "updated": 1694854635
    },
    {
      "id": "650569f65f1e0d0000319085",
      "text": "> [BcS114(@YSurarin) https://twitter.com/YSurarin/status/1702965451712819281]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694853624,
      "updated": 1694854631
    },
    {
      "id": "65056de55f1e0d0000ea715f",
      "text": "> &quot;\"\"\"クォーテーション&amp;\"&\"アンパサンド&lt;\"<\"小なり&gt;\">\"大なり&nbsp;\" \"空白&copy;\"©\"コピーライト",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854631,
      "updated": 1694854631
    },
    {
      "id": "65056de55f1e0d0000ea7160",
      "text": "> ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854631,
      "updated": 1694854631
    },
    {
      "id": "65056de55f1e0d0000ea7161",
      "text": "> テスト",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854631,
      "updated": 1694854631
    },
    {
      "id": "65056cf45f1e0d00003aeb95",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854390,
      "updated": 1694854390
    },
    {
      "id": "65056e415f1e0d0000ea7165",
      "text": "テスト",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854724,
      "updated": 1694854725
    },
    {
      "id": "65056e445f1e0d0000ea7167",
      "text": " > [aespa(@aespa_official) https://twitter.com/aespa_official/status/1577272978059845633]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854725,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea7168",
      "text": " > Paris 🍷🥖 ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea7169",
      "text": " > ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea716a",
      "text": " >  #aespa   #KARINA   #aespaPFW  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea716b",
      "text": " > [https://pbs.twimg.com/media/FeOZYI7aAAAsObU.jpg] [https://pbs.twimg.com/media/FeOZYJAakAAZLHP.jpg]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea716c",
      "text": " > ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea716d",
      "text": "> [aespa(@aespa_official) https://twitter.com/aespa_official/status/1577282815250427907]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea716e",
      "text": "> Paris 🍷🥖",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea716f",
      "text": "> ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea7170",
      "text": ">  #aespa   #KARINA   #aespaPFW  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea7171",
      "text": "> [https://pbs.twimg.com/media/FeOiU7UakAAFWy8.jpg] [https://video.twimg.com/ext_tw_video/1577282774926778374/pu/pl/u6Ym3TTgqR5gZ82E.m3u8?tag=12&container=fmp4&v=b24#.mp4]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea7172",
      "text": "> [https://video.twimg.com/ext_tw_video/1577282774922588160/pu/pl/mCNp6j4WjNav3Zss.m3u8?tag=12&container=fmp4#.mp4] [https://pbs.twimg.com/media/FeOiU7VacAARf4W.jpg]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e495f1e0d0000ea7173",
      "text": "> ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854731,
      "updated": 1694854731
    },
    {
      "id": "65056e415f1e0d0000ea7166",
      "text": " 動画が表示できなくなってる...",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694854724,
      "updated": 1694856740
    },
    {
      "id": "650576215f1e0d0000de723a",
      "text": " code:js",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856740,
      "updated": 1694856741
    },
    {
      "id": "650576235f1e0d0000de723b",
      "text": "  ...tweet.entities.media?.map?.((media) => ({",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856741,
      "updated": 1694856776
    },
    {
      "id": "650576465f1e0d0000de723c",
      "text": "        type: \"media\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856776,
      "updated": 1694856776
    },
    {
      "id": "650576465f1e0d0000de723d",
      "text": "        indices: media.indices,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856776,
      "updated": 1694856776
    },
    {
      "id": "650576465f1e0d0000de723e",
      "text": "        media: tweet.mediaDetails?.flatMap?.((detail) => detail.url === media.url ? [{",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856776,
      "updated": 1694856776
    },
    {
      "id": "650576465f1e0d0000de723f",
      "text": "          type: detail.type,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856776,
      "updated": 1694856776
    },
    {
      "id": "650576465f1e0d0000de7240",
      "text": "          //url: new URL(detail.video_info?.variants?.sort?.((a, b) => b.bitrate - a.bitrate)?.[0].url ?? detail.media_url_https)",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856776,
      "updated": 1694856793
    },
    {
      "id": "650576525f1e0d0000de7243",
      "text": "          url: new URL(detail.video_info?.variants.filter(variant => variant.bitrate)?.sort?.((a, b) => b.bitrate - a.bitrate)?.[0].url ?? detail.media_url_https)",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856788,
      "updated": 1694856816
    },
    {
      "id": "650576465f1e0d0000de7241",
      "text": "        }] : []) ?? []",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856776,
      "updated": 1694856776
    },
    {
      "id": "650576465f1e0d0000de7242",
      "text": "      })) ?? []",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694856776,
      "updated": 1694856776
    },
    {
      "id": "6505761e5f1e0d0000de7239",
      "text": " これも入れました[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694856735,
      "updated": 1694858020
    },
    {
      "id": "65057b231280f000006b8001",
      "text": "  https://github.com/takker99/scrapbox-url-customizer/pull/34",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858020,
      "updated": 1694858047
    },
    {
      "id": "651836e05f1e0d00008de1e2",
      "text": "  bitrateが0のやつ見つけたけど眠いので今日はやらない[wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1696085728,
      "updated": 1696085747
    },
    {
      "id": "651836f35f1e0d00008de1e3",
      "text": "   https://twitter.com/thibaudz/status/1707733015663653167",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1696085747,
      "updated": 1696085758
    },
    {
      "id": "65057b211280f000006b8000",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694858017,
      "updated": 1694858563
    },
    {
      "id": "65057d425f1e0d0000de7244",
      "text": "オマケ2",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694858563,
      "updated": 1694858565
    },
    {
      "id": "65057d445f1e0d0000de7246",
      "text": " メディアがあったときに入る謎の空行",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694858566,
      "updated": 1694858575
    },
    {
      "id": "65057d4d5f1e0d0000de7247",
      "text": "  これはメディアの後にテキストがあるのかどうか判定するときにミスっているぽい",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694858575,
      "updated": 1694858635
    },
    {
      "id": "65057d895f1e0d0000de7248",
      "text": "  [https://code2svg.vercel.app/svg/L106/https://raw.githubusercontent.com/takker99/scrapbox-url-customizer/b3dd429d5a43c6f5bd34f8427b63cca181fe301f/internal/processTweet.ts#.svg https://github.com/takker99/scrapbox-url-customizer/blob/b3dd429d5a43c6f5bd34f8427b63cca181fe301f/internal/processTweet.ts#L106C73-L106C73]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694858635,
      "updated": 1694858686
    },
    {
      "id": "65057d435f1e0d0000de7245",
      "text": "  なんかミスってる気がするので訂正",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694858565,
      "updated": 1694858778
    },
    {
      "id": "65057de85f1e0d0000de724b",
      "text": "  なんかうまいこと単体テスト入れてPR書いてくれるとうれし～[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858731,
      "updated": 1694858794
    },
    {
      "id": "65057e501280f00000fc7e89",
      "text": "    自分はもうおやすみする時間なので",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858834,
      "updated": 1694858849
    },
    {
      "id": "65057e6f5f1e0d0000de724d",
      "text": "    おやすも[wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1694858865,
      "updated": 1694858869
    },
    {
      "id": "65057e291280f00000fc7e88",
      "text": "   テストケースの追加方法は[#33 https://github.com/takker99/scrapbox-url-customizer/pull/33]を参照",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858794,
      "updated": 1694858827
    },
    {
      "id": "65057eb21280f00000fc7e8a",
      "text": "    snapshot testは",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858932,
      "updated": 1694858980
    },
    {
      "id": "65057ec41280f00000fc7e8c",
      "text": "     $ deno test --allow-read --allow-write -- -u",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858950,
      "updated": 1694858960
    },
    {
      "id": "65057e141280f00000fc7e87",
      "text": "     で更新できる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858774,
      "updated": 1694858974
    },
    {
      "id": "65057ef21280f00000fc7e8f",
      "text": "    生成されたsnapshot通りになるかどうかは",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858995,
      "updated": 1694859004
    },
    {
      "id": "65057ee41280f00000fc7e8e",
      "text": "     $ deno test --allow-read",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858982,
      "updated": 1694859005
    },
    {
      "id": "65057efb1280f00000fc7e90",
      "text": "     で確認できる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694859005,
      "updated": 1694859010
    },
    {
      "id": "65057ed01280f00000fc7e8d",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1694858962,
      "updated": 1694858962
    },
    {
      "id": "6508fd72e5172d0000e91fe3",
      "text": "修正助かります！[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1695087987,
      "updated": 1695087994
    },
    {
      "id": "6508fd77e5172d0000e91fe4",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1695087992,
      "updated": 1695087992
    }
  ]
}