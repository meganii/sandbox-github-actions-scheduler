{
  "id": "643bc128fa948c001c3932bc",
  "title": "chatGPTとchatするUserScript",
  "created": 1681637685,
  "updated": 1683385153,
  "lines": [
    {
      "id": "643bc128fa948c001c3932bc",
      "text": "chatGPTとchatするUserScript",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637685,
      "updated": 1681637685
    },
    {
      "id": "64566ade5f1e0d0000f15388",
      "text": "使い方",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385055,
      "updated": 1683385057
    },
    {
      "id": "64566ae15f1e0d0000f15389",
      "text": "　導入すると青いボタンが行ごとに出るので実行しちゃってください",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385057,
      "updated": 1683385085
    },
    {
      "id": "64566b375f1e0d0000f1538c",
      "text": "　 行の下に返答が挿入されます",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385143,
      "updated": 1683385153
    },
    {
      "id": "64566aff5f1e0d0000f1538b",
      "text": "　[** 多分]並列処理できます",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385087,
      "updated": 1683385126
    },
    {
      "id": "64566ae15f1e0d0000f1538a",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385058,
      "updated": 1683385058
    },
    {
      "id": "643bc10b5f1e0d0000550a43",
      "text": "[AskChatGPT]との違いを作らないと意味がないな",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637685,
      "updated": 1681637701
    },
    {
      "id": "643bc11d5f1e0d0000550a45",
      "text": " ちょっとUI綺麗にしました！で許してくれる？[yuyasurarin.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637703,
      "updated": 1681637712
    },
    {
      "id": "643bc1265f1e0d0000550a46",
      "text": " chat形式になってればいいや！",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637712,
      "updated": 1681637742
    },
    {
      "id": "643bc1445f1e0d0000550a47",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637742,
      "updated": 1681637745
    },
    {
      "id": "643bc3265f1e0d0000550a9a",
      "text": "もうChatGPTのAPIの無料期間終わってるから試せない！誰か試して(投げやり)[yuyasurarin.icon*2]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681638224,
      "updated": 1683384835
    },
    {
      "id": "643bc3275f1e0d0000550a9b",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681638225,
      "updated": 1681638225
    },
    {
      "id": "643bc1475f1e0d0000550a48",
      "text": "必要",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637745,
      "updated": 1683384793
    },
    {
      "id": "645669d75f1e0d00003f6e1b",
      "text": " [AskChatGPT](の[TamperMonkey]部分)をtamperMonkeyに導入する",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683384792,
      "updated": 1683384792
    },
    {
      "id": "645669d45f1e0d00003f6e1a",
      "text": " [このリンク https://scrapbox-bundler.vercel.app/?url=https://scrapbox.io/api/code/villagepump/chatGPTとchatするUserScript/sc.js&run&reload&minify&bundle]でbundleした以下のコードを自分のページに貼り付ける",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683384788,
      "updated": 1683384798
    },
    {
      "id": "64566ad75f1e0d0000f15387",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385048,
      "updated": 1683385048
    },
    {
      "id": "643bc10c5f1e0d0000550a44",
      "text": " code:sc.js",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637687,
      "updated": 1681637785
    },
    {
      "id": "643bc1ad5f1e0d0000550a8a",
      "text": "  import { joinPageRoom } from \"https://raw.githubusercontent.com/takker99/scrapbox-headless-script/0.3.1/mod.ts\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637847,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dd6",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dd7",
      "text": "  function updateButtonStyle(button, lineElement, indent) {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dd8",
      "text": "    const head = lineElement.getElementsByClassName(\"indent\")[0]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dd9",
      "text": "      ?? lineElement.getElementsByClassName(\"char-index\")[0];",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dda",
      "text": "    const offset = lineElement.getBoundingClientRect().left;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6ddb",
      "text": "    const left = indent === 0 ? offset : head.getBoundingClientRect().left;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6ddc",
      "text": "    button.style.left = `calc(${Math.round(left - offset)}px - ${lineElement.getElementsByClassName(\"code-body\").length > 0 ? 2.0 : 1.0}em)`;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6ddd",
      "text": "  }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dde",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6ddf",
      "text": "  async function onButtonClick(lineElement) { // async を追加",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de0",
      "text": "    const result = await askChatGPT(lineElement.innerText.trimStart()); // await を追加",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de1",
      "text": "    let answer;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de2",
      "text": "    if (!result.error) {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de3",
      "text": "      answer = result.choices[0].message.content.trim();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de4",
      "text": "    } else {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de5",
      "text": "      answer = \"test\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de6",
      "text": "    }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de7",
      "text": "    const { insert, cleanup } = await joinPageRoom(scrapbox.Project.name, scrapbox.Page.title);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de8",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de9",
      "text": "    const nextLineElement = lineElement.nextElementSibling;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dea",
      "text": "    if (nextLineElement) {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6deb",
      "text": "      await insert(lineElement.textContent.match(/^\\s*/)[0].replace(/\\t/g,\" \")+\" \"+answer, nextLineElement.id.slice(1));",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683384569
    },
    {
      "id": "6456652e5f1e0d00003f6dec",
      "text": "    } else {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6ded",
      "text": "      await insert(lineElement.textContent.match(/^\\s*/)[0].replace(/\\t/g,\" \")+\" \"+answer, \"_end\");",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683384573
    },
    {
      "id": "6456652e5f1e0d00003f6dee",
      "text": "    }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6def",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df0",
      "text": "    cleanup();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df1",
      "text": "  }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df2",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df3",
      "text": "  function renderButton() {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df4",
      "text": "    if (scrapbox.Layout !== \"page\") return;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df5",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df6",
      "text": "    scrapbox.Page.lines.forEach(line => {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df7",
      "text": "      const lineElement = document.querySelector(`#L${line.id}`);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df8",
      "text": "      let button = lineElement.querySelector(\"a\");",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df9",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dfa",
      "text": "      if (button) {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dfb",
      "text": "        if (line.text.trim() === \"\") {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dfc",
      "text": "          button.style.display = \"none\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dfd",
      "text": "        } else {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dfe",
      "text": "          button.style.display = \"inline\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dff",
      "text": "          updateButtonStyle(button, lineElement, lineElement.indent);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e00",
      "text": "        }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e01",
      "text": "      } else if (line.text.trim() !== \"\") {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e02",
      "text": "        button = document.createElement(\"a\");",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e03",
      "text": "        button.type = \"button\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e04",
      "text": "        button.style.position = \"absolute\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e05",
      "text": "        button.style.fontSize = \"20px\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e06",
      "text": "        button.style.zIndex = \"200\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e07",
      "text": "        updateButtonStyle(button, lineElement, lineElement.indent);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e08",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e09",
      "text": "        button.addEventListener(\"click\", () => onButtonClick(lineElement));",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0a",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0b",
      "text": "        const icon = document.createElement(\"i\");",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0c",
      "text": "        icon.className = \"fas fa-caret-down\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0d",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0e",
      "text": "        button.append(icon);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0f",
      "text": "        lineElement.insertAdjacentElement(\"afterbegin\", button);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e10",
      "text": "      }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e11",
      "text": "    });",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e12",
      "text": "  }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e13",
      "text": "  const start = Date.now();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e14",
      "text": "  // 処理",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e15",
      "text": "  renderButton();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e16",
      "text": "  scrapbox.addListener(\"lines:changed\", renderButton);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e17",
      "text": "  const end = Date.now();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e18",
      "text": "  console.log(`ButtonのRenderingにかかった時間: ${end - start}ミリ秒`);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "643bc1615f1e0d0000550a49",
      "text": " code:fetch.js",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637771,
      "updated": 1681637805
    },
    {
      "id": "643bc1845f1e0d0000550a5d",
      "text": "  // ==UserScript==",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a5e",
      "text": "   // @name         Fetch ChatGPT",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1683383570
    },
    {
      "id": "643bc1845f1e0d0000550a5f",
      "text": "   // @namespace    http://tampermonkey.net/",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a60",
      "text": "   // @version      0.1",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a61",
      "text": "   // @description  try to take over the world!",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a62",
      "text": "   // @author       You",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a63",
      "text": "   // @match        https://scrapbox.io/*",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a64",
      "text": "   // @icon         https://www.google.com/s2/favicons?sz=64&domain=scrapbox.io",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a65",
      "text": "   // @grant        GM_xmlhttpRequest",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a66",
      "text": "   // ==/UserScript==",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a67",
      "text": "   ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a68",
      "text": "   unsafeWindow.askChatGPT = async (",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a69",
      "text": "     text,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6a",
      "text": "     { temperature = 0.7, max_tokens = 500 } = {}",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6b",
      "text": "   ) => {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6c",
      "text": "     const headers = {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6d",
      "text": "       \"Content-Type\": \"application/json\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6e",
      "text": "       Authorization: \"Bearer \" + localStorage.getItem(\"OPENAI_KEY\"),",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6f",
      "text": "     };",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a70",
      "text": "     const data = JSON.stringify({",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a71",
      "text": "       temperature,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a72",
      "text": "       max_tokens,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a73",
      "text": "       model: \"gpt-3.5-turbo\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a74",
      "text": "       messages: [{ role: \"user\", content: text }],",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a75",
      "text": "     });",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a76",
      "text": "   ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a77",
      "text": "     return await new Promise((resolve, reject) =>",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a78",
      "text": "       GM_xmlhttpRequest({",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a79",
      "text": "         method: \"POST\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7a",
      "text": "         url: \"https://api.openai.com/v1/chat/completions\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7b",
      "text": "         data,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7c",
      "text": "         headers,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7d",
      "text": "         onload: ({ response }) =>",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7e",
      "text": "           resolve({",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7f",
      "text": "             ...response,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a80",
      "text": "           }),",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a81",
      "text": "         responseType: \"json\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a82",
      "text": "         onerror: (e) => reject(e),",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a83",
      "text": "       })",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a84",
      "text": "     );",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a85",
      "text": "   };",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc17b5f1e0d0000550a5c",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637797,
      "updated": 1681637797
    }
  ]
}