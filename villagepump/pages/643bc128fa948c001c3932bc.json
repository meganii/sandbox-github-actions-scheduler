{
  "id": "643bc128fa948c001c3932bc",
  "title": "chatGPTã¨chatã™ã‚‹UserScript",
  "created": 1681637685,
  "updated": 1683466784,
  "lines": [
    {
      "id": "643bc128fa948c001c3932bc",
      "text": "chatGPTã¨chatã™ã‚‹UserScript",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637685,
      "updated": 1681637685
    },
    {
      "id": "6457a192774b170000ed1c41",
      "text": "ã“ã‚Œã¯ä½•ã‚’ã™ã‚‹ãŸã‚ã«ã¤ãã‚‰ã‚ŒãŸã‚‚ã®ãªã‚“ã ã‚ã†ï¼Ÿ[åŸºç´ .icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1683464595,
      "updated": 1683464643
    },
    {
      "id": "6457a46e5f1e0d0000e0810a",
      "text": "ã€€[AskChatGPT]ã§ã¯è¿”ç­”ãŒæ¥ã‚‹ã¾ã§æ€è€ƒãŒã‚¹ãƒˆãƒƒãƒ—ã•ã‚Œã‚‹æ„Ÿã˜ãŒå«Œã ã£ãŸã®ã§è‡ªå‹•å…¥åŠ›ã—ã¦ãã‚Œãªã„ã‹ãªã¨æ€ã„ä½œã£ãŸã‚„ã¤ã§ã™[wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683465326,
      "updated": 1683465452
    },
    {
      "id": "6457a4eb5f1e0d0000e0810b",
      "text": "ã€€ã€€Notion AIãŒãã“ãã“ä¾¿åˆ©ã ã¨æ€ã£ãŸã®ã§æ¡ˆã‚’ç½®ã„ã¦ãŠããŸã‹ã£ãŸ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683465452,
      "updated": 1683465487
    },
    {
      "id": "6457aa0d774b170000d903a1",
      "text": "ã€€Scrapboxä¸Šã§Chatã™ã‚‹ã£ã¦ã“ã¨ã‹ã€œ[åŸºç´ .icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1683466765,
      "updated": 1683466784
    },
    {
      "id": "6457a192774b170000ed1c42",
      "text": "",
      "userId": "59fb21121207900012774b17",
      "created": 1683464595,
      "updated": 1683464595
    },
    {
      "id": "64566ade5f1e0d0000f15388",
      "text": "ä½¿ã„æ–¹",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385055,
      "updated": 1683385057
    },
    {
      "id": "64566ae15f1e0d0000f15389",
      "text": "ã€€å°å…¥ã™ã‚‹ã¨é’ã„ãƒœã‚¿ãƒ³ãŒè¡Œã”ã¨ã«å‡ºã‚‹ã®ã§å®Ÿè¡Œã—ã¡ã‚ƒã£ã¦ãã ã•ã„",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385057,
      "updated": 1683385085
    },
    {
      "id": "64566b375f1e0d0000f1538c",
      "text": "ã€€ è¡Œã®ä¸‹ã«è¿”ç­”ãŒæŒ¿å…¥ã•ã‚Œã¾ã™",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385143,
      "updated": 1683385153
    },
    {
      "id": "64566aff5f1e0d0000f1538b",
      "text": "ã€€[** å¤šåˆ†]ä¸¦åˆ—å‡¦ç†ã§ãã¾ã™",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385087,
      "updated": 1683385126
    },
    {
      "id": "6456d6561280f000004c869b",
      "text": "ã€€ãªã‚‹ã»ã©ãƒ¼ã€‚è¡Œã”ã¨ã«ã‚³ãƒ¡ãƒ³ãƒˆã‹ã‘ã‚‹ã£ã¦ã“ã¨ã‹ã‚[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683412567,
      "updated": 1683412593
    },
    {
      "id": "6456d6711280f000004c869c",
      "text": "ã€€ è‡ªåˆ†ã®ã‚‚ã“ã®UIã§è©¦ã—ã¦ã¿ã‚‹ã‹",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683412594,
      "updated": 1683412606
    },
    {
      "id": "64566ae15f1e0d0000f1538a",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385058,
      "updated": 1683385058
    },
    {
      "id": "643bc10b5f1e0d0000550a43",
      "text": "æ—¢çŸ¥ã®ãƒã‚°",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637685,
      "updated": 1683420647
    },
    {
      "id": "6456f5e85f1e0d00003f6e1e",
      "text": " ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸå¾Œã™ãã«ä¸‹ã®è¡Œã‚’ç·¨é›†ã™ã‚‹ã¨insertã•ã‚Œãªã„",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683420648,
      "updated": 1683420677
    },
    {
      "id": "6456f6065f1e0d00003f6e1f",
      "text": "  ä¸‹ã®è¡Œã«ä¾å­˜ã—ã¦æŒ¿å…¥ã—ã¦ã„ã‚‹ãŸã‚",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683420677,
      "updated": 1683420688
    },
    {
      "id": "64570f521280f0000093f432",
      "text": " ãƒªãƒ³ã‚¯ã‚„ã‚¢ã‚¤ã‚³ãƒ³ã‚’å«ã‚€è¡Œã«ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427155,
      "updated": 1683427175
    },
    {
      "id": "64570f671280f0000093f433",
      "text": "  ä¿®æ­£ã—ãŸã‚³ãƒ¼ãƒ‰ã¯Streamã®ã‚´ãƒŸç®±ã«ã‚ã‚‹",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427176,
      "updated": 1683427195
    },
    {
      "id": "643bc1445f1e0d0000550a47",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637742,
      "updated": 1681637745
    },
    {
      "id": "643bc3265f1e0d0000550a9a",
      "text": "ã‚‚ã†[ChatGPTã®APIã®ç„¡æ–™æœŸé–“]çµ‚ã‚ã£ã¦ã‚‹ã‹ã‚‰è©¦ã›ãªã„ï¼èª°ã‹è©¦ã—ã¦(æŠ•ã’ã‚„ã‚Š)[wogikaze.icon*2]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681638224,
      "updated": 1683426938
    },
    {
      "id": "643bc3275f1e0d0000550a9b",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681638225,
      "updated": 1681638225
    },
    {
      "id": "643bc1475f1e0d0000550a48",
      "text": "å¿…è¦",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637745,
      "updated": 1683384793
    },
    {
      "id": "645669d75f1e0d00003f6e1b",
      "text": " [AskChatGPT](ã®[TamperMonkey]éƒ¨åˆ†)ã‚’tamperMonkeyã«å°å…¥ã™ã‚‹",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683384792,
      "updated": 1683384792
    },
    {
      "id": "645669d45f1e0d00003f6e1a",
      "text": " [ã“ã®ãƒªãƒ³ã‚¯ https://scrapbox-bundler.vercel.app/?url=https://scrapbox.io/api/code/villagepump/chatGPTã¨chatã™ã‚‹UserScript/sc.js&run&reload&minify&bundle]ã§bundleã—ãŸä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è‡ªåˆ†ã®ãƒšãƒ¼ã‚¸ã«è²¼ã‚Šä»˜ã‘ã‚‹",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683384788,
      "updated": 1683384798
    },
    {
      "id": "64566ad75f1e0d0000f15387",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683385048,
      "updated": 1683385048
    },
    {
      "id": "643bc10c5f1e0d0000550a44",
      "text": " code:sc.js",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637687,
      "updated": 1681637785
    },
    {
      "id": "643bc1ad5f1e0d0000550a8a",
      "text": "  import { joinPageRoom } from \"https://raw.githubusercontent.com/takker99/scrapbox-headless-script/0.3.1/mod.ts\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637847,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dd6",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456d68b1280f000004c869e",
      "text": " [scrapbox-headless-script]ã¯ã‚‚ã†ãƒ¡ãƒ³ãƒ†ã—ã¦ãªã„ã®ã§ã€[scrapbox-userscript-std]ã®ã»ã†ã‚’ä½¿ã£ã¦ã»ã—ã„ã§ã™[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683412619,
      "updated": 1683412637
    },
    {
      "id": "6456f57d5f1e0d00003f6e1c",
      "text": "  insertãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Œã°ä½¿ã„ãŸã‹ã£ãŸã®ã§ã™ãŒã‚µãƒãƒ¼ãƒˆã—ãªã„ã¨æ›¸ã„ã¦ã‚ã£ãŸã®ã§",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683420541,
      "updated": 1683429036
    },
    {
      "id": "645716ab5f1e0d00009fa74f",
      "text": "  (ã¤ã„ã§ã«[wogikaze.icon]ã®æŠ€è¡“åŠ›çš„ã«å®Ÿè£…ã§ããªã„ãªãƒ¼ã¨æ€ã„)ã“ã†ãªã‚Šã¾ã—ãŸ[wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683429036,
      "updated": 1683429049
    },
    {
      "id": "64570e651280f0000093f41f",
      "text": "   ã‚ã‚Œãã‚“ãªã“ã¨æ›¸ã„ã¦ã¾ã—ãŸã£ã‘ï¼Ÿä½•ã‚‚è¦šãˆã¦ã„ãªã„()[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683426918,
      "updated": 1683426942
    },
    {
      "id": "645715d95f1e0d00009fa74c",
      "text": "   [/takker/âœ…JoinPageRoom()ã‹ã‚‰patch()ä»¥å¤–ã®ç·¨é›†é–¢æ•°ã‚’æ¶ˆ#620619311280f00000e04c5f]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683428825,
      "updated": 1683465128
    },
    {
      "id": "6457a3a71280f000003acd53",
      "text": "    ä½¿ã„é“ã‚ã£ãŸã˜ã‚ƒã‚“ï¼[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683465128,
      "updated": 1683465138
    },
    {
      "id": "6457a3b11280f000003acd54",
      "text": "     æƒ³åƒåŠ›ãŒè¶³ã‚Šãªã„",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683465138,
      "updated": 1683465142
    },
    {
      "id": "645716205f1e0d00009fa74d",
      "text": "   [/takker/ğŸ“roomã‚’ä½¿ã‚ãšã«ãƒšãƒ¼ã‚¸ç·¨é›†ã™ã‚‹#6204baff1280f00000d87d32]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683428896,
      "updated": 1683428898
    },
    {
      "id": "6456f5b75f1e0d00003f6e1d",
      "text": "  -stdã®æ–¹ã§å®Ÿè£…ã§ãã¾ã™ã‹ã­...",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683420598,
      "updated": 1683420626
    },
    {
      "id": "64570e831280f0000093f420",
      "text": "  `patch()`ã ã¨ã€ç‰¹å®šè¡Œã®ä¸‹ã«æŒ¿å…¥ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã®ãŒç¢ºã‹ã«ã‚ã‚“ã©ã„ã§ã™ã­[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683426948,
      "updated": 1683426987
    },
    {
      "id": "64570eef1280f0000093f430",
      "text": "   ã“ã†ãªã‚‹",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427056,
      "updated": 1683427058
    },
    {
      "id": "64570eaa1280f0000093f421",
      "text": "   code:ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683426987,
      "updated": 1683427015
    },
    {
      "id": "64570ec61280f0000093f422",
      "text": "    await patch(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427015,
      "updated": 1683427015
    },
    {
      "id": "64570ec61280f0000093f423",
      "text": "      project,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427015,
      "updated": 1683427019
    },
    {
      "id": "64570ec61280f0000093f424",
      "text": "      title,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427015,
      "updated": 1683427019
    },
    {
      "id": "64570ec61280f0000093f425",
      "text": "      (lines) => lines.reduce((acc, cur) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427015,
      "updated": 1683427022
    },
    {
      "id": "64570ec61280f0000093f426",
      "text": "        acc.push(cur.text);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427015,
      "updated": 1683427025
    },
    {
      "id": "64570ec61280f0000093f427",
      "text": "        if (cur.id === id) acc.push(...additionalLines);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427015,
      "updated": 1683427042
    },
    {
      "id": "64570ec61280f0000093f42d",
      "text": "        return acc;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427015,
      "updated": 1683427045
    },
    {
      "id": "64570ec61280f0000093f42e",
      "text": "      }, [] as string[]),",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427015,
      "updated": 1683427050
    },
    {
      "id": "64570eeb1280f0000093f42f",
      "text": "    );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427052,
      "updated": 1683427053
    },
    {
      "id": "6457163c5f1e0d00009fa74e",
      "text": "   è©¦ã—ã¦ãªã„ã®ã§ã‚ã‚Œã§ã™ãŒpatchã ã¨patchãŒçµ‚äº†ã™ã‚‹å‰ã«è¡Œã‚’æ›´æ–°ã—ãŸã‚‰æ›´æ–°åˆ†ãŒæ¶ˆãˆã¾ã›ã‚“ã‹ï¼Ÿ[wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683428925,
      "updated": 1683429021
    },
    {
      "id": "6457a3de1280f000003acd55",
      "text": "   â‘ ã‹ã‚‰â‘¡ã®é–“ã§åˆ¥ã®ç·¨é›†ãŒå…¥ã£ãŸå ´åˆã€æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã—ã«ãªã‚Šã¾ã™[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683465183,
      "updated": 1683465350
    },
    {
      "id": "6457a3f71280f000003acd57",
      "text": "    ã‚µãƒ¼ãƒã‹ã‚‰commit idã‚’å–å¾—(â‘ )â†’`updator`ã§å¤‰æ›´å¾Œã®æœ¬æ–‡ã‚’ç”Ÿæˆâ†’å¤‰æ›´å‰å¾Œã§å·®åˆ†ã‚’ã¨ã£ã¦ã‚µãƒ¼ãƒã«é€ä¿¡ã™ã‚‹(â‘¡)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683465208,
      "updated": 1683465295
    },
    {
      "id": "6457a4641280f000003acd58",
      "text": "   ãã®ãŸã‚ã€é€”ä¸­ã§è¡Œã‚’æ›´æ–°ã•ã‚Œã¦ã‚‚ã€ãã®æ›´æ–°ã‚’è€ƒæ…®ã—ã¦å·®åˆ†ã‚’ä½œæˆã§ãã¾ã™",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683465316,
      "updated": 1683465395
    },
    {
      "id": "6457a4b21280f000003acd59",
      "text": "   `patch(project, title, () => [title, \"aaa\", \"bbb\"])`ã®ã‚ˆã†ãªå¸¸ã«åŒã˜æœ¬æ–‡ã‚’è¿”ã™ã¨æ›´æ–°ãŒæ¶ˆãˆã¦ã—ã¾ã„ã¾ã™ãŒã€ä»Šå›ã®ã‚³ãƒ¼ãƒ‰ã¯å¤‰æ›´å‰ã®æœ¬æ–‡ã‚’ãã®ã¾ã¾ç¶­æŒã™ã‚‹ãŸã‚ã€æ›´æ–°åˆ†ãŒæ¶ˆãˆã‚‹ã“ã¨ã¯ãªã„ã¨æ€ã„ã¾ã™",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683465395,
      "updated": 1683465489
    },
    {
      "id": "6456d6881280f000004c869d",
      "text": " code:sc.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683412617,
      "updated": 1683412618
    },
    {
      "id": "6456652e5f1e0d00003f6dd7",
      "text": "  function updateButtonStyle(button, lineElement, indent) {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dd8",
      "text": "  Â  const head = lineElement.getElementsByClassName(\"indent\")[0]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dd9",
      "text": "  Â  Â  ?? lineElement.getElementsByClassName(\"char-index\")[0];",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dda",
      "text": "  Â  const offset = lineElement.getBoundingClientRect().left;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6ddb",
      "text": "  Â  const left = indent === 0 ? offset : head.getBoundingClientRect().left;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6ddc",
      "text": "  Â  button.style.left = `calc(${Math.round(left - offset)}px - ${lineElement.getElementsByClassName(\"code-body\").length > 0 ? 2.0 : 1.0}em)`;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6ddd",
      "text": "  }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dde",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6ddf",
      "text": "  async function onButtonClick(lineElement) { // async ã‚’è¿½åŠ ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de0",
      "text": "  Â  const result = await askChatGPT(lineElement.innerText.trimStart()); // await ã‚’è¿½åŠ ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de1",
      "text": "  Â  let answer;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de2",
      "text": "  Â  if (!result.error) {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de3",
      "text": "  Â  Â  answer = result.choices[0].message.content.trim();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de4",
      "text": "  Â  } else {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de5",
      "text": "  Â  Â  answer = \"test\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de6",
      "text": "  Â  }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de7",
      "text": "  Â  const { insert, cleanup } = await joinPageRoom(scrapbox.Project.name, scrapbox.Page.title);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de8",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6de9",
      "text": "  Â  const nextLineElement = lineElement.nextElementSibling;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dea",
      "text": "  Â  if (nextLineElement) {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6deb",
      "text": "  Â  Â  await insert(lineElement.textContent.match(/^\\s*/)[0].replace(/\\t/g,\" \")+\" \"+answer, nextLineElement.id.slice(1));",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683384569
    },
    {
      "id": "6456652e5f1e0d00003f6dec",
      "text": "  Â  } else {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6ded",
      "text": "  Â  Â  await insert(lineElement.textContent.match(/^\\s*/)[0].replace(/\\t/g,\" \")+\" \"+answer, \"_end\");",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683384573
    },
    {
      "id": "6456652e5f1e0d00003f6dee",
      "text": "  Â  }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6def",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df0",
      "text": "  Â  cleanup();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df1",
      "text": "  }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df2",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df3",
      "text": "  function renderButton() {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df4",
      "text": "  Â  if (scrapbox.Layout !== \"page\") return;",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df5",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df6",
      "text": "  Â  scrapbox.Page.lines.forEach(line => {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df7",
      "text": "  Â  Â  const lineElement = document.querySelector(`#L${line.id}`);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df8",
      "text": "  Â  Â  let button = lineElement.querySelector(\"a\");",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6df9",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dfa",
      "text": "  Â  Â  if (button) {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dfb",
      "text": "  Â  Â  Â  if (line.text.trim() === \"\") {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dfc",
      "text": "  Â  Â  Â  Â  button.style.display = \"none\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dfd",
      "text": "  Â  Â  Â  } else {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dfe",
      "text": "  Â  Â  Â  Â  button.style.display = \"inline\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6dff",
      "text": "  Â  Â  Â  Â  updateButtonStyle(button, lineElement, lineElement.indent);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e00",
      "text": "  Â  Â  Â  }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e01",
      "text": "  Â  Â  } else if (line.text.trim() !== \"\") {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e02",
      "text": "  Â  Â  Â  button = document.createElement(\"a\");",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e03",
      "text": "  Â  Â  Â  button.type = \"button\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e04",
      "text": "  Â  Â  Â  button.style.position = \"absolute\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e05",
      "text": "  Â  Â  Â  button.style.fontSize = \"20px\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e06",
      "text": "  Â  Â  Â  button.style.zIndex = \"200\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e07",
      "text": "  Â  Â  Â  updateButtonStyle(button, lineElement, lineElement.indent);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456e4cd1280f000004c884a",
      "text": " `HTMLElement.indent`ã£ã¦ãªã‚“ã ã‚ã†[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683416269,
      "updated": 1683416282
    },
    {
      "id": "6456e4d91280f000004c884c",
      "text": "  ã“ã®ã‚ˆã†ãªpropertyã¯ç”Ÿãˆã¦ã„ãªã„ã¯ãš",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683416282,
      "updated": 1683416291
    },
    {
      "id": "6456f61a5f1e0d00003f6e20",
      "text": "  ç¢ºã‹ã«ãªã„ã€ãªã‚“ã§å‹•ã„ã¦ã„ã‚‹ã‚“ã (å›°æƒ‘)[wogikaze.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683420697,
      "updated": 1683420818
    },
    {
      "id": "64570f001280f0000093f431",
      "text": "  [/vim-jp-emojis/ã“ã‚ã‚.icon][takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683427073,
      "updated": 1683427135
    },
    {
      "id": "6456e4d01280f000004c884b",
      "text": " code:sc.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683416273,
      "updated": 1683416273
    },
    {
      "id": "6456652e5f1e0d00003f6e08",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e09",
      "text": "  Â  Â  Â  button.addEventListener(\"click\", () => onButtonClick(lineElement));",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0a",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0b",
      "text": "  Â  Â  Â  const icon = document.createElement(\"i\");",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0c",
      "text": "  Â  Â  Â  icon.className = \"fas fa-caret-down\";",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0d",
      "text": "  ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0e",
      "text": "  Â  Â  Â  button.append(icon);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e0f",
      "text": "  Â  Â  Â  lineElement.insertAdjacentElement(\"afterbegin\", button);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e10",
      "text": "  Â  Â  }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e11",
      "text": "  Â  });",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e12",
      "text": "  }",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e13",
      "text": "  const start = Date.now();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e14",
      "text": "  // å‡¦ç†",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e15",
      "text": "  renderButton();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e16",
      "text": "  scrapbox.addListener(\"lines:changed\", renderButton);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e17",
      "text": "  const end = Date.now();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456652e5f1e0d00003f6e18",
      "text": "  console.log(`Buttonã®Renderingã«ã‹ã‹ã£ãŸæ™‚é–“: ${end - start}ãƒŸãƒªç§’`);",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1683383597,
      "updated": 1683383597
    },
    {
      "id": "6456d6a81280f000004c869f",
      "text": " [scrapbox.Page.lines]ã¯è¡Œæ•°ãŒå¤šã„æ™‚UIã‚’ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683412649,
      "updated": 1683412740
    },
    {
      "id": "6456d6ff1280f000004c86a1",
      "text": "  cf. [/takker/âœ…scrapbox.Page.linesã¨åŒç­‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’shallow copyã—ã¦è¿”ã™é–¢æ•°ã‚’ä½œã‚‹]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683412735,
      "updated": 1683412739
    },
    {
      "id": "6456d6ef1280f000004c86a0",
      "text": "  performanceã®ã“ã¨ã‚’è€ƒãˆå§‹ã‚ã‚‹ã¨ãã«ã¯ã€åˆ¥ã®æ–¹æ³•ã‚’ä½¿ã†ã¨ã„ã„ã‹ã‚‚",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683412721,
      "updated": 1683412748
    },
    {
      "id": "643bc1615f1e0d0000550a49",
      "text": " code:fetch.js",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637771,
      "updated": 1681637805
    },
    {
      "id": "643bc1845f1e0d0000550a5d",
      "text": "  // ==UserScript==",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a5e",
      "text": "   // @name         Fetch ChatGPT",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1683383570
    },
    {
      "id": "643bc1845f1e0d0000550a5f",
      "text": "   // @namespace    http://tampermonkey.net/",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a60",
      "text": "   // @version      0.1",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a61",
      "text": "   // @description  try to take over the world!",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a62",
      "text": "   // @author       You",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a63",
      "text": "   // @match        https://scrapbox.io/*",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a64",
      "text": "   // @icon         https://www.google.com/s2/favicons?sz=64&domain=scrapbox.io",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a65",
      "text": "   // @grant        GM_xmlhttpRequest",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a66",
      "text": "   // ==/UserScript==",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a67",
      "text": "   ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a68",
      "text": "   unsafeWindow.askChatGPT = async (",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a69",
      "text": "     text,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6a",
      "text": "     { temperature = 0.7, max_tokens = 500 } = {}",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6b",
      "text": "   ) => {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6c",
      "text": "     const headers = {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6d",
      "text": "       \"Content-Type\": \"application/json\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6e",
      "text": "       Authorization: \"Bearer \" + localStorage.getItem(\"OPENAI_KEY\"),",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6f",
      "text": "     };",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a70",
      "text": "     const data = JSON.stringify({",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a71",
      "text": "       temperature,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a72",
      "text": "       max_tokens,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a73",
      "text": "       model: \"gpt-3.5-turbo\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a74",
      "text": "       messages: [{ role: \"user\", content: text }],",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a75",
      "text": "     });",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a76",
      "text": "   ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a77",
      "text": "     return await new Promise((resolve, reject) =>",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a78",
      "text": "       GM_xmlhttpRequest({",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a79",
      "text": "         method: \"POST\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7a",
      "text": "         url: \"https://api.openai.com/v1/chat/completions\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7b",
      "text": "         data,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7c",
      "text": "         headers,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7d",
      "text": "         onload: ({ response }) =>",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7e",
      "text": "           resolve({",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7f",
      "text": "             ...response,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a80",
      "text": "           }),",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a81",
      "text": "         responseType: \"json\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a82",
      "text": "         onerror: (e) => reject(e),",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a83",
      "text": "       })",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a84",
      "text": "     );",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a85",
      "text": "   };",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc17b5f1e0d0000550a5c",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637797,
      "updated": 1681637797
    },
    {
      "id": "6456d8151280f000004c86a2",
      "text": "[chatGPTã¨chatã™ã‚‹UserScript (takker)]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683413013,
      "updated": 1683413017
    },
    {
      "id": "6456d8151280f000004c86a3",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683413014,
      "updated": 1683413014
    }
  ]
}