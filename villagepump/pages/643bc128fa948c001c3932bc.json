{
  "id": "643bc128fa948c001c3932bc",
  "title": "chatGPTとchatするUserScript",
  "created": 1681637685,
  "updated": 1681893330,
  "lines": [
    {
      "id": "643bc128fa948c001c3932bc",
      "text": "chatGPTとchatするUserScript",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637685,
      "updated": 1681637685
    },
    {
      "id": "643bc10b5f1e0d0000550a43",
      "text": "[AskChatGPT]との違いを作らないと意味がないな",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637685,
      "updated": 1681637701
    },
    {
      "id": "643bc11d5f1e0d0000550a45",
      "text": " ちょっとUI綺麗にしました！で許してくれる？[yuyasurarin.icon]",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637703,
      "updated": 1681637712
    },
    {
      "id": "643bc1265f1e0d0000550a46",
      "text": " chat形式になってればいいや！",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637712,
      "updated": 1681637742
    },
    {
      "id": "643bc1445f1e0d0000550a47",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637742,
      "updated": 1681637745
    },
    {
      "id": "643bc3235f1e0d0000550a99",
      "text": "＊＊現在工事中＊＊",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681638221,
      "updated": 1681638229
    },
    {
      "id": "643bc3265f1e0d0000550a9a",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681638224,
      "updated": 1681638224
    },
    {
      "id": "643bc3275f1e0d0000550a9b",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681638225,
      "updated": 1681638225
    },
    {
      "id": "643bc1475f1e0d0000550a48",
      "text": "必要：[AskChatGPT](の[TamperMonkey]部分)",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637745,
      "updated": 1681893330
    },
    {
      "id": "643bc10c5f1e0d0000550a44",
      "text": " code:sc.js",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637687,
      "updated": 1681637785
    },
    {
      "id": "643bc1ad5f1e0d0000550a8a",
      "text": "  askChatGPT(text).then((x) => {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637847,
      "updated": 1681637893
    },
    {
      "id": "643bc1ad5f1e0d0000550a8b",
      "text": "  \tconst result = \"[ChatGPT.icon]\" + x.choices[0].message.content.trim();",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637847,
      "updated": 1681637904
    },
    {
      "id": "643bc1ad5f1e0d0000550a8f",
      "text": "  });",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637847,
      "updated": 1681637893
    },
    {
      "id": "643bc1615f1e0d0000550a49",
      "text": " code:fetch.js",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637771,
      "updated": 1681637805
    },
    {
      "id": "643bc1845f1e0d0000550a5d",
      "text": "  // ==UserScript==",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a5e",
      "text": "   // @name         New Userscript",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a5f",
      "text": "   // @namespace    http://tampermonkey.net/",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a60",
      "text": "   // @version      0.1",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a61",
      "text": "   // @description  try to take over the world!",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a62",
      "text": "   // @author       You",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a63",
      "text": "   // @match        https://scrapbox.io/*",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a64",
      "text": "   // @icon         https://www.google.com/s2/favicons?sz=64&domain=scrapbox.io",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a65",
      "text": "   // @grant        GM_xmlhttpRequest",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a66",
      "text": "   // ==/UserScript==",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a67",
      "text": "   ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a68",
      "text": "   unsafeWindow.askChatGPT = async (",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a69",
      "text": "     text,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6a",
      "text": "     { temperature = 0.7, max_tokens = 500 } = {}",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6b",
      "text": "   ) => {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6c",
      "text": "     const headers = {",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6d",
      "text": "       \"Content-Type\": \"application/json\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6e",
      "text": "       Authorization: \"Bearer \" + localStorage.getItem(\"OPENAI_KEY\"),",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a6f",
      "text": "     };",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a70",
      "text": "     const data = JSON.stringify({",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a71",
      "text": "       temperature,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a72",
      "text": "       max_tokens,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a73",
      "text": "       model: \"gpt-3.5-turbo\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a74",
      "text": "       messages: [{ role: \"user\", content: text }],",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a75",
      "text": "     });",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a76",
      "text": "   ",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a77",
      "text": "     return await new Promise((resolve, reject) =>",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a78",
      "text": "       GM_xmlhttpRequest({",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a79",
      "text": "         method: \"POST\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7a",
      "text": "         url: \"https://api.openai.com/v1/chat/completions\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7b",
      "text": "         data,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7c",
      "text": "         headers,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7d",
      "text": "         onload: ({ response }) =>",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7e",
      "text": "           resolve({",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a7f",
      "text": "             ...response,",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a80",
      "text": "           }),",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a81",
      "text": "         responseType: \"json\",",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a82",
      "text": "         onerror: (e) => reject(e),",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a83",
      "text": "       })",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a84",
      "text": "     );",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc1845f1e0d0000550a85",
      "text": "   };",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637806,
      "updated": 1681637806
    },
    {
      "id": "643bc17b5f1e0d0000550a5c",
      "text": "",
      "userId": "616ca537c25a92001e5f1e0d",
      "created": 1681637797,
      "updated": 1681637797
    }
  ]
}