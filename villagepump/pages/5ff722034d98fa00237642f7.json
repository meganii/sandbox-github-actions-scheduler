{
  "id": "5ff722034d98fa00237642f7",
  "title": "pin-diary-2",
  "created": 1610031622,
  "updated": 1684838116,
  "lines": [
    {
      "id": "5ff722034d98fa00237642f7",
      "text": "pin-diary-2",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031622,
      "updated": 1610031622
    },
    {
      "id": "5ff722281280f0000049a529",
      "text": "今日の[日記ページ]をPin留めするUserScript version 2",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031656,
      "updated": 1610031686
    },
    {
      "id": "6221fb147838e300002e8f61",
      "text": "\t[pin-diary]-1 -> [* pin-diary-2] -> [pin-diary-3]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1646394131,
      "updated": 1646394131
    },
    {
      "id": "5ff722051280f0000049a527",
      "text": " [pin-diaryのバグ]を直したversion",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031622,
      "updated": 1610031687
    },
    {
      "id": "5ff7236e1280f0000049a5c0",
      "text": " [/emoji/warning.icon]まだバグが残っています",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031982,
      "updated": 1610031983
    },
    {
      "id": "5ff722481280f0000049a52a",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031688,
      "updated": 1610031690
    },
    {
      "id": "5ff7236a1280f0000049a5bd",
      "text": "使い方",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031978,
      "updated": 1610031980
    },
    {
      "id": "5ff7a2bb1280f0000043b0a6",
      "text": " 1. [user.js https://scrapbox.io/api/code/villagepump/pin-diary-2/user.js]を自分のprojectにコピペする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064571,
      "updated": 1610064601
    },
    {
      "id": "5ff7a2d91280f0000043b0a7",
      "text": " 2. 以下のどちらかを自分のページに書く",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064601,
      "updated": 1610064614
    },
    {
      "id": "5ff7a2e71280f0000043b0a8",
      "text": "  `:projectname`を自分のprojectの名前に書き換えてください",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064616,
      "updated": 1610064631
    },
    {
      "id": "5ff7237a1280f0000049a5c4",
      "text": "  code:js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031994,
      "updated": 1610064635
    },
    {
      "id": "5ff7237d1280f0000049a5c5",
      "text": "   import {execute} from '/api/code/:projectname/pin-diary/user.js';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031998,
      "updated": 1610064635
    },
    {
      "id": "5ff723971280f0000049a5c7",
      "text": "   execute();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610032023,
      "updated": 1610064635
    },
    {
      "id": "5ff7239c1280f0000049a5c8",
      "text": "   // debug messageを出力するとき",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610032029,
      "updated": 1610064635
    },
    {
      "id": "5ff723b71280f0000049a5c9",
      "text": "   // execute({verbose: true});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610032055,
      "updated": 1610064635
    },
    {
      "id": "5ff723701280f0000049a5c1",
      "text": "  code:js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031984,
      "updated": 1610064635
    },
    {
      "id": "5ff723731280f0000049a5c2",
      "text": "   import('/api/code/:projectname/pin-diary/user.js')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031987,
      "updated": 1610064635
    },
    {
      "id": "5ff723741280f0000049a5c3",
      "text": "     .then(({execute}) => execute());",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031988,
      "updated": 1610064635
    },
    {
      "id": "5ff72977e5172d00009ef396",
      "text": " 一応[UserScriptを他人のprojectから読み込むな]の対象なのでは？まあ大丈夫だと思うけど…",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1610033526,
      "updated": 1610033549
    },
    {
      "id": "5ff723691280f0000049a5bc",
      "text": "  気になるなら自分の[個人Project]にforkしてしまえばいい",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1610031977,
      "updated": 1684838116
    },
    {
      "id": "5ff72c8ae5172d0000f9312b",
      "text": "  \t[/emoji/good.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1610034313,
      "updated": 1610034318
    },
    {
      "id": "5ff7a2781280f0000043b0a1",
      "text": "  [/icons/たしかに.icon][takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064504,
      "updated": 1610064516
    },
    {
      "id": "5ff7a2841280f0000043b0a2",
      "text": "   説明変えました",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064517,
      "updated": 1610064532
    },
    {
      "id": "5ff7a2931280f0000043b0a3",
      "text": "   code:diff",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064532,
      "updated": 1610064536
    },
    {
      "id": "5ff7a2981280f0000043b0a4",
      "text": "    + '/api/code/:projectname/pin-diary/user.js';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064536,
      "updated": 1610064562
    },
    {
      "id": "5ff7a2a51280f0000043b0a5",
      "text": "    - '/api/code/villagepump/pin-diary/user.js';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064549,
      "updated": 1610064564
    },
    {
      "id": "5ff72bd14bb2e200002fae7a",
      "text": "",
      "userId": "5e8944948a182900174bb2e2",
      "created": 1610034072,
      "updated": 1610034072
    },
    {
      "id": "5ff7228e1280f0000049a5af",
      "text": "既知の問題",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031759,
      "updated": 1610031760
    },
    {
      "id": "5ff7228f1280f0000049a5b0",
      "text": " title以外の更新でページリストが変わるとPinがむちゃくちゃになる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031760,
      "updated": 1610031760
    },
    {
      "id": "5ff722f81280f0000049a5b8",
      "text": "  [https://gyazo.com/db094f75613d41bb38d8bb1c59abd0c2]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031864,
      "updated": 1610031865
    },
    {
      "id": "5ff7228f1280f0000049a5b1",
      "text": "  ページリストの更新が、`<a>`タグの`href`のみを更新しているのが原因",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031760,
      "updated": 1610031760
    },
    {
      "id": "5ff7228f1280f0000049a5b2",
      "text": "  PinしたDOMがそのまま残ってしまう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031760,
      "updated": 1610031760
    },
    {
      "id": "5ff722a11280f0000049a5b3",
      "text": " 対策",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031778,
      "updated": 1610031780
    },
    {
      "id": "5ff722a31280f0000049a5b4",
      "text": "  `#dropdownMenuSort`ではなくページリストそのものを監視する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031780,
      "updated": 1610031842
    },
    {
      "id": "5ff722a41280f0000049a5b5",
      "text": "   `.app .container .grid`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031780,
      "updated": 1610031843
    },
    {
      "id": "5ff722a41280f0000049a5b6",
      "text": "  無限ループを回避するために、フラグを立てておく",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031780,
      "updated": 1610031783
    },
    {
      "id": "5ff7225d1280f0000049a52c",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031709,
      "updated": 1610031709
    },
    {
      "id": "5ff7a3101280f0000043b0a9",
      "text": "Module内で使うglobal変数",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064656,
      "updated": 1610064660
    },
    {
      "id": "5ff7225e1280f0000049a52d",
      "text": "code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031711,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a52e",
      "text": " const targetProject = 'villagepump';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a52f",
      "text": " let VERBOSE = false;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a530",
      "text": " let executed = false;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a531",
      "text": " let diaryCard = null;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a532",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff7a31b1280f0000043b0ab",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064667,
      "updated": 1610064667
    },
    {
      "id": "5ff7a31b1280f0000043b0ac",
      "text": "entry point",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064668,
      "updated": 1610064671
    },
    {
      "id": "5ff7a3211280f0000043b0ad",
      "text": " 一回だけ実行できる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064673,
      "updated": 1610064678
    },
    {
      "id": "5ff7a3181280f0000043b0aa",
      "text": "code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064664,
      "updated": 1610064666
    },
    {
      "id": "5ff722811280f0000049a533",
      "text": " export function execute({verbose = false} = {}) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a534",
      "text": "   if (executed) return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a535",
      "text": "   executed = true;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a536",
      "text": "   VERBOSE = verbose;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a53a",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a53b",
      "text": "   const today = toYYYYMMDD(new Date());",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a53c",
      "text": "   const path = `/${targetProject}/${encodeURIComponent(today)}`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a53d",
      "text": "   handlePageChange(async () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a53e",
      "text": "     // top page以外では実行しない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a53f",
      "text": "     if (scrapbox.Project.name !== targetProject && scrapbox.Layout === 'list') return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a540",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a541",
      "text": "     // 全てのカードを含む<ul>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a542",
      "text": "     const cards = document",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a543",
      "text": "       .getElementsByClassName('page-list')?.[0]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a544",
      "text": "       ?.getElementsByClassName('grid')?.[0]; ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610064702
    },
    {
      "id": "5ff722811280f0000049a545",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a546",
      "text": "     // ページの並び替えが終わるまで少し待つ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a547",
      "text": "     await sleep(1000);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a548",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a549",
      "text": "     // 前回の日付ページに相当するカードのPinを外す",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a54a",
      "text": "     if(diaryCard) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a54b",
      "text": "       _log('Removing a pin from %o \\n href = %o', diaryCard, diaryCard.querySelector('a').href);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a54c",
      "text": "       removePin({card: diaryCard});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a54d",
      "text": "       _log('Removed.');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a54e",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a54f",
      "text": "     // 日付ページを取得する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a550",
      "text": "     diaryCard = cards",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a551",
      "text": "       .querySelector(`li.page-list-item a[href=\"${path}\"]`)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a552",
      "text": "       ?.parentNode",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a553",
      "text": "       // なければ新しく作る",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a554",
      "text": "       ?? (() => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a555",
      "text": "         _log('The diary card doesn\\'t exist. Creating new diary card...');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a556",
      "text": "         return createEmptyPageCard({title: today, path: path});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a557",
      "text": "       })();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a558",
      "text": "     _log({diaryCard});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a559",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a55a",
      "text": "     // Pinしたカードの数",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a55b",
      "text": "     // 日付ページにPinする前の数を取得しておく",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a55c",
      "text": "     const pins = cards",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a55d",
      "text": "       .getElementsByClassName('page-list-item grid-style-item pin')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a55e",
      "text": "       .length; ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a55f",
      "text": "     _log({pins});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a560",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a561",
      "text": "     // DOMにPin留めをつける",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a562",
      "text": "     _log('Adding a pin on %o \\n href = %o', diaryCard, diaryCard.querySelector('a').href);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a563",
      "text": "     appendPin({card: diaryCard});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a564",
      "text": "     _log('Added a pin on the diary card.');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a565",
      "text": "     //日付ページが常にPinなしページの前に来るように移動する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a566",
      "text": "     _log('Move the diary card before %o', cards.children[pins]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a567",
      "text": "     cards.insertBefore(diaryCard, cards.children[pins]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a568",
      "text": "     console.log('Finish pinning the today\\'s diary page.')",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a569",
      "text": "   });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a56a",
      "text": " }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a56b",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff7a3561280f0000043b0af",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064726,
      "updated": 1610064726
    },
    {
      "id": "5ff7a3571280f0000043b0b0",
      "text": "Utilities",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064727,
      "updated": 1610064730
    },
    {
      "id": "5ff7a3531280f0000043b0ae",
      "text": "code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064724,
      "updated": 1610064726
    },
    {
      "id": "5ff7a3631280f0000043b0b1",
      "text": " const zero = n => String(n).padStart(2, '0');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064740,
      "updated": 1610064744
    },
    {
      "id": "5ff7a3641280f0000043b0b2",
      "text": " const toYYYYMMDD =",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064740,
      "updated": 1610064744
    },
    {
      "id": "5ff7a3641280f0000043b0b3",
      "text": "   date => `${date.getFullYear()}/${zero(date.getMonth() + 1)}/${zero(date.getDate())}`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610064740,
      "updated": 1610064744
    },
    {
      "id": "5ff722811280f0000049a56c",
      "text": " const sleep = milliseconds => new Promise(resolve => setTimeout(resolve, milliseconds));",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a56d",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a56e",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a56f",
      "text": "ページカードを作成する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a570",
      "text": "code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a571",
      "text": " function createEmptyPageCard({title, path}) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a572",
      "text": "   const card = document.createElement('li');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a573",
      "text": "   card.insertAdjacentHTML('beforeend',",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a574",
      "text": " `<li id=\"pin-diary-card\" class=\"page-list-item grid-style-item\" style=\"opacity: 0.7;\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a575",
      "text": "   <a href=\"${path}\" rel=\"route\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a576",
      "text": "     <div class=\"hover\"></div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a577",
      "text": "     <div class=\"content\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a578",
      "text": "       <div class=\"header\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a579",
      "text": "         <div class=\"title\">${title}</div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a57a",
      "text": "       </div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a57b",
      "text": "       <div class=\"description\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a57c",
      "text": "         <div class=\"line-img\">",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a57d",
      "text": "           <div></div><div></div><div></div><div></div><div></div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a57e",
      "text": "         </div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a57f",
      "text": "       </div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a580",
      "text": "     </div>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a581",
      "text": "   </a>",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a582",
      "text": " </li>`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a583",
      "text": "   return card;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a584",
      "text": " }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a585",
      "text": " function appendPin({card}) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a586",
      "text": "   card.getElementsByClassName('hover')?.[0]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a587",
      "text": "     ?.insertAdjacentHTML('afterend', '<div class=\"pin\"></div>');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a588",
      "text": "   card.classList.add('pin');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a589",
      "text": " }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a58a",
      "text": " function removePin({card}) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a58b",
      "text": "   card.getElementsByClassName('pin')?.[0]?.remove();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a58c",
      "text": "   card.classList.remove('pin');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a58d",
      "text": " }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a58e",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a58f",
      "text": "Top pageの更新を監視する関数",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a590",
      "text": "code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a591",
      "text": " function handlePageChange(callback) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a592",
      "text": "   callback(); // 初回の実行",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a593",
      "text": "   const observer = new MutationObserver(() => callback());",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a594",
      "text": "   ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a595",
      "text": "   // 監視を開始する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a596",
      "text": "   observer.observe(document.getElementsByTagName('title')[0], {childList: true});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a597",
      "text": "   observer.observe(document.getElementById('dropdownMenuSort'), ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a598",
      "text": "     // この３つを指定しないと変更を捕捉できない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a599",
      "text": "     {subtree: true,childList:true,characterData:true});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a59a",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a59b",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a59c",
      "text": "debug用",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a59d",
      "text": "code:user.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a59e",
      "text": " function _log(message, ...objects) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a59f",
      "text": "   if (!VERBOSE) return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5a0",
      "text": "   const header = '[pin-diary]';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5a1",
      "text": "   if (objects.length !== 0) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5a2",
      "text": "     if ((typeof message) === 'string') {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5a3",
      "text": "       console.log(`${header}${message}`, ...objects);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5a4",
      "text": "     } else {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5a5",
      "text": "       console.log(header, message, ...objects);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5a6",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5a7",
      "text": "   } else {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5a8",
      "text": "     if ((typeof message) === 'string') {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5a9",
      "text": "       console.log(`${header}${message}`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5aa",
      "text": "     } else {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5ab",
      "text": "       console.log(header, message);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5ac",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5ad",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722811280f0000049a5ae",
      "text": " }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031745,
      "updated": 1610031745
    },
    {
      "id": "5ff722061280f0000049a528",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1610031623,
      "updated": 1610031623
    }
  ]
}