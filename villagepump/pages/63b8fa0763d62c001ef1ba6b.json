{
  "id": "63b8fa0763d62c001ef1ba6b",
  "title": "pin-diary-6 pull:1",
  "created": 1673067017,
  "updated": 1676883927,
  "lines": [
    {
      "id": "63b8fa0763d62c001ef1ba6b",
      "text": "pin-diary-6 pull:1",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1673067017,
      "updated": 1676883888
    },
    {
      "id": "63b8fa471280f000004a4831",
      "text": "[pin-diary-6]へのPR",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067078,
      "updated": 1673067090
    },
    {
      "id": "63b8fa511280f000004a4832",
      "text": " [/Mijinko-other/pin-diary-6-sd-dev 2022-12-31]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067088,
      "updated": 1673067112
    },
    {
      "id": "63f337b97838e3000007cfa2",
      "text": "",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1676883898,
      "updated": 1676883898
    },
    {
      "id": "63f337ba7838e3000007cfa3",
      "text": "タイトルを`pin-diary-6 pull#1`から`pin-diary-6 pull:1`へ変更",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1676883898,
      "updated": 1676883916
    },
    {
      "id": "63f337cb7838e3000007cfa4",
      "text": "\t`#`が入っているとハッシュタグを作成できなくなってしまうため",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1676883916,
      "updated": 1676883927
    },
    {
      "id": "63b8fa6a1280f000004a4835",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067113,
      "updated": 1673067114
    },
    {
      "id": "63b8fa851280f00000e9bbe8",
      "text": "[pin-diary-6]の以下のバグの修正を行いました[Mijinko_SD.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbe9",
      "text": "\t既にページが作成されて書き込みされていた場合にテンプレートフォーマットを挿入すると、空行より下が分断されてしまうバグ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbea",
      "text": "\t\tこれはおそらく、ページを書き込んだ際に機能する[空行承り太郎]の空行を、テンプレートの一部として誤認してしまうのが原因",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbeb",
      "text": "\t\tテンプレートが分断されていた場合は、固まったテンプレートを新たに挿入する形で解決しました",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbec",
      "text": "\t\tこれ以外の解決策としては、テンプレートの一部が欠落していた場合、既存のテンプレート行（空行除く）に欠落しているテンプレートを追記する処理が考えられると思います",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbed",
      "text": "修正後のソースコード",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbee",
      "text": "\t[/Mijinko-other/pin-diary-6-sd-dev 2022-12-04]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbef",
      "text": "\t`6依存（未変更）`にカテゴライズされているソースファイル以外は書き換えてあります",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbf0",
      "text": "修正ありがとうございます[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbf1",
      "text": " 返信遅れてすみません",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbf2",
      "text": " 　お気になさらず[Mijinko_SD.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbf3",
      "text": " [pin-diary-5]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbf4",
      "text": "　修正反映は少々お待ち下さい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbf5",
      "text": " 　やること",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbf6",
      "text": " 　 diff確認",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbf7",
      "text": " 　  $ curl https://scrapbox.io/api/code/villagepump/pin-diary-5/util.ts > util_old.ts && curl https://scrapbox.io/api/code/Mijinko-other/pin-diary-6-sd-dev_2022-12-04/util.ts > util.ts && diff -y util_old.ts util.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbf8",
      "text": " 　 arrow functionに書き換え",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbf9",
      "text": " 　 依存関係の見直し",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbfa",
      "text": " 　  [pin-diary-6]から[pin-diary-5]への依存をなくす",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbfb",
      "text": " 　   違うversionを参照しているとややこしい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbfc",
      "text": " 　今までのversionをgithubにサルページしておこうかな",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbfd",
      "text": " [/Mijinko-other/pin-diary-5のutil.tsの解析#638b7d3d7838e30000ca3c5d]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbfe",
      "text": "  前後に空白が混じっているだけで違う行判定されたくない……からかな？[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bbff",
      "text": "  なんとなく入れただけだと思われる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc00",
      "text": "  よくわからなかったですが、一応修正後のソースコードでも`.trim()`して判別する仕様にしてあります[Mijinko_SD.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc01",
      "text": "  はーい[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc02",
      "text": " 2022-12-21完全に忘れてた()[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc03",
      "text": "  でもinboxみたらちゃんとメモしてあったから[ヨシ!.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc04",
      "text": "  来週から授業ないのでそのへんでやります～",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc05",
      "text": "  修正した後から思ったのですが、本当にこの仕様（フォーマット挿入関連の仕様）で良かったのかなーってちょっと思い始めている[Mijinko_SD.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc06",
      "text": "  \tフォーマットの文章の下に箇条書きで追記しにくくなった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc07",
      "text": "  \t\t[2022/12/06#638e88381280f00000fc1813]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc08",
      "text": "  \t\t[2022/12/13#639890345e90c0000032f3b4]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc09",
      "text": "  \t人間の手が加えられないというところから、[/shokai/WOM(Write Only Member)]に書かれているような悪い特徴が出てしまっている気がする",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc0a",
      "text": " \t[2022/12/31] 17:30:53 修正しました[Mijinko_SD.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc0b",
      "text": " \t\t[/Mijinko-other/pin-diary-6-sd-dev 2022-12-31]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc0c",
      "text": " \t\t結局のところ、「テンプレート行が分断されるのは許容するが、テンプレート行が1行でも欠損していた場合は新たに挿入し直す」という仕様になりました",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa851280f00000e9bc0d",
      "text": " \t\t\t前回のdevのソースコードからの差分としては、1行コメントアウトしただけ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067140,
      "updated": 1673067140
    },
    {
      "id": "63b8fa941280f00000e9bc10",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa991280f00000e9bc63",
      "text": "単体テストを書いて確認します[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067160,
      "updated": 1673067160
    },
    {
      "id": "63b8fafe1280f00000e9bc68",
      "text": " 変更点は[pin-diary-5]の`format.ts`およびそれが依存しているmodulesのみ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067261,
      "updated": 1673067261
    },
    {
      "id": "63b8faff1280f00000e9bc69",
      "text": " なので`format.ts`と`util.ts`の単体テストだけを書けばいい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067262,
      "updated": 1673067301
    },
    {
      "id": "63b8fa941280f00000e9bc11",
      "text": " $ deno test -r=https://scrapbox.io https://scrapbox.io/api/code/villagepump/pin-diary-6_pull%231/format_test.ts https://scrapbox.io/api/code/villagepump/pin-diary-6_pull%231/util_test.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067588
    },
    {
      "id": "63b8fb8b1280f00000e9bcc2",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067402,
      "updated": 1673067402
    },
    {
      "id": "63b8fe0c1280f00000520dd3",
      "text": "[pin-diary]をそろそろgithubに移そうか考えている[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673068043,
      "updated": 1673068060
    },
    {
      "id": "63b8fe1c1280f00000520dd5",
      "text": " 古い変更を言及するのがScrapboxだときつい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673068060,
      "updated": 1673068077
    },
    {
      "id": "63b8fe2e1280f00000520dd6",
      "text": "  例えば今(2023-01-07 14:08:12 )、passさせた単体テストの結果について色々書き込んでいるが、ロジックを修正して単体テストの結果が変わると、コメントの意味がわからなくなる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673068077,
      "updated": 1673068125
    },
    {
      "id": "63b8fe0c1280f00000520dd4",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673068043,
      "updated": 1673068043
    },
    {
      "id": "63b8fb041280f00000e9bc6a",
      "text": "code:format_test.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067267,
      "updated": 1673067270
    },
    {
      "id": "63b8fb081280f00000e9bc6b",
      "text": " import { patchTemplate } from \"./format.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067271
    },
    {
      "id": "63b8fb081280f00000e9bc6c",
      "text": " import { assertEquals } from \"./deps_test.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067271
    },
    {
      "id": "63b8fb081280f00000e9bc6d",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067271
    },
    {
      "id": "63b8fb081280f00000e9bc6e",
      "text": " Deno.test(\"patchTemplate()\", async (t) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067757
    },
    {
      "id": "63b8fcee1280f00000e9bcda",
      "text": "   await t.step(\"その1\", () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067758,
      "updated": 1673067826
    },
    {
      "id": "63b8fb081280f00000e9bc6f",
      "text": "     const headers = [",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc70",
      "text": "       \"header start\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc71",
      "text": "       \"header content\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc72",
      "text": "       \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc73",
      "text": "       \"header end\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc74",
      "text": "     ];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc75",
      "text": "     const lines = [",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc76",
      "text": "       \"何か\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc77",
      "text": "       \"aaa\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc78",
      "text": "       \"header content\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc79",
      "text": "       \" コメントが書いてあるかも\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc7a",
      "text": "       \"header end modified\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc7b",
      "text": "       \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc7c",
      "text": "       \"本文とか\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc7d",
      "text": "       \"おしまい\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc7e",
      "text": "       \"footer end\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc7f",
      "text": "       \" ↑footerの残骸\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc80",
      "text": "     ];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc81",
      "text": "     const footers = [",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc82",
      "text": "       \"footer start\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc83",
      "text": "       \"footer content\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc84",
      "text": "       \"footer end\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc85",
      "text": "     ];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc86",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc87",
      "text": "     assertEquals<string[]>(patchTemplate(lines, headers, footers), [",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc88",
      "text": "       \"header start\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fbcc1280f00000e9bcc5",
      "text": "       \"header content\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067467,
      "updated": 1673067772
    },
    {
      "id": "63b8fbd11280f00000e9bcc9",
      "text": "       \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067473,
      "updated": 1673067772
    },
    {
      "id": "63b8fbda1280f00000e9bccf",
      "text": "       \"header end\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067481,
      "updated": 1673067772
    },
    {
      "id": "63b8fbdc1280f00000e9bcd3",
      "text": "       \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067483,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc89",
      "text": "       \"何か\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc8a",
      "text": "       \"aaa\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fc681280f00000e9bcd9",
      "text": "       \"header content\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067623,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc8c",
      "text": "       \" コメントが書いてあるかも\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc8d",
      "text": "       \"header end modified\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fd5e1280f00000e9bce0",
      "text": "うーん、ここのheaderが新規追加されちゃうかあ[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067869,
      "updated": 1673067885
    },
    {
      "id": "63b8fd6e1280f00000e9bce2",
      "text": " (まだちゃんとコード読んでいないので、どういう条件でいい感じにformatが復元されるか理解していない)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067885,
      "updated": 1673067918
    },
    {
      "id": "63b8fd761280f00000e9bce3",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067893,
      "updated": 1673067893
    },
    {
      "id": "63b8fd5b1280f00000e9bcdf",
      "text": "code:format_test.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067866,
      "updated": 1673067869
    },
    {
      "id": "63b8fbe91280f00000e9bcd4",
      "text": "       \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067496,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc91",
      "text": "       \"本文とか\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc92",
      "text": "       \"おしまい\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fbf61280f00000e9bcd5",
      "text": "       \"footer end\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067510,
      "updated": 1673067772
    },
    {
      "id": "63b8fbf61280f00000e9bcd6",
      "text": "       \" ↑footerの残骸\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067510,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc93",
      "text": "       \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc94",
      "text": "       \"footer start\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc95",
      "text": "       \"footer content\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fb081280f00000e9bc96",
      "text": "       \"footer end\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fd9e1280f00000e9bce5",
      "text": "ここも、合体されてほしい[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067933,
      "updated": 1673067940
    },
    {
      "id": "63b8fd9f1280f00000e9bce6",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067934,
      "updated": 1673067934
    },
    {
      "id": "63b8fd9c1280f00000e9bce4",
      "text": "code:format_test.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067931,
      "updated": 1673067932
    },
    {
      "id": "63b8fb081280f00000e9bc98",
      "text": "     ]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067772
    },
    {
      "id": "63b8fcfd1280f00000e9bcdb",
      "text": "   });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067773,
      "updated": 1673067774
    },
    {
      "id": "63b8fb081280f00000e9bc99",
      "text": " });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067271
    },
    {
      "id": "63b8fb081280f00000e9bc9a",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067271,
      "updated": 1673067271
    },
    {
      "id": "63b8fada1280f00000e9bc64",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067225,
      "updated": 1673067225
    },
    {
      "id": "63b8fb281280f00000e9bc9c",
      "text": "code:util_test.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067303,
      "updated": 1673067308
    },
    {
      "id": "63b8fb2d1280f00000e9bc9d",
      "text": " import { patchLines } from \"./util.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067308
    },
    {
      "id": "63b8fb2d1280f00000e9bc9e",
      "text": " import { assertEquals } from \"./deps_test.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067308
    },
    {
      "id": "63b8fb2d1280f00000e9bc9f",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067308
    },
    {
      "id": "63b8fb2d1280f00000e9bca0",
      "text": " Deno.test(\"patchLines()\", async (t) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067782
    },
    {
      "id": "63b8fd091280f00000e9bcdc",
      "text": "   await t.step(\"その1\", () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067784,
      "updated": 1673067793
    },
    {
      "id": "63b8fb2d1280f00000e9bca1",
      "text": "     const template = [",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bca2",
      "text": "       \"template start\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bca3",
      "text": "       \"template template\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bca4",
      "text": "       \"template end\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bca5",
      "text": "     ];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bca6",
      "text": "     const lines = [",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bca7",
      "text": "       \"何か\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bca8",
      "text": "       \"aaa\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bca9",
      "text": "       \"template template\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcaa",
      "text": "       \" コメントが書いてあるかも\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcab",
      "text": "       \"template end modified\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcac",
      "text": "       \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcad",
      "text": "       \"本文とか\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcae",
      "text": "       \"おしまい\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcaf",
      "text": "     ];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcb0",
      "text": "     assertEquals<string[]>(patchLines(lines, template), [",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcb1",
      "text": "       \"template start\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fc081280f00000e9bcd7",
      "text": "       \"template template\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067532,
      "updated": 1673067797
    },
    {
      "id": "63b8fc0a1280f00000e9bcd8",
      "text": "       \"template end\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067532,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcb2",
      "text": "       \"何か\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcb3",
      "text": "       \"aaa\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcb4",
      "text": "       \"template template\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcb6",
      "text": "       \" コメントが書いてあるかも\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcb7",
      "text": "       \"template end modified\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcb8",
      "text": "       \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcb9",
      "text": "       \"本文とか\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcba",
      "text": "       \"おしまい\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fb2d1280f00000e9bcbb",
      "text": "     ]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067797
    },
    {
      "id": "63b8fd161280f00000e9bcdd",
      "text": "   });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067797,
      "updated": 1673067799
    },
    {
      "id": "63b8fb2d1280f00000e9bcbc",
      "text": " });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067308,
      "updated": 1673067801
    },
    {
      "id": "63b8fd1a1280f00000e9bcde",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067801,
      "updated": 1673067801
    },
    {
      "id": "63b8fb281280f00000e9bc9b",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067303,
      "updated": 1673067303
    },
    {
      "id": "63b8fb701280f00000e9bcbe",
      "text": "code:deps_test.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067375,
      "updated": 1673067379
    },
    {
      "id": "63b8fb741280f00000e9bcbf",
      "text": " export * from \"https://deno.land/std@0.171.0/testing/asserts.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067379,
      "updated": 1673067388
    },
    {
      "id": "63b8fb7a1280f00000e9bcc1",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067385,
      "updated": 1673067385
    },
    {
      "id": "63b8fb6f1280f00000e9bcbd",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067375,
      "updated": 1673067375
    },
    {
      "id": "63b8fa951280f00000e9bc12",
      "text": "code:format.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc13",
      "text": " import { findSplitIndex, patchLines } from \"./util.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc14",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc15",
      "text": " // linesにタイトルを入れないように",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc16",
      "text": " export const patchTemplate = (",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc17",
      "text": "   lines: string[],",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc18",
      "text": "   headers: string[],",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc19",
      "text": "   footers: string[],",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc1a",
      "text": " ): string[] => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc1b",
      "text": "   // headerとfooterに相当する行を補う",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc1c",
      "text": "   let bodies: string[] = lines;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc1d",
      "text": "   bodies = patchLines(bodies, headers, \"head\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc1e",
      "text": "   bodies = patchLines(bodies, footers, \"tail\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc1f",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc20",
      "text": "   // headerとfooterの間に余裕をもたせる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc21",
      "text": "   const headerEnd = findSplitIndex(bodies, headers);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc22",
      "text": "   const footerEnd = findSplitIndex(bodies, footers);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc23",
      "text": "   if (headerEnd === null || footerEnd === null) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc24",
      "text": "     // バグってテンプレの挿入がうまくいかなかったら諦める",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc25",
      "text": "     console.log(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc26",
      "text": "       \"format.tsのコードがバグったためtemplateの挿入を諦めました。\\n\" +",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc27",
      "text": "         `headerEnd: ${headerEnd}, footerEnd: ${footerEnd}`,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc28",
      "text": "     );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc29",
      "text": "     return lines;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc2a",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc2b",
      "text": "   const footerStart = footerEnd + 1 - footers.length;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc2c",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc2d",
      "text": "   return [",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc2e",
      "text": "     ...bodies.slice(0, headerEnd + 1),",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc2f",
      "text": "     \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc30",
      "text": "     ...bodies.slice(headerEnd + 1, footerStart).join(\"\\n\").trim().split(\"\\n\"),",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc31",
      "text": "     \"\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc32",
      "text": "     ...bodies.slice(footerStart),",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc33",
      "text": "   ];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc34",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc35",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc36",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc37",
      "text": "code:util.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc38",
      "text": " export const patchLines = (",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc39",
      "text": "   lines: string[],",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc3a",
      "text": "   appends: string[],",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc3b",
      "text": "   position: \"head\" | \"tail\" = \"head\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc3c",
      "text": " ): string[] => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc3d",
      "text": "   let appendsIndex = 0;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc3e",
      "text": "   for (const line of lines) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc3f",
      "text": "     if (line.trim() == appends[appendsIndex].trim()) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc40",
      "text": "       if (appendsIndex == appends.length - 1) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc41",
      "text": "         // appendsと完全に一致するパターンが発見されたので行を挿入せずに終了する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc42",
      "text": "         return lines;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc43",
      "text": "       }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc44",
      "text": "       ++appendsIndex;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc45",
      "text": "     } else {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc46",
      "text": "       // 何もしない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc47",
      "text": "       // appendsIndex = 0;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc48",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc49",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc4a",
      "text": "   // 一致するパターンが見つからなかった場合はappendsを挿入する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc4b",
      "text": "   switch (position) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc4c",
      "text": "     case \"head\":",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc4d",
      "text": "       return [...appends, ...lines];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc4e",
      "text": "     case \"tail\":",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc4f",
      "text": "       return [...lines, ...appends];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc50",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc51",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc52",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc53",
      "text": " /** queryに合致するlinesの終了行を返す */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc54",
      "text": " export const findSplitIndex = (",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc55",
      "text": "   lines: string[],",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc56",
      "text": "   query: string[],",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc57",
      "text": " ): number | null => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc58",
      "text": "   let queryCount = 0;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc59",
      "text": "   for (let lineIndex = 0; lineIndex < lines.length; lineIndex++) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc5a",
      "text": "     if (lines[lineIndex].trim() == query[queryCount].trim()) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc5b",
      "text": "       if (queryCount == query.length - 1) return Number(lineIndex);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc5c",
      "text": "       ++queryCount;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc5d",
      "text": "     }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc5e",
      "text": "   }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc5f",
      "text": "   return null;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc60",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    },
    {
      "id": "63b8fa951280f00000e9bc61",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1673067156,
      "updated": 1673067156
    }
  ]
}