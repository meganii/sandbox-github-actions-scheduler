{
  "id": "5fca18d17d8650001cf2cedc",
  "title": "js-script-button",
  "created": 1607080168,
  "updated": 1607421990,
  "lines": [
    {
      "id": "5fca18d17d8650001cf2cedc",
      "text": "js-script-button",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080168,
      "updated": 1607080168
    },
    {
      "id": "5fca18e85b98c2000087dd94",
      "text": "JavaScript を実行する",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080168,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dd95",
      "text": "UserScriptも実行できる",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dd96",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dd97",
      "text": "↓アイコン画像",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dd98",
      "text": "[https://gyazo.com/69c812cab9c00c30353a10cef12c4ab9]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dd99",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fcf4fe31280f000006aa835",
      "text": "これかなり使えそう[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607421924,
      "updated": 1607421929
    },
    {
      "id": "5fcf4fe81280f000006aa836",
      "text": "　template用scriptで使うことを考えている",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607421929,
      "updated": 1607421945
    },
    {
      "id": "5fcf4ff91280f000006aa837",
      "text": " 　各ページごとに違うtemplateを生成することができる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607421945,
      "updated": 1607421975
    },
    {
      "id": "5fcf500e1280f000006aa838",
      "text": "　その場で書いたscriptをすぐ試すのにも使えそう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607421967,
      "updated": 1607421990
    },
    {
      "id": "5fca18e85b98c2000087dd9a",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dd9b",
      "text": "code:button.js",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dd9c",
      "text": " (function () {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dd9d",
      "text": "   let jsscript =  document.getElementById('__JSsc__')",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dd9e",
      "text": "   if (jsscript){",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dd9f",
      "text": "     jsscript.parentNode.removeChild(jsscript);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dda0",
      "text": "     //console.log(\"nop\")",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dda1",
      "text": "     // リロードしてリセット（暫定処置）",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dda2",
      "text": "     location.reload(false)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dda3",
      "text": "     alert(\"removed\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dda4",
      "text": "   } else {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dda5",
      "text": "     jsscript = document.createElement(\"script\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dda6",
      "text": "     jsscript.id = '__JSsc__'",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca21571280f00000cf1c79",
      "text": "     jsscript.type = 'module';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607082327,
      "updated": 1607082334
    },
    {
      "id": "5fca18e85b98c2000087dda7",
      "text": "     jsscript.src = `https://scrapbox.io/api/code//${scrapbox.Project.name}/${encodeURIComponent(scrapbox.Page.title)}/script.js`",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dda8",
      "text": "     document.body.appendChild(jsscript);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087dda9",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddaa",
      "text": " })()",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddab",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddac",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddad",
      "text": "code:button2.js",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddae",
      "text": " export async function execute() {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddaf",
      "text": "   const jsScript = new JSScript('__JSsc__');",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607082285
    },
    {
      "id": "5fca18e85b98c2000087ddb0",
      "text": "   if(jsScript.hasScript()) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddb1",
      "text": "     jsScript.remove();",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddb2",
      "text": "     // リロードしてリセット（暫定処置）",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddb3",
      "text": "     location.reload(false)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddb4",
      "text": "     alert(\"removed\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddb5",
      "text": "     return;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddb6",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddb7",
      "text": "   jsScript.draw()",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddb8",
      "text": " }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddb9",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddba",
      "text": " class JSScript {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddbb",
      "text": "   constructor(id) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddbc",
      "text": "     this.id = id;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddbd",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddbe",
      "text": "   draw() {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddbf",
      "text": "     const jsscript = document.createElement(\"script\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddc0",
      "text": "     jsscript.id = this.id;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddc1",
      "text": "     //console.log(this.id);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca21671280f00000cf1c7a",
      "text": "     jsscript.type = 'module';",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1607082343,
      "updated": 1607082344
    },
    {
      "id": "5fca18e85b98c2000087ddc2",
      "text": "     jsscript.src = `https://scrapbox.io/api/code/${scrapbox.Project.name}/${encodeURIComponent(scrapbox.Page.title)}/script.js` ;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddc3",
      "text": "     document.body.appendChild(jsscript);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddc4",
      "text": "     //console.log(jsscript);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddc5",
      "text": "   } ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddc6",
      "text": "   hasScript() { return document.getElementById(this.id) !== null;}",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddc7",
      "text": "        ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddc8",
      "text": "   remove() {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddc9",
      "text": "     //console.log('remove');",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddca",
      "text": "     const jsscript = document.getElementById(this.id);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddcb",
      "text": "     if (!jsscript) return;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddcc",
      "text": "     // 既にscriptがある場合は削除する",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddcd",
      "text": "     jsscript.parentNode.removeChild(jsscript);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddce",
      "text": "     console.log('The script already exists. Removing it...');",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddcf",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddd0",
      "text": " }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddd1",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddd2",
      "text": "code:script.js",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddd3",
      "text": "  alert(\"Hello, world!!\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddd4",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddd5",
      "text": "[js-script-button.icon]←実行ボタン",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddd6",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddd7",
      "text": "#UserScript",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    },
    {
      "id": "5fca18e85b98c2000087ddd8",
      "text": "#icon-button",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1607080169,
      "updated": 1607080169
    }
  ]
}