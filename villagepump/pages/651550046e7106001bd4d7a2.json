{
  "id": "651550046e7106001bd4d7a2",
  "title": "開いているWebページを自分のprojectに引用するbookmark",
  "created": 1695895558,
  "updated": 1696159126,
  "lines": [
    {
      "id": "651550046e7106001bd4d7a2",
      "text": "開いているWebページを自分のprojectに引用するbookmark",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695895558,
      "updated": 1696126558
    },
    {
      "id": "6515500ded60e600000ebe48",
      "text": "from [/Summer498/開いている Web ページを自分の project に引用する bookmark]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695895566,
      "updated": 1696126615
    },
    {
      "id": "651552cfed60e600000ebe5b",
      "text": "",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695896272,
      "updated": 1695896272
    },
    {
      "id": "6518db8fed60e6000059213c",
      "text": "作: [Summer498.icon]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127888,
      "updated": 1696127895
    },
    {
      "id": "6518da07ed60e60000592133",
      "text": "[* 機能]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127495,
      "updated": 1696127501
    },
    {
      "id": "6518da0ded60e60000592135",
      "text": "\tscrapbox ページを開いている状態で起動すると、そのページを全文自分のプロジェクトにコピペする",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127501,
      "updated": 1696127542
    },
    {
      "id": "6518da43ed60e60000592137",
      "text": "\t\t先頭に `from [/Project.name/Page.title]`が追加される",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127556,
      "updated": 1696127614
    },
    {
      "id": "6518da36ed60e60000592136",
      "text": "\tscrapbox 以外を開いている状態で起動すると、そのページへの参照ページを自分のプロジェクトに作成する",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127543,
      "updated": 1696127690
    },
    {
      "id": "6518dacbed60e60000592138",
      "text": "\t\tその際に文字を選択していると、選択部分のみが引用される",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127691,
      "updated": 1696127726
    },
    {
      "id": "6518da07ed60e60000592134",
      "text": "",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127495,
      "updated": 1696127495
    },
    {
      "id": "6518d8aeed60e60000592129",
      "text": "[* 使い方]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127151,
      "updated": 1696127157
    },
    {
      "id": "6518d8b6ed60e6000059212b",
      "text": "\t1. minify バージョンをコピーしてブックマークの URL にペースト",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127158,
      "updated": 1696127459
    },
    {
      "id": "6518d8d7ed60e6000059212c",
      "text": "\t2.  `\"Summer498\"` となっている所を自分のプロジェクト名にする",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127192,
      "updated": 1696127407
    },
    {
      "id": "6518d911ed60e6000059212e",
      "text": "\t\t自分のプロジェクト名は、URL の `https://scrapbox.io/ProjectName` の `ProjectName` に書いてある文字列のこと",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127249,
      "updated": 1696127392
    },
    {
      "id": "6518d9c0ed60e60000592131",
      "text": "\t3. 気になったページでブックマークから起動するとページを引用できる",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127424,
      "updated": 1696128129
    },
    {
      "id": "6518d9bfed60e60000592130",
      "text": "",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127423,
      "updated": 1696127423
    },
    {
      "id": "6518db03ed60e60000592139",
      "text": "[* 今後の課題]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127748,
      "updated": 1696127755
    },
    {
      "id": "6518db0ced60e6000059213b",
      "text": "\tscrapbox ページを引用する方でも選択範囲のみの引用をしたい",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127756,
      "updated": 1696127775
    },
    {
      "id": "6518d8aeed60e6000059212a",
      "text": "",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127151,
      "updated": 1696127151
    },
    {
      "id": "6518dbfeed60e6000059213d",
      "text": "[* 参照]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127998,
      "updated": 1696128003
    },
    {
      "id": "6518dc03ed60e6000059213f",
      "text": "\t[/scrapboxlab/特定ページにブックマークしたい]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696128004,
      "updated": 1696128005
    },
    {
      "id": "6518dbfeed60e6000059213e",
      "text": "",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696127998,
      "updated": 1696127998
    },
    {
      "id": "651552d0ed60e600000ebe5d",
      "text": "[minify バージョン https://scrapbox-bundler.vercel.app/?url=https://scrapbox.io/api/code/villagepump/開いているWebページを自分のprojectに引用するbookmark/readable.js&bundle&minify&run&reload]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695896273,
      "updated": 1696126715
    },
    {
      "id": "6515578ced60e600003b2399",
      "text": "code:js",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695897485,
      "updated": 1695897513
    },
    {
      "id": "651557a1ed60e600003b239a",
      "text": " javascript: (()=>{let p=\"Summer498\",m='\\n',_=window,r=encodeURIComponent,c=_.scrapbox,a=t=>prompt(`Scrap \"${t}\" to /${p}/.`,t),o,i,l,s;if(c){let t=c.Project.name,e=c.Page,n=e.title,d=t+\"/\"+n;o=a(n),o&&(i=`from [/${d}]`,s=e.lines.map(f=>f.text).slice(1))}else{let t=document.title;if(o=a(t),o){i=`from [${location.href} ${t}]`;let e=getSelection().toString();s=e.trim()?e.split(m).map(n=>\"> \"+n):[\"\"]}}if(o){l=[i,\"\"].concat(s);let t=r(l.join(m));open(`https://scrapbox.io/${p}/${r(o.trim())}?body=`+t)}})();",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695897505,
      "updated": 1696159126
    },
    {
      "id": "651552d0ed60e600000ebe5c",
      "text": "なんか minify すると `join` の後の `'\\n'` が本当に改行になってしまうな[Summer498.icon]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695896272,
      "updated": 1695897814
    },
    {
      "id": "651558d6ed60e600003b239e",
      "text": "\t手動で直したけど",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695897815,
      "updated": 1695897821
    },
    {
      "id": "651558e1ed60e600003b239f",
      "text": "\tscrapbox-bundlerのバグ？",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695897825,
      "updated": 1695898237
    },
    {
      "id": "65155924ed60e600003b23a0",
      "text": "\tあ。多分違うな。Template literals 内では改行しても文字列が続くとみなされるから minify するために改行してるな",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695897892,
      "updated": 1695898228
    },
    {
      "id": "65191e651280f00000751170",
      "text": "\t[esbuild]の仕様。直す手段はない[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1696144998,
      "updated": 1696145009
    },
    {
      "id": "65191e851280f00000751171",
      "text": "  https://github.com/evanw/esbuild/issues/3018",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1696145031,
      "updated": 1696145219
    },
    {
      "id": "65194c88ed60e600001f5aee",
      "text": "  予想通り[Summer498.icon]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696156809,
      "updated": 1696156817
    },
    {
      "id": "65155d52ed60e600003b23b3",
      "text": "",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695898962,
      "updated": 1695898962
    },
    {
      "id": "65155006ed60e600000ebe46",
      "text": "code:readable.js",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695895558,
      "updated": 1695897524
    },
    {
      "id": "65155016ed60e600000ebe49",
      "text": "  (()=>{",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1695895575,
      "updated": 1696158601
    },
    {
      "id": "65195388ed60e600001f5b04",
      "text": "  \tconst my_project = \"Summer498\";",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696158601,
      "updated": 1696158601
    },
    {
      "id": "65195388ed60e600001f5b05",
      "text": "  \tconst LF='\\n'",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696158601,
      "updated": 1696158601
    },
    {
      "id": "65195388ed60e600001f5b06",
      "text": "  \tconst _window = window;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696158601,
      "updated": 1696158601
    },
    {
      "id": "65195388ed60e600001f5b07",
      "text": "  \tconst _encodeURIComponent = encodeURIComponent;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696158601,
      "updated": 1696158601
    },
    {
      "id": "65195388ed60e600001f5b08",
      "text": "  \tconst _scrapbox=_window.scrapbox;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696158601,
      "updated": 1696158601
    },
    {
      "id": "65195388ed60e600001f5b09",
      "text": "  \tconst getTitle = title => prompt(`Scrap \"${title}\" to /${my_project}/.`, title);",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696158601,
      "updated": 1696158601
    },
    {
      "id": "65195388ed60e600001f5b0a",
      "text": "  \tlet title, first_line, lines, quote;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696158601,
      "updated": 1696158601
    },
    {
      "id": "65191fc61280f00000751175",
      "text": "`try{_scrapbox = scrapbox}catch(_){_scrapbox=0}`を入れている理由がわからない[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1696145351,
      "updated": 1696145358
    },
    {
      "id": "65194c97ed60e600001f5aef",
      "text": "\tscrapbox 以外のページで scrapbox を参照しようとするとエラーが出るので防ぐ[Summer498.icon]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696156824,
      "updated": 1696156862
    },
    {
      "id": "65195122ed60e600001f5b00",
      "text": "\t\t`window.scrapbox` にすればいいな",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696157987,
      "updated": 1696158005
    },
    {
      "id": "6519534bed60e600001f5b01",
      "text": "\t\tcode:diff",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696158540,
      "updated": 1696158546
    },
    {
      "id": "65195351ed60e600001f5b02",
      "text": "\t\t - try{_scrapbox = scrapbox}catch(_){_scrapbox=0}",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696158546,
      "updated": 1696158556
    },
    {
      "id": "65195354ed60e600001f5b03",
      "text": "\t\t + const _scrapbox=_window.scrapbox;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696158549,
      "updated": 1696158564
    },
    {
      "id": "65191fc41280f00000751174",
      "text": "code:readable.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1696145350,
      "updated": 1696145350
    },
    {
      "id": "65191260ed60e60000f75735",
      "text": " \tif(_scrapbox){",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75736",
      "text": " \t\tconst project_name = _scrapbox.Project.name;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75737",
      "text": " \t\tconst page = _scrapbox.Page;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75738",
      "text": " \t\tconst page_title = page.title;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75739",
      "text": " \t\tconst page_path = project_name + \"/\" + page_title;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f7573a",
      "text": " \t\ttitle = getTitle(page_title);",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f7573b",
      "text": " \t\tif(title){",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f7573c",
      "text": " \t\t\tfirst_line = `from [/${page_path}]`;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f7573d",
      "text": " \t\t\tquote = page.lines.map(e=>e.text).slice(1);",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f7573e",
      "text": " \t\t}",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f7573f",
      "text": " \t}",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75740",
      "text": " \telse {",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75741",
      "text": "     \tconst document_title = document.title;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75742",
      "text": " \t\ttitle = getTitle(document_title);",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75743",
      "text": " \t\tif(title){",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75744",
      "text": " \t\t\tfirst_line = `from [${location.href} ${document_title}]`;",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75745",
      "text": " \t\t\tconst selection = getSelection().toString();",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75746",
      "text": " \t\t\tquote = selection.trim() ? selection.split(LF).map(e=>'> '+e) : [\"\"];",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75747",
      "text": " \t\t}",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75748",
      "text": " \t}",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f75749",
      "text": " \tif(title){",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f7574a",
      "text": " \t\tlines = [first_line, \"\"].concat(quote);",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191260ed60e60000f7574b",
      "text": " \t\tconst body = _encodeURIComponent(lines.join(LF));",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65194f67ed60e600001f5afd",
      "text": " \t\topen(`https://scrapbox.io/${my_project}/${_encodeURIComponent(title.trim())}?body=` + body);",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696157544,
      "updated": 1696157555
    },
    {
      "id": "65191260ed60e60000f7574c",
      "text": " \t}",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696157547
    },
    {
      "id": "65191260ed60e60000f7574e",
      "text": " })();",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696141920,
      "updated": 1696141920
    },
    {
      "id": "65191fb81280f00000751172",
      "text": "テンプレート文字列にしたほうが1文字少なくなる[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1696145337,
      "updated": 1696145373
    },
    {
      "id": "65194cffed60e600001f5af4",
      "text": "\t草[Summer498.icon]もちろん助かる",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696156928,
      "updated": 1696157138
    },
    {
      "id": "65194cf3ed60e600001f5af1",
      "text": "\t\tcode:diff",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696156916,
      "updated": 1696156933
    },
    {
      "id": "65194d05ed60e600001f5af5",
      "text": "\t\t - open('https://scrapbox.io/'+my_project+'/'+_encodeURIComponent(title.trim())+'?body='+body);",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696156934,
      "updated": 1696156975
    },
    {
      "id": "65194d16ed60e600001f5af6",
      "text": "\t\t + open(`https://scrapbox.io/${my_project}/${_encodeURIComponent(title.trim())}?body=`+body);",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696156951,
      "updated": 1696157487
    },
    {
      "id": "65191fb81280f00000751173",
      "text": "\t\t2文字減らせた (body まで包むとココから 2 文字増えて元に戻る) [Summer498.icon]",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696145338,
      "updated": 1696157878
    },
    {
      "id": "65194f9aed60e600001f5afe",
      "text": "\t\t\t端の変数は足したほうがいいのか",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696157595,
      "updated": 1696157611
    },
    {
      "id": "65194fdbed60e600001f5aff",
      "text": "\t\tminify 頑張るなら if 分書きたくないところやけども (ヤメロ)",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696157660,
      "updated": 1696157687
    },
    {
      "id": "65194f30ed60e600001f5afc",
      "text": "",
      "userId": "6436266c7ac3c0001bed60e6",
      "created": 1696157489,
      "updated": 1696157489
    }
  ]
}