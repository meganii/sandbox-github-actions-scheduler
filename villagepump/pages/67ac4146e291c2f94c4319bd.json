{
  "id": "67ac4146e291c2f94c4319bd",
  "title": "MeCabを使ってテキストをルビ付きのHTML/LaTeXに変換する",
  "created": 1739342153,
  "updated": 1739349513,
  "lines": [
    {
      "id": "67ac4146e291c2f94c4319bd",
      "text": "MeCabを使ってテキストをルビ付きのHTML/LaTeXに変換する",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739342153,
      "updated": 1739345460
    },
    {
      "id": "67ac414871b3c2000028f36b",
      "text": "[bsahd.icon]",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739342153,
      "updated": 1739342153
    },
    {
      "id": "67ac414971b3c2000028f36d",
      "text": "#MeCab",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739342153,
      "updated": 1739342155
    },
    {
      "id": "67ac53bd71b3c2000028f3e8",
      "text": "(HTMLヘッダーなどは手動で追加してください)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346877,
      "updated": 1739346884
    },
    {
      "id": "67ac53e471b3c2000028f3e9",
      "text": "",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346917,
      "updated": 1739346917
    },
    {
      "id": "67ac53e571b3c2000028f3ea",
      "text": "出力",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346917,
      "updated": 1739346920
    },
    {
      "id": "67ac53e871b3c2000028f3eb",
      "text": " [https://gyazo.com/be7417759c85a78d6553f253cf25c0c6]",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346920,
      "updated": 1739346963
    },
    {
      "id": "67ac541371b3c2000028f3ed",
      "text": " [体言止めの文の形のリンク]のデメリットが出てきた...",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346964,
      "updated": 1739346981
    },
    {
      "id": "67ac543a71b3c2000028f3ee",
      "text": " 外国語ネイティブの方向けにUserScript化したら良さそう",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739347002,
      "updated": 1739347057
    },
    {
      "id": "67ac548671b3c2000028f3ef",
      "text": "  分かち書きもしなきゃ...(ウエッ)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739347078,
      "updated": 1739347094
    },
    {
      "id": "67ac541071b3c2000028f3ec",
      "text": "",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346960,
      "updated": 1739346960
    },
    {
      "id": "67ac54ac71b3c2000028f3f0",
      "text": "Denoで作るなら[kuromoji.ts]に切り替えようかな",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739347116,
      "updated": 1739347141
    },
    {
      "id": "67ac590971b3c20000ac2a36",
      "text": "\t辞書はどれを使えばいいんだ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739348233,
      "updated": 1739348239
    },
    {
      "id": "67ac5b5271b3c20000ac2a37",
      "text": "\tリポジトリ全体を落とさなきゃいけないのか",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739348818,
      "updated": 1739348831
    },
    {
      "id": "67ac5bcc71b3c20000ac2a38",
      "text": "\tConnectionCosts buffer overflowがthrowされてる",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739348941,
      "updated": 1739349279
    },
    {
      "id": "67ac5d1e71b3c20000ac2a3a",
      "text": "\t辞書ファイルの配置が悪かったようだ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739349279,
      "updated": 1739349285
    },
    {
      "id": "67ac5dec71b3c20000ac2a3b",
      "text": "\t辞書内蔵にして...",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739349485,
      "updated": 1739349513
    },
    {
      "id": "67ac54ad71b3c2000028f3f1",
      "text": "",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739347117,
      "updated": 1739347117
    },
    {
      "id": "67ac56c071b3c20000ac2a35",
      "text": "スペース類が消えてる",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739347648,
      "updated": 1739347651
    },
    {
      "id": "67ac56bf71b3c20000ac2a34",
      "text": "",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739347647,
      "updated": 1739347647
    },
    {
      "id": "67ac4df771b3c2000028f36e",
      "text": "code:ruby.ts",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739345400,
      "updated": 1739345404
    },
    {
      "id": "67ac4dfc71b3c2000028f36f",
      "text": " import * as csv from \"jsr:@std/csv\";",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739345404,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3bb",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3bc",
      "text": " const content = await Deno.readTextFile(Deno.args[0]);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3bd",
      "text": " const contentLines = content.split(\"\\n\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3be",
      "text": " for (const contentLine of contentLines) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3bf",
      "text": " \tconst command = new Deno.Command(\"mecab\", {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3c0",
      "text": " \t\targs: [\"-E\", \"\"],",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3c1",
      "text": " \t\tstdin: \"piped\",",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3c2",
      "text": " \t\tstdout: \"piped\",",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3c3",
      "text": " \t});",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3c4",
      "text": " \tconst child = command.spawn();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3c5",
      "text": " \tconst childStdin = child.stdin.getWriter();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3c6",
      "text": " \tchildStdin.write(new TextEncoder().encode(contentLine));",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3c7",
      "text": " \tchildStdin.close();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3c8",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3c9",
      "text": " \tlet dataText = \"\";",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3ca",
      "text": " \tconst reader = child.stdout.getReader();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3cb",
      "text": " \twhile (true) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3cc",
      "text": " \t\tconst { done, value } = await reader.read();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3cd",
      "text": " \t\tif (done) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3ce",
      "text": " \t\t\tbreak;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3cf",
      "text": " \t\t}",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3d0",
      "text": " \t\tdataText += new TextDecoder().decode(value);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3d1",
      "text": " \t}",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3d2",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3d3",
      "text": " \t// console.log(dataText);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3d4",
      "text": " \tlet data = csv.parse(dataText, { separator: \"\\t\" });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3d5",
      "text": " \tdata = data.map((e) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3d6",
      "text": " \t\treturn e.concat(e[1].split(\",\"));",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3d7",
      "text": " \t});",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3d8",
      "text": " \tconsole.log(\"<p>\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3d9",
      "text": " \tconsole.log(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3da",
      "text": " \t\tdata.map((e) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3db",
      "text": " \t\t\tif (e[9] == undefined || /^[^\\u4E00-\\u9FFF]+$/.test(e[0])) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3dc",
      "text": " \t\t\t\treturn e[0];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3dd",
      "text": " \t\t\t}",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3de",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3df",
      "text": " \t\t\treturn `<ruby>${e[0]}<rp>(</rp><rt>${",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3e0",
      "text": " \t\t\t\te[9].replace(/[\\u30A1-\\u30FA]/g, (substring) =>",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3e1",
      "text": " \t\t\t\t\tString.fromCharCode(substring.charCodeAt(0) - 0x60))",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3e2",
      "text": " \t\t\t}</rt><rp>)</rp></ruby>`;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3e3",
      "text": " \t\t}).join(\"\"),",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3e4",
      "text": " \t);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3e5",
      "text": " \tconsole.log(\"</p>\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3e6",
      "text": " }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    },
    {
      "id": "67ac53bb71b3c2000028f3e7",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1739346875,
      "updated": 1739346875
    }
  ]
}