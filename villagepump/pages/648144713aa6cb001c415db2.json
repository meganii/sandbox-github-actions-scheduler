{
  "id": "648144713aa6cb001c415db2",
  "title": "time-mirror",
  "created": 1686193267,
  "updated": 1686199826,
  "lines": [
    {
      "id": "648144713aa6cb001c415db2",
      "text": "time-mirror",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686193267,
      "updated": 1686193267
    },
    {
      "id": "648144741280f000001ea127",
      "text": "[未来の自分に作業配信]の実装",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686193268,
      "updated": 1686193274
    },
    {
      "id": "648144731280f000001ea125",
      "text": " https://time-mirror.vercel.app/",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686193267,
      "updated": 1686193267
    },
    {
      "id": "648144741280f000001ea126",
      "text": " https://github.com/blu3mo/time-mirror",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686193267,
      "updated": 1686193267
    },
    {
      "id": "6481447c1280f000001ea128",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686193276,
      "updated": 1686193276
    },
    {
      "id": "6481447c1280f000001ea129",
      "text": " コードはほとんどChatGPTに書かせた[blu3mo.icon]",
      "userId": "5d89b1f60230ae001779e113",
      "created": 1686193276,
      "updated": 1686193527
    },
    {
      "id": "6481466479e1130000d79f17",
      "text": "  https://chat.openai.com/share/66cec31a-6c51-4017-b318-1472ad62f4a1",
      "userId": "5d89b1f60230ae001779e113",
      "created": 1686193765,
      "updated": 1686193801
    },
    {
      "id": "6481459d1280f000001ea199",
      "text": "  だからところどころ変だったんですね(constじゃなくてletだったり)[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686193565,
      "updated": 1686193581
    },
    {
      "id": "648145a879e1130000c86d34",
      "text": "　　　www[blu3mo.icon]",
      "userId": "5d89b1f60230ae001779e113",
      "created": 1686193577,
      "updated": 1686193579
    },
    {
      "id": "648145ab79e1130000c86d35",
      "text": "　　　これは不思議、なぜだろう[blu3mo.icon]",
      "userId": "5d89b1f60230ae001779e113",
      "created": 1686193579,
      "updated": 1686193601
    },
    {
      "id": "6481457979e1130000c86d31",
      "text": "  自分は設計とデバッグだけ",
      "userId": "5d89b1f60230ae001779e113",
      "created": 1686193529,
      "updated": 1686193632
    },
    {
      "id": "6481458679e1130000c86d32",
      "text": "  　と思ったけど実装方針もChatGPTに任せてたな（[MediaRecorder]使うとか）",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686193543,
      "updated": 1686195729
    },
    {
      "id": "648145c579e1130000c86d36",
      "text": "  　「映像をローカルに保存する形でこれを作りたい」というところまでは自分が決めた()",
      "userId": "5d89b1f60230ae001779e113",
      "created": 1686193606,
      "updated": 1686193632
    },
    {
      "id": "64814cfb1280f000001ea2be",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195451,
      "updated": 1686195451
    },
    {
      "id": "64814cf91280f000001ea2bd",
      "text": "`cursor: \"always\"`は無効です[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195449,
      "updated": 1686195450
    },
    {
      "id": "64814cfc1280f000001ea2bf",
      "text": " 昔はあったらしいけど、Opera以外サポートしていなかった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195452,
      "updated": 1686195492
    },
    {
      "id": "64814d241280f000001ea2c0",
      "text": " https://stackoverflow.com/questions/64250857/is-it-possible-to-disable-the-cursor-from-being-recorded-with-getdisplaymedia",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195492,
      "updated": 1686195492
    },
    {
      "id": "64814d2e1280f000001ea2c1",
      "text": " https://udn.realityripple.com/docs/Web/API/MediaTrackConstraints/cursor",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195502,
      "updated": 1686195503
    },
    {
      "id": "648145e279e1130000c86d38",
      "text": "",
      "userId": "5d89b1f60230ae001779e113",
      "created": 1686193634,
      "updated": 1686193634
    },
    {
      "id": "648149051280f000001ea23e",
      "text": "UserScript版",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194437,
      "updated": 1686194440
    },
    {
      "id": "64814ce91280f000001ea2b6",
      "text": " [- 多分動く]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195433,
      "updated": 1686195690
    },
    {
      "id": "64814deb1280f000001ea2c3",
      "text": " 動かないや。なんかミスったな",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195691,
      "updated": 1686195696
    },
    {
      "id": "64814d481280f000001ea2c2",
      "text": " https://scrapbox-bundler.vercel.app?url=https://scrapbox.io/api/code/villagepump/time-mirror/script.ts&bundle&minify&run&reload",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195528,
      "updated": 1686195545
    },
    {
      "id": "648148301280f000001ea22f",
      "text": "code:script.ts",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194224,
      "updated": 1686194227
    },
    {
      "id": "6481492b1280f000001ea243",
      "text": " /// <reference no-default-lib=\"true\" />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194475,
      "updated": 1686194475
    },
    {
      "id": "6481492b1280f000001ea244",
      "text": " /// <reference lib=\"esnext\" />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194475,
      "updated": 1686194475
    },
    {
      "id": "6481492b1280f000001ea245",
      "text": " /// <reference lib=\"dom\" />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194475,
      "updated": 1686194475
    },
    {
      "id": "6481492b1280f000001ea246",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194475,
      "updated": 1686194475
    },
    {
      "id": "648148341280f000001ea230",
      "text": " import { setup } from \"./mod.tsx\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194227,
      "updated": 1686194237
    },
    {
      "id": "6481492e1280f000001ea247",
      "text": " import { Scrapbox } from \"https://raw.githubusercontent.com/scrapbox-jp/types/0.4.2/userscript.ts\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194478,
      "updated": 1686194518
    },
    {
      "id": "6481483d1280f000001ea231",
      "text": " declare const scrapbox: Scrapbox;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194237,
      "updated": 1686194527
    },
    {
      "id": "648149571280f000001ea248",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194519,
      "updated": 1686194519
    },
    {
      "id": "6481484e1280f000001ea234",
      "text": " const ops = await setup();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194254,
      "updated": 1686194259
    },
    {
      "id": "6481483e1280f000001ea232",
      "text": " scrapbox.PageMenu.addItem({",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194239,
      "updated": 1686194252
    },
    {
      "id": "648148581280f000001ea235",
      "text": "   title: \"recording\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194264,
      "updated": 1686194397
    },
    {
      "id": "6481485b1280f000001ea236",
      "text": "   onClick: () => ops.isRecording ? ops.stop() : ops.start(),",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194266,
      "updated": 1686194408
    },
    {
      "id": "648148491280f000001ea233",
      "text": " });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194249,
      "updated": 1686194262
    },
    {
      "id": "648148ec1280f000001ea239",
      "text": " scrapbox.PageMenu.addItem({",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194412,
      "updated": 1686194412
    },
    {
      "id": "648148ec1280f000001ea23a",
      "text": "   title: \"PiP\",",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194412,
      "updated": 1686194418
    },
    {
      "id": "648148ec1280f000001ea23b",
      "text": "   onClick: () => ops.isRecording && ops.pip(),",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194412,
      "updated": 1686194425
    },
    {
      "id": "648148ec1280f000001ea23c",
      "text": " });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194412,
      "updated": 1686194412
    },
    {
      "id": "648148fc1280f000001ea23d",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194428,
      "updated": 1686194428
    },
    {
      "id": "648148301280f000001ea22e",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194224,
      "updated": 1686194224
    },
    {
      "id": "6481449c1280f000001ea12a",
      "text": "code:mod.tsx",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686193309,
      "updated": 1686194149
    },
    {
      "id": "648149101280f000001ea23f",
      "text": " /// <reference no-default-lib=\"true\" />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686194448,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea249",
      "text": " /// <reference lib=\"esnext\" />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea24a",
      "text": " /// <reference lib=\"dom\" />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea24b",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea24c",
      "text": " /** @jsx h */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea24d",
      "text": " /** @jsxFrag Fragment */",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea24e",
      "text": " import { h, render } from \"https://esm.sh/preact@10.11.3\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea24f",
      "text": " import {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea250",
      "text": "   useCallback,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea251",
      "text": "   useEffect,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea252",
      "text": "   useRef,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea253",
      "text": "   useState,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea254",
      "text": " } from \"https://esm.sh/preact@10.11.3/hooks\";",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea255",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea256",
      "text": " export interface Operators {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea257",
      "text": "   isRecording: boolean;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea258",
      "text": "   start: () => void;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea259",
      "text": "   stop: () => void;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea25a",
      "text": "   pip: () => void;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea25b",
      "text": " }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea25c",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea25d",
      "text": " const App = (",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea25e",
      "text": "   { setOperators }: { setOperators: (operators: Operators) => void },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea25f",
      "text": " ) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea260",
      "text": "   const [isRecording, setRecording] = useState(false);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea261",
      "text": "   const [recordedChunks, setRecordedChunks] = useState<Blob[]>([]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea263",
      "text": "   const recordedVideoRef = useRef<HTMLVideoElement>(null);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea264",
      "text": "   const [mediaRecorder, setMediaRecorder] = useState<",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea265",
      "text": "     MediaRecorder | undefined",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea266",
      "text": "   >();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea267",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea26e",
      "text": "   const start = useCallback(async () => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea26f",
      "text": "     const stream = await navigator.mediaDevices.getDisplayMedia({",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea270",
      "text": "       video: true,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea271",
      "text": "       audio: false,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea272",
      "text": "     });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea273",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea274",
      "text": "     const recorder = new MediaRecorder(stream);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea275",
      "text": "     recorder.addEventListener(\"dataavailable\", (event) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686199784
    },
    {
      "id": "64815dea1280f0000093aeec",
      "text": "       if (event.data.size === 0) return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686199786,
      "updated": 1686199788
    },
    {
      "id": "64815dea1280f0000093aeed",
      "text": "       setRecordedChunks((prev) => [...prev, event.data]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686199786,
      "updated": 1686199788
    },
    {
      "id": "64815de81280f0000093aeeb",
      "text": "     });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686199784,
      "updated": 1686199784
    },
    {
      "id": "64814ce61280f000001ea276",
      "text": "     recorder.start(100); // collect 100ms of data at a time",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea277",
      "text": "     setMediaRecorder(recorder);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea278",
      "text": "     setRecording(true);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea27a",
      "text": "   }, []);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea27b",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea27c",
      "text": "   const stop = useCallback(() => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea27d",
      "text": "     mediaRecorder?.stop?.();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea27e",
      "text": "     mediaRecorder?.stream?.getTracks?.()?.forEach?.((track) => track.stop());",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea27f",
      "text": "     setRecording(false);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea281",
      "text": "   }, [mediaRecorder]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea282",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea283",
      "text": "   const pip = useCallback(() => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea284",
      "text": "     recordedVideoRef.current?.requestPictureInPicture?.();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea285",
      "text": "   }, [recordedVideoRef.current]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea286",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea287",
      "text": "   useEffect(() => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea288",
      "text": "     if (!isRecording) return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686199818
    },
    {
      "id": "64814ce61280f000001ea289",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea28a",
      "text": "     const timer = setInterval(() => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea28b",
      "text": "       const blob = new Blob(recordedChunks, { type: \"video/webm\" });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea28c",
      "text": "       const url = URL.createObjectURL(blob);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea28d",
      "text": "       if (!recordedVideoRef.current) return;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea28e",
      "text": "       const currentTime = recordedVideoRef.current.currentTime;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea28f",
      "text": "       recordedVideoRef.current.src = url;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea290",
      "text": "       recordedVideoRef.current.currentTime = currentTime;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea291",
      "text": "     }, 1000); // 10 minutes",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea292",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea293",
      "text": "     return clearInterval(timer);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea294",
      "text": "   }, [isRecording, recordedChunks, recordedVideoRef.current]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686199826
    },
    {
      "id": "64814ce61280f000001ea295",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea296",
      "text": "   const exportRef = useRef<Operators>({ start, stop, pip, isRecording });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea297",
      "text": "   useEffect(() => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea298",
      "text": "     // currentの参照を壊さずに更新する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea299",
      "text": "     Object.assign(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea29a",
      "text": "       exportRef.current,",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea29b",
      "text": "       { start, stop, pip, isRecording },",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea29c",
      "text": "     );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea29d",
      "text": "   }, [start, stop, pip, isRecording]);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea29e",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea29f",
      "text": "   useEffect(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2a0",
      "text": "     () => setOperators(exportRef.current),",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2a1",
      "text": "     [setOperators],",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2a2",
      "text": "   );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2a3",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2a4",
      "text": "   return (",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2a5",
      "text": "     <video",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2a6",
      "text": "       ref={recordedVideoRef}",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2a7",
      "text": "       style={{ \"maxWidth\": \"50%\" }}",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2a8",
      "text": "       autoPlay",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2a9",
      "text": "       controls",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2aa",
      "text": "     />",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2ab",
      "text": "   );",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2ac",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2ad",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2ae",
      "text": " export const setup = (): Promise<Operators> => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195582
    },
    {
      "id": "64814ce61280f000001ea2af",
      "text": "   const div = document.createElement(\"div\");",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2b0",
      "text": "   document.body.append(div);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2b1",
      "text": "   return new Promise<Operators>((resolve) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195577
    },
    {
      "id": "64814ce61280f000001ea2b2",
      "text": "     render(<App setOperators={resolve} />, div);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2b3",
      "text": "   });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2b4",
      "text": " };",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "64814ce61280f000001ea2b5",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686195430,
      "updated": 1686195430
    },
    {
      "id": "6481449c1280f000001ea12b",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1686193309,
      "updated": 1686193309
    }
  ]
}