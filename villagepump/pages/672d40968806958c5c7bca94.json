{
  "id": "672d40968806958c5c7bca94",
  "title": "全ページリスト(ネットワークにつながっていないページを洗い出したい)",
  "created": 1731018903,
  "updated": 1731041926,
  "lines": [
    {
      "id": "672d40968806958c5c7bca94",
      "text": "全ページリスト(ネットワークにつながっていないページを洗い出したい)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731018903,
      "updated": 1731038841
    },
    {
      "id": "672d409771b3c20000db9ac8",
      "text": "code:allPages.ts",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731018903,
      "updated": 1731018912
    },
    {
      "id": "672d409f71b3c20000db9aca",
      "text": " const allpagelist = async (pjname: string) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731018912,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cf9c",
      "text": "   const projectName: string = pjname;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cf9d",
      "text": "   const marked: string[] = [];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cf9e",
      "text": "   interface ScrapboxPagesJson {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cf9f",
      "text": "     count: number;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfa0",
      "text": "     pages: { title: string }[];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfa1",
      "text": "   }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfa2",
      "text": " ",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfa3",
      "text": "   const getPage = async (offset: number) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfa4",
      "text": "     const pageRes = await fetch(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfa5",
      "text": "       \"https://scrapbox.io/api/pages/\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfa6",
      "text": "         projectName +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfa7",
      "text": "         \"/?skip=\" +",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfa8",
      "text": "         encodeURIComponent(offset)",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfa9",
      "text": "     );",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfaa",
      "text": "     if (pageRes.ok) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfab",
      "text": "       const pageJson: Readonly<ScrapboxPagesJson> = await pageRes.json();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfac",
      "text": "       for (const element of pageJson.pages) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfad",
      "text": "         marked.push(element.title);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfae",
      "text": "       }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfaf",
      "text": "     }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfb0",
      "text": "   };",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfb1",
      "text": "   const pageRes = await fetch(\"https://scrapbox.io/api/pages/\" + projectName);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfb2",
      "text": "   if (!pageRes.ok) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfb3",
      "text": "     throw Error;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfb4",
      "text": "   }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfb5",
      "text": "   const pageJson: Readonly<ScrapboxPagesJson> = await pageRes.json();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfb6",
      "text": "   const promiseList: Promise<void>[] = [];",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfb7",
      "text": "   const arrayRange = (start: number, stop: number, step: number) =>",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfb8",
      "text": "     Array.from(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfb9",
      "text": "       { length: (stop - start) / step + 1 },",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfba",
      "text": "       (_, index) => start + index * step",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfbb",
      "text": "     );",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfbc",
      "text": "   for (const element of arrayRange(0, pageJson.count, 100)) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfbd",
      "text": "     promiseList.push(getPage(element));",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfbe",
      "text": "   }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfbf",
      "text": "   await Promise.all(promiseList);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfc0",
      "text": "   return marked;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    },
    {
      "id": "672d431a71b3c20000e4cfc1",
      "text": " };",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731041926
    },
    {
      "id": "672d431a71b3c20000e4cfc8",
      "text": " export{allpagelist}",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1731019547,
      "updated": 1731019547
    }
  ]
}