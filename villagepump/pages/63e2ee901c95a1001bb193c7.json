{
  "id": "63e2ee901c95a1001bb193c7",
  "title": "先に日記ページを作ってリネームするとpin-diaryでページが作られない",
  "created": 1675816593,
  "updated": 1675835111,
  "lines": [
    {
      "id": "63e2ee901c95a1001bb193c7",
      "text": "先に日記ページを作ってリネームするとpin-diaryでページが作られない",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816593
    },
    {
      "id": "63e2ee91aff09e000053042c",
      "text": "先に日記ページを作ってリネームするとpin-diaryでページが作られない",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816631
    },
    {
      "id": "63e2ee91aff09e000053042e",
      "text": "\t（解決済み）",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816593
    },
    {
      "id": "63e2eeb8aff09e0000530452",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816633,
      "updated": 1675816633
    },
    {
      "id": "63e2eeb1aff09e0000530450",
      "text": "from [2023/02/08 アムステルダム]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816626,
      "updated": 1675816632
    },
    {
      "id": "63e2ee91aff09e000053042f",
      "text": "[inajob.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816608
    },
    {
      "id": "63e2ee91aff09e0000530430",
      "text": " あれ、自分の[pin-diary]がうまく動いてないのかな？今日のページが作られない",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530431",
      "text": " 　[まぁアムステルダムがあるので良いか、、]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530432",
      "text": " 　　光り輝いている言葉なのでブラケティングさせていただいた[issac-37765679.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530433",
      "text": " 　　　[まあ家に帰れば生ハム原木あるしな]と同じ趣き",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530434",
      "text": " 　仕様を見てないけど、[prefix]で判断してる？",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1675816593,
      "updated": 1675816849
    },
    {
      "id": "63e2ee91aff09e0000530435",
      "text": " 　そんなことはないと思うなぁ[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530436",
      "text": " 　　あっ、もしかして内部的に「リネームされたページ」の扱いになってる？？？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530437",
      "text": " 　　そうでもなさそう(リダイレクトはされなかった)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530438",
      "text": " 　　おそらく「[リネーム]されたページ」に近い現象が起きている[inajob.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1675816593,
      "updated": 1675816858
    },
    {
      "id": "63e2ee91aff09e0000530439",
      "text": " 　　　[/scrapboxlab/api/pages/:projectname/:pagetitle#60046dd51280f000005c0625]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e000053043a",
      "text": " 　　　\tfollowRenameを有効にするとこのページが引けるように見える",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e000053043b",
      "text": " 　　　\t\t> ページが無い場合、アクセス履歴から変更先のタイトルを探してリダイレクトする機能",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e000053043c",
      "text": " 　　　\t\tこれはどういう機能なのだろう？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e000053043d",
      "text": " 　　　\t\t\tアクセス履歴というのはユーザ側が持つデータ？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e000053043e",
      "text": " 　　　\t\t\tページAが生成された後に(詳細な条件はわからないがある時点でそれが記録され)その後Bにリネームされた時に、AへのアクセスをBにリダイレクトする仕組みがある[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e309231280f0000025cf8f",
      "text": " 　　　\t\t\t外部からページAにアクセスがあると、アクセスログに記録されます[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675823396,
      "updated": 1675823409
    },
    {
      "id": "63e309921280f0000025cf92",
      "text": " 　　　\t\t\tcf. [ページタイトル変更でリダイレクトされないバグを踏んだ]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675823507,
      "updated": 1675823509
    },
    {
      "id": "63e2ee91aff09e000053043f",
      "text": " 　　　\thttps://github.com/takker99/scrapbox-userscript-std/blob/c6bc021ab4328db7bcce6b281488b7740ee45fef/rest/pages.ts#L37",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530440",
      "text": " 　　　\t\t敢えてそうなるようにコーディングされている？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e309391280f0000025cf90",
      "text": " 　　　\t\tdefaultで`followRename=true`になるようcodingしています[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675823417,
      "updated": 1675823430
    },
    {
      "id": "63e309461280f0000025cf91",
      "text": " 　　　\t\toffにするときは`getPage(project, title, { followRename: false })`を呼んでください",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675823430,
      "updated": 1675823454
    },
    {
      "id": "63e2ee91aff09e0000530441",
      "text": " 　PCからアクセスしたけど、、まだ",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530442",
      "text": " 　このページ([2023/02/08 アムステルダム])にヘッダフッタがついたのも気になる",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1675816593,
      "updated": 1675816828
    },
    {
      "id": "63e2ee91aff09e0000530443",
      "text": " 　\t[nishio.icon]さんがこのページを作った時間ではなく、[inajob.icon]がアクセスした時間についているような気がする",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530444",
      "text": " 　\t\tpin-diaryがこのページを今日のページとして認識しているのでは？",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530445",
      "text": " 　9:19 空の`2023/02/08`作った[nishio.icon]",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530446",
      "text": " 　　僕の解釈: `2023/02/08`を作って(t=1)からサブタイトルとサムネイルをどうしようと考えてGeoGuessrをプレイしてサブタイトルをアムステルダムにする(t=3)の間に旧タイトルの記録が行われた(t=2)",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530447",
      "text": " 　　　以前聞いた仕様では「外部からリンクをたどってアクセスがあった時」に記録される仕様だった記憶だが、条件が変わったのかも知れない",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530448",
      "text": " 　　[\" ページが無い場合、アクセス履歴から変更先のタイトルを探してリダイレクトする機能]で `2023/02/08`と `2023/02/08 アムステルダム`が同一視されている",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e0000530449",
      "text": " 　　空の`2023/02/08`ページを作っておけば「ページはあるが空」となるのでpin-diaryがテンプレートを挿入するはず",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e000053044a",
      "text": " お、[2023/02/08]ができた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e000053044b",
      "text": " \t自分が見た時[2023/02/08]のページは作られていたが、サムネイルから確認する限り中身はなかった、アクセスするとヘッダとフッタがついた",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e000053044c",
      "text": " \t自分の[pin-diary]が発動した予感",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e000053044d",
      "text": " \tページが作られたのでfollowRenameの挙動が変わったんだろうな（上で[nishio.icon]さんが書きそう）",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816672
    },
    {
      "id": "63e2ee91aff09e000053044e",
      "text": "",
      "userId": "582e63d27c56960011aff09e",
      "created": 1675816593,
      "updated": 1675816593
    },
    {
      "id": "63e2ee91aff09e000053044f",
      "text": "修正するには、[scrapbox-userscript-std/browser/websocket]の`pull`に手を加えないとだめそう[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675816593,
      "updated": 1675823693
    },
    {
      "id": "63e30a281280f0000025cf99",
      "text": " `pull`：指定したページのpage idやcommit idを取得する関数",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675823656,
      "updated": 1675823712
    },
    {
      "id": "63e314f37838e30000e68bd1",
      "text": " 　最近よくお世話になってる関数だ！[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1675826420,
      "updated": 1675826438
    },
    {
      "id": "63e336711280f0000093097f",
      "text": " 　ありがとうございます[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675834994,
      "updated": 1675835002
    },
    {
      "id": "63e3367a1280f00000930980",
      "text": "  　`getPage()`をちょっとwrapしただけなのに、わざわざ関数にする必要性があったかなと疑問に感じているが……",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675835002,
      "updated": 1675835062
    },
    {
      "id": "63e30a601280f0000025cf9b",
      "text": " 内部で`getPage()`を`followRename=true`で実行しているため、ページタイトル変更後のページのpage idなどを取得してしまう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675823712,
      "updated": 1675823755
    },
    {
      "id": "63e30a8d1280f0000025cf9c",
      "text": " 外部から`followRename`を渡せるよう設計を組み替える必要がある",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675823757,
      "updated": 1675823790
    },
    {
      "id": "63e30aae1280f0000025cf9d",
      "text": "  なんとなく[propsバケツリレー]の匂いがしてきた……[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675823790,
      "updated": 1675823806
    },
    {
      "id": "63e3152b7838e30000e68bd2",
      "text": "  [React]のコンポーネントを触っているときに[スコープの壁]を感じてはいたけれど、まさか[propsバケツリレー]という単語ができていたとは[Mijinko_SD.icon]",
      "userId": "60fb0a79f3364000237838e3",
      "created": 1675826476,
      "updated": 1675826547
    },
    {
      "id": "63e309b01280f0000025cf96",
      "text": "\t空ページ作れば問題ないので、喫緊で修正する必要はなさそう[inajob.icon]",
      "userId": "58442db3ee4a2400116eb406",
      "created": 1675823537,
      "updated": 1675824312
    },
    {
      "id": "63e30ca86eb40600002900be",
      "text": " 自分が困っていないこともあるので、修正しないつもりです[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675824297,
      "updated": 1675835108
    },
    {
      "id": "63e336d01280f00000930983",
      "text": "  cf. [本人が困っていないだけ]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675835089,
      "updated": 1675835111
    },
    {
      "id": "63e336c11280f00000930982",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1675835074,
      "updated": 1675835074
    }
  ]
}