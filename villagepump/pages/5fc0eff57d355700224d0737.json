{
  "id": "5fc0eff57d355700224d0737",
  "title": "井戸端の直径",
  "created": 1606479878,
  "updated": 1636518989,
  "lines": [
    {
      "id": "5fc0eff57d355700224d0737",
      "text": "井戸端の直径",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479878,
      "updated": 1606482153
    },
    {
      "id": "5fc0f005dd59fe0000110d0e",
      "text": "[https://gyazo.com/77bef04f5338f47e26c05e1bda65d38b]",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479878,
      "updated": 1606482312
    },
    {
      "id": "6069fc60e5172d00008c43ba",
      "text": "[https://gyazo.com/2b2339f7faba7066d0597b035c98b36e]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1617558625,
      "updated": 1617558626
    },
    {
      "id": "6069fc61e5172d00008c43bb",
      "text": "　[2021/4/5] 02:50",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1617558626,
      "updated": 1617558648
    },
    {
      "id": "6069fca7e5172d00008c43bc",
      "text": "　　日記で稼いでるなｗ[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1617558695,
      "updated": 1617558718
    },
    {
      "id": "60a07a151280f000001e8d06",
      "text": "　　2021-05-16 10:49:19 日記を除いたver.[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621129749,
      "updated": 1621129766
    },
    {
      "id": "60a07a261280f000001e8d07",
      "text": "　　 [https://gyazo.com/be92263077003ae4ddde266755e8b2e0]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621129766,
      "updated": 1621129778
    },
    {
      "id": "60a10597e5172d0000880649",
      "text": "　　 [/icons2/すばら.icon][yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621165464,
      "updated": 1621165474
    },
    {
      "id": "60a105eae5172d000088064a",
      "text": "　　 ときどき話題が飛ぶところが面白い[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621165547,
      "updated": 1621165555
    },
    {
      "id": "609eff5f1280f0000030ce50",
      "text": "　[graph diameter]の経由点を表示しているわけか[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621032799,
      "updated": 1621032822
    },
    {
      "id": "5fc0f006dd59fe0000110d0f",
      "text": "",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479879,
      "updated": 1606479879
    },
    {
      "id": "5fc0f010dd59fe0000110d10",
      "text": "[リンク]のネットワークのうち、二点間を結ぶ最短経路の中で最も長いもの（graph diameter)",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479890,
      "updated": 1606482233
    },
    {
      "id": "5fc0fa05dd59fe00005644ec",
      "text": " そのプロジェクトの屋台骨みたいなものが何となく見えたら面白いかと思ったけど微妙",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606482438,
      "updated": 1606482486
    },
    {
      "id": "6069fbfae5172d00008c43b7",
      "text": " 面白い[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1617558523,
      "updated": 1617558673
    },
    {
      "id": "609f5738e5172d0000b498e2",
      "text": " 直感に合った最長経路を得るには、もっと工夫したほうがいいのかも？[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621055289,
      "updated": 1621055345
    },
    {
      "id": "609f5770e5172d0000b498e3",
      "text": " 　[日記]のような明らかに[時間軸指向]のページを外す",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621055345,
      "updated": 1621055384
    },
    {
      "id": "60a082fd1280f00000b466e3",
      "text": " 　 [井戸端の直径#60a079ea1280f000001e8d05]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621132028,
      "updated": 1621132030
    },
    {
      "id": "609f5797e5172d0000b498e4",
      "text": " 　すごく意味的に近いページがたくさんあって、その小さい範囲を全部つないで距離を稼ぐみたいなことが起こりそう",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621055384,
      "updated": 1621055550
    },
    {
      "id": "609f580ee5172d0000b498e5",
      "text": " 　　避けるには意味を扱わないといけなさそうで難しそう",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621055503,
      "updated": 1621055538
    },
    {
      "id": "5fc0f026dd59fe0000110d12",
      "text": "",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479911,
      "updated": 1606479911
    },
    {
      "id": "609f9d7479d3a900007f4c76",
      "text": "経路の長さってどういうことですか？[sta.icon]",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621073268,
      "updated": 1621073277
    },
    {
      "id": "609f9d7e79d3a900007f4c77",
      "text": " リンクは繋いだか、繋いでないかだけなので、長さという概念がよくわからない",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621073278,
      "updated": 1621073293
    },
    {
      "id": "609f9d8d79d3a900007f4c78",
      "text": " （コードはまだ読んでない[- 読むのだるいから軽率にヒントもらうスタイル]）",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621073293,
      "updated": 1621073326
    },
    {
      "id": "609f9d7379d3a900007f4c75",
      "text": "\t\tdiameter …… 直径",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621073268,
      "updated": 1621073381
    },
    {
      "id": "609f9e2c79d3a900007f4c7c",
      "text": "\t\tdist …… 辿ったページリストと現在のページのペア",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621073452,
      "updated": 1621073464
    },
    {
      "id": "609f9e3b79d3a900007f4c7d",
      "text": "\t\tdistList …… distのリスト",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621073468,
      "updated": 1621073469
    },
    {
      "id": "609f9ed079d3a900007f4c81",
      "text": "\t\t続きはウェブで……じゃなくて自分のprojectで[sta.icon]",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621073617,
      "updated": 1621073627
    },
    {
      "id": "609f9e1fe5172d0000a6a282",
      "text": "\tページAとBが最短で2-hop linkで繋がってたら、AとBの間の経路の長さは2、みたいな[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621073448,
      "updated": 1621073493
    },
    {
      "id": "609f9de079d3a900007f4c79",
      "text": "\t\tなるほど！",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621073376,
      "updated": 1621073531
    },
    {
      "id": "609f9e7c79d3a900007f4c7f",
      "text": "\t\tリンクでたどり着いたら+1、みたいなニュアンスだ",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621073533,
      "updated": 1621073553
    },
    {
      "id": "609f9eb5e5172d0000a6a283",
      "text": "\t\t　YES",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621073589,
      "updated": 1621073591
    },
    {
      "id": "60a082ba1280f00000b466e2",
      "text": "\t\t順リンクしか計算していないので、2-hop linkではありません[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621131962,
      "updated": 1621131977
    },
    {
      "id": "60a09013e5172d00007e3d24",
      "text": "\t\t　あ、たしかに[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621135380,
      "updated": 1621135383
    },
    {
      "id": "60a067e0e5172d00008e4729",
      "text": "\t[/sta/scrapbox projectの直径を計算する]見てて気付いたけど、predはprev(=previous)の書き間違いな気がします[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621125088,
      "updated": 1621125144
    },
    {
      "id": "609f9e9579d3a900007f4c80",
      "text": "\t\t[/icons/あざっす.icon]",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621073557,
      "updated": 1621131925
    },
    {
      "id": "60a0827c79d3a90000cfdf2f",
      "text": "",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621131901,
      "updated": 1621131901
    },
    {
      "id": "6069fc11e5172d00008c43b8",
      "text": "#複雑ネットワーク",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1617558546,
      "updated": 1617558550
    },
    {
      "id": "6069fd14e5172d00008c43bf",
      "text": "#直径",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1617558804,
      "updated": 1617558807
    },
    {
      "id": "6069fc16e5172d00008c43b9",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1617558550,
      "updated": 1617558550
    },
    {
      "id": "60a079e71280f000001e8d04",
      "text": "2021-05-16",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621129703,
      "updated": 1621129706
    },
    {
      "id": "60a0950a1280f00000cf7683",
      "text": " 12:44:12 すでに`A→B→C`という経路が探索されている時に、`A→D→B`という経路が除外されてしまうのをなんとかしたいのだがうまく行かない[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621136650,
      "updated": 1621138780
    },
    {
      "id": "60a095af1280f00000cf768a",
      "text": "  [井戸端の直径#609f02d91280f0000030d995]の中に`visited`を移動したら、WebWorkerが何もしていないのに強制終了した",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621136816,
      "updated": 1621136873
    },
    {
      "id": "60a095ea1280f00000cf768b",
      "text": "   WebWorkerだとしても、非常に重い計算をさせると落ちるのか？",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621136873,
      "updated": 1621136893
    },
    {
      "id": "60a0969c1280f00000cf768e",
      "text": "   [https://stackoverflow.com/questions/37099465/web-workers-terminating-abruptly javascript - Web workers terminating abruptly - Stack Overflow]が参考になるかもしれない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621137052,
      "updated": 1621137068
    },
    {
      "id": "618b4c2a1280f00000331135",
      "text": "  2021-11-10 13:35:55 まだ壊れたまんまかな？[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1636518954,
      "updated": 1636518962
    },
    {
      "id": "618b4c311280f00000331136",
      "text": "   壊れてるの気付いた人がいたら直してくれ(他力本願)",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1636518962,
      "updated": 1636518989
    },
    {
      "id": "60a092131280f000005504ec",
      "text": " 12:31:33 refactoring",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621135891,
      "updated": 1621135899
    },
    {
      "id": "60a079ea1280f000001e8d05",
      "text": " 10:48:24 特定ページを除外できるようにした",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621129706,
      "updated": 1621129715
    },
    {
      "id": "609f028a1280f0000030d2ab",
      "text": "2021-05-15",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033610,
      "updated": 1621034859
    },
    {
      "id": "609f076c1280f000000791a2",
      "text": " 08:27:38 井戸端の直径が長すぎて画面がfreezeしたので、WebWorkerで計算するようにした[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621034859,
      "updated": 1621034895
    },
    {
      "id": "609f3c055b98c20000a09a92",
      "text": " 　ひゃっほー、エラーになるぜー [suto3.icon]（多分、ページ数が原因）",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1621048325,
      "updated": 1621048416
    },
    {
      "id": "609f56bae5172d0000b498df",
      "text": " 　　2021/5/15 14:06 [yosider.icon]の環境だと動く ([2021/11/10]→[東京都庁展望室], 199)",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621055162,
      "updated": 1621055201
    },
    {
      "id": "609f028a1280f0000030d2aa",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033610,
      "updated": 1621033610
    },
    {
      "id": "5fc0f03add59fe0000110d6d",
      "text": "↓対象のプロジェクトを開いてこれをコンソールにコピペするとそこの経路が表示される",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479931,
      "updated": 1606482195
    },
    {
      "id": "6069fcdce5172d00008c43be",
      "text": "　結構すぐ計算できるものなんだなあ[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1617558748,
      "updated": 1617558751
    },
    {
      "id": "609ee453e5172d00008642a4",
      "text": "　全ページに対して、そのページからの最長の経路を求め、そのうち最大のものを表示する",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621025875,
      "updated": 1621025884
    },
    {
      "id": "5fc0f026dd59fe0000110d13",
      "text": "code:diameter.js",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479911,
      "updated": 1606482254
    },
    {
      "id": "5fc0f030dd59fe0000110d14",
      "text": " (async () => {",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d22",
      "text": "     const worker = new Worker('/api/code/villagepump/井戸端の直径/worker.js');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606479921,
      "updated": 1621034048
    },
    {
      "id": "60a0977f1280f00000cf7692",
      "text": "     const project = scrapbox.Project.name;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621137279,
      "updated": 1621137290
    },
    {
      "id": "609f034a1280f0000030d9b6",
      "text": "     const done = new Promise(resolve => {",
      "userId": "5e5b870dd7f3000017a33682",
      "created": 1621033802,
      "updated": 1621041388
    },
    {
      "id": "609f03621280f0000030d9b8",
      "text": "       worker.postMessage({project, exclude: /\\d{4}\\/\\d{2}\\/\\d{2}/});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033826,
      "updated": 1621137293
    },
    {
      "id": "609f03681280f0000030d9b9",
      "text": "       worker.onmessage = ({data}) => resolve(data);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033832,
      "updated": 1621033856
    },
    {
      "id": "609f03601280f0000030d9b7",
      "text": "     });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033824,
      "updated": 1621033826
    },
    {
      "id": "609f039a1280f0000030d9ba",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033882,
      "updated": 1621033882
    },
    {
      "id": "5fc0f030dd59fe0000110d4a",
      "text": " \tconst win = $(`<div class=\"page\">",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d4b",
      "text": " \t\t<a>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d4c",
      "text": " \t\t\t<i class=\"kamon kamon-cross\" style=\"position: absolute; right: 1em;\"></i>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d4d",
      "text": " \t\t</a>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d4e",
      "text": " ",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d4f",
      "text": " \t\tDiameter path:",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606482244
    },
    {
      "id": "5fc0f030dd59fe0000110d50",
      "text": " \t\t<ol>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d51",
      "text": " \t\t</ol>",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d52",
      "text": " \t</div>`)",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d53",
      "text": " \t.css({",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d54",
      "text": " \t\t'position': 'fixed',",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d55",
      "text": " \t\t'z-index': 1000,",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d56",
      "text": " \t\t'width': '40%',",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d57",
      "text": " \t\t'height': 'calc(98% - 140px)',",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d58",
      "text": " \t\t'top': '140px',",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d59",
      "text": " \t\t'right': '0',",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d5a",
      "text": " \t\t'margin': '0 6%',",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d5b",
      "text": " \t\t'padding': '1em',",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d5c",
      "text": " \t\t'overflow-y': 'scroll',",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d5d",
      "text": " \t\t'border': '1px solid rgba(0,0,0,0.16)',",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d5e",
      "text": " \t});",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d5f",
      "text": " \t$('> a:nth(0)', win).click(() => { win.hide('fast', () => win.remove()); });",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d60",
      "text": " ",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d61",
      "text": " \tconst ol = $('ol', win);",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d62",
      "text": " \tfor (const p of (await done)[0]) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606479921,
      "updated": 1621134007
    },
    {
      "id": "5fc0f030dd59fe0000110d63",
      "text": " \t\tconst li = $(`<li><a href=\"/${project}/${encodeURIComponent(p)}\">${p}</a></li>`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1606479921,
      "updated": 1621164183
    },
    {
      "id": "5fc0f030dd59fe0000110d67",
      "text": " \t\tol.append(li);",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d68",
      "text": " \t}",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d69",
      "text": " ",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d6a",
      "text": " \t$('body').append(win);",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "609eff9b1280f0000030ce51",
      "text": " \t",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621032859,
      "updated": 1621032859
    },
    {
      "id": "5fc0f030dd59fe0000110d6b",
      "text": " })();",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f030dd59fe0000110d6c",
      "text": " ",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479921,
      "updated": 1606479921
    },
    {
      "id": "5fc0f010dd59fe0000110d11",
      "text": "",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606479890,
      "updated": 1606479890
    },
    {
      "id": "609f02901280f0000030d2ad",
      "text": "code:worker.js",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033616,
      "updated": 1621033619
    },
    {
      "id": "609f02941280f0000030d2ae",
      "text": " self.addEventListener('message', async ({data: {project, exclude}}) => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033620,
      "updated": 1621129573
    },
    {
      "id": "609f02d91280f0000030d98c",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621033689
    },
    {
      "id": "609f05d11280f0000042cc1c",
      "text": "     console.log(`[worker.js@井戸端の直径] Fetching all link data of \"/${project}\"...`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621034449,
      "updated": 1621034556
    },
    {
      "id": "609f02d91280f0000030d98d",
      "text": "     const links = await getLinkInfo(project, exclude);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621129586
    },
    {
      "id": "609f06251280f0000042cc1d",
      "text": "     console.log(`[worker.js@井戸端の直径] Done: `, links);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621034532,
      "updated": 1621034557
    },
    {
      "id": "609f06301280f0000042cc1e",
      "text": "     ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621034544,
      "updated": 1621034544
    },
    {
      "id": "609f06341280f0000042cc1f",
      "text": "     console.log(`[worker.js@井戸端の直径] Start calculating the graph diameter...`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621034547,
      "updated": 1621034576
    },
    {
      "id": "60a07ff41280f00000b466db",
      "text": " \tconst diameterLists = Object.keys(links).map(page => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621131252,
      "updated": 1621134142
    },
    {
      "id": "609f02d91280f0000030d98f",
      "text": " \t\t// page: 距離を測る元ページのタイトル",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621131823
    },
    {
      "id": "60a095331280f00000cf7689",
      "text": " \t\t",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621136691,
      "updated": 1621136691
    },
    {
      "id": "60a095281280f00000cf7688",
      "text": "         let visited = new Set();",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621136681,
      "updated": 1621136684
    },
    {
      "id": "609f02d91280f0000030d991",
      "text": " \t\tlet distList = [[page]];  // 現在ページを含む辿ったページリスト（=経路）のリスト",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621132241
    },
    {
      "id": "60a093dc1280f0000084a49f",
      "text": " \t\t",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621136348,
      "updated": 1621136348
    },
    {
      "id": "609f02d91280f0000030d994",
      "text": " \t\twhile (true) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621033689
    },
    {
      "id": "60a0806a1280f00000b466dc",
      "text": " \t\t    // 現在ページから1歩進んだ経路のリスト",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621131370,
      "updated": 1621132382
    },
    {
      "id": "609f02d91280f0000030d995",
      "text": " \t\t\tconst nextList = distList.flatMap(pages => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621136531
    },
    {
      "id": "609f02d91280f0000030d997",
      "text": " \t\t\t\treturn links[pages[pages.length - 1]].flatMap(link => {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621136538
    },
    {
      "id": "609f02d91280f0000030d998",
      "text": " \t\t\t\t\t// pのリンク先の各ページを見る",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621033689
    },
    {
      "id": "609f02d91280f0000030d999",
      "text": " \t\t\t\t\tif (!links[link]) return []; // 空リンクの場合",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621131849
    },
    {
      "id": "60a080a41280f00000b466dd",
      "text": " \t\t\t\t\tif (visited.has(link)) return [];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621131428,
      "updated": 1621136359
    },
    {
      "id": "60a080b11280f00000b466de",
      "text": " \t\t\t\t\t// 未訪問なら1歩進んだ経路を追加する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621131441,
      "updated": 1621131442
    },
    {
      "id": "60a093e91280f0000084a4a0",
      "text": " \t\t\t\t\tvisited.add(link);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621136361,
      "updated": 1621136694
    },
    {
      "id": "60a082641280f00000b466e1",
      "text": " \t\t\t\t\t// prev[0]→prev[1]→...→prev[n]→linkと辿ってきたことを表す配列",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621131876,
      "updated": 1621132289
    },
    {
      "id": "60a080b11280f00000b466e0",
      "text": " \t\t\t\t\treturn [[...pages, link]];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621131441,
      "updated": 1621132300
    },
    {
      "id": "609f02d91280f0000030d9a3",
      "text": " \t\t\t\t})",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621131477
    },
    {
      "id": "609f02d91280f0000030d9a4",
      "text": " \t\t\t});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621136535
    },
    {
      "id": "60a097031280f00000cf7690",
      "text": " \t\t\t// 行き止まり",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621137155,
      "updated": 1621137156
    },
    {
      "id": "609f02d91280f0000030d9a5",
      "text": " \t\t\tif (nextList.length == 0) break;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621137159
    },
    {
      "id": "60a097091280f00000cf7691",
      "text": " \t\t\t",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621137160,
      "updated": 1621137160
    },
    {
      "id": "609f02d91280f0000030d9a9",
      "text": " \t\t\t// 現在の経路リストを更新して繰り返す",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621033689
    },
    {
      "id": "609f02d91280f0000030d9aa",
      "text": " \t\t\tdistList = nextList;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621033689
    },
    {
      "id": "609f02d91280f0000030d9ac",
      "text": " \t\t}",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621033689
    },
    {
      "id": "60a08baf1280f000002fbffa",
      "text": " \t\t//console.log(`[worker.js@井戸端の直径] length=${distList[0].length - 1}, variation=${distList.length}`);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621134255,
      "updated": 1621136728
    },
    {
      "id": "60a08a0d1280f000002fbff3",
      "text": " \t\treturn distList;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621133837,
      "updated": 1621133842
    },
    {
      "id": "609f02d91280f0000030d9b4",
      "text": " \t});",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033689,
      "updated": 1621133836
    },
    {
      "id": "60a08a531280f000002fbff8",
      "text": " \t",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621133907,
      "updated": 1621133907
    },
    {
      "id": "60a08a511280f000002fbff6",
      "text": "     // 一番長いのを返す",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621133904,
      "updated": 1621133904
    },
    {
      "id": "60a08a511280f000002fbff7",
      "text": "     const maxLength = Math.max(...diameterLists.map(distList => distList[0].length ?? 0));",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621133904,
      "updated": 1621135285
    },
    {
      "id": "60a08a6e1280f000002fbff9",
      "text": "     const diameterList = diameterLists.flatMap(distList => distList.filter(list => list.length === maxLength));",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621133934,
      "updated": 1621135402
    },
    {
      "id": "609f02ca1280f0000030d2fc",
      "text": "     console.log(`[worker.js@井戸端の直径] Done: `, diameterList);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033674,
      "updated": 1621135088
    },
    {
      "id": "609f02ea1280f0000030d9b5",
      "text": "     self.postMessage(diameterList);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033706,
      "updated": 1621135090
    },
    {
      "id": "609f02c81280f0000030d2fb",
      "text": " });",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033672,
      "updated": 1621033677
    },
    {
      "id": "609f02b41280f0000030d2fa",
      "text": " ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033652,
      "updated": 1621033652
    },
    {
      "id": "609f02a31280f0000030d2eb",
      "text": " // 全ページのリンク情報を取得",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033637
    },
    {
      "id": "609f02a31280f0000030d2ec",
      "text": " async function getLinkInfo(project = scrapbox.Project.name, exclude) {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621129594
    },
    {
      "id": "609f02a31280f0000030d2ed",
      "text": "   \tconst rawPages = [];",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033642
    },
    {
      "id": "609f02a31280f0000030d2ee",
      "text": "   \tlet followingId = null;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033642
    },
    {
      "id": "609f02a31280f0000030d2ef",
      "text": "   \tdo {",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033642
    },
    {
      "id": "609f02a31280f0000030d2f0",
      "text": "   \t\tconst param = followingId === null ? '' : `?followingId=${followingId}`;",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033642
    },
    {
      "id": "609f02a31280f0000030d2f1",
      "text": "   \t\tconst res = await fetch(",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033642
    },
    {
      "id": "609f02a31280f0000030d2f2",
      "text": "   \t\t\t`https://scrapbox.io/api/pages/${project}/search/titles${param}`",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033642
    },
    {
      "id": "609f02a31280f0000030d2f3",
      "text": "   \t\t);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033642
    },
    {
      "id": "609f02a31280f0000030d2f4",
      "text": "   \t\tfollowingId = res.headers.get('X-Following-Id');",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033642
    },
    {
      "id": "609f02a31280f0000030d2f5",
      "text": "   \t\trawPages.push(...(await res.json()));",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033642
    },
    {
      "id": "609f02a31280f0000030d2f6",
      "text": "   \t} while (followingId);",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033635,
      "updated": 1621033642
    },
    {
      "id": "609f06811280f0000042cc20",
      "text": "   \t",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621034625,
      "updated": 1621034625
    },
    {
      "id": "60a07fc41280f00000b466cf",
      "text": "   \t// {\"title\": [\"link0\", \"link1\", ...], ...}を作る",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621131204,
      "updated": 1621131233
    },
    {
      "id": "60a07fc21280f00000b466ce",
      "text": "    \treturn Object.fromEntries(rawPages.flatMap(p => exclude?.test?.(p.title) ? [] : [[p.title, p.links]]));",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621131202,
      "updated": 1621131202
    },
    {
      "id": "609f06831280f0000042cc22",
      "text": " }",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621034627,
      "updated": 1621034629
    },
    {
      "id": "609f02901280f0000030d2ac",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621033616,
      "updated": 1621033616
    },
    {
      "id": "609ef31ee5172d0000730337",
      "text": " リンク`l`の走査の順番によっては最長経路を飛ばしてしまう可能性がある？[yosider.icon]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621029663,
      "updated": 1621029670
    },
    {
      "id": "609ef31fe5172d0000730338",
      "text": "",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621029663,
      "updated": 1621029663
    },
    {
      "id": "5fc0f0c2dd59fe0000110d70",
      "text": "[/nishio]",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606480067,
      "updated": 1606480069
    },
    {
      "id": "5fc0f0badd59fe0000110d6e",
      "text": "[https://gyazo.com/de8f79fa2ba00e7be0473dd99f4aa436]",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606480059,
      "updated": 1606480061
    },
    {
      "id": "5fc0f0bcdd59fe0000110d6f",
      "text": "",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606480061,
      "updated": 1606480061
    },
    {
      "id": "5fc0f0f5dd59fe0000110d73",
      "text": "[/motoso]",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606480119,
      "updated": 1606480119
    },
    {
      "id": "5fc0f0efdd59fe0000110d71",
      "text": "[https://gyazo.com/2a99e249a0943385c917978b12efc5f5]",
      "userId": "5ad57975d54cd50014068484",
      "created": 1606480112,
      "updated": 1617605773
    },
    {
      "id": "5fc0f0f1dd59fe0000110d72",
      "text": "",
      "userId": "5f3cf18043ed94001edd59fe",
      "created": 1606480114,
      "updated": 1606480114
    },
    {
      "id": "609f215fa3368200003ff211",
      "text": "[/erniogi]",
      "userId": "5e5b870dd7f3000017a33682",
      "created": 1621041503,
      "updated": 1621041508
    },
    {
      "id": "609f2161a3368200003ff212",
      "text": "[https://gyazo.com/4fb54ac2199fa695ecafaa3d9190f478]",
      "userId": "5e5b870dd7f3000017a33682",
      "created": 1621041505,
      "updated": 1621041510
    },
    {
      "id": "609f2165a3368200003ff214",
      "text": "\tなんか違う気もするが.....[erniogi.icon]",
      "userId": "5e5b870dd7f3000017a33682",
      "created": 1621041510,
      "updated": 1621041573
    },
    {
      "id": "609f2165a3368200003ff213",
      "text": "",
      "userId": "5e5b870dd7f3000017a33682",
      "created": 1621041510,
      "updated": 1621041510
    }
  ]
}