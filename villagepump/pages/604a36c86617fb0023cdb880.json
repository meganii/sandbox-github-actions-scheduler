{
  "id": "604a36c86617fb0023cdb880",
  "title": "ScrapCalc",
  "created": 1615476431,
  "updated": 1683466646,
  "lines": [
    {
      "id": "604a36c86617fb0023cdb880",
      "text": "ScrapCalc",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615476431,
      "updated": 1615476431
    },
    {
      "id": "604a36cf8ee92a00008685d5",
      "text": " Scrapboxを[スプレッドシート]みたいに使う方法",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615476431,
      "updated": 1615553342
    },
    {
      "id": "604aba738ee92a00008685dd",
      "text": " [/masui/ScrapCalc] に書きました [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615510131,
      "updated": 1615510142
    },
    {
      "id": "60ad86a58ee92a0000772e80",
      "text": " [** 記法が = から % に変更になりました]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621984934,
      "updated": 1621984953
    },
    {
      "id": "604b62e98ee92a0000586ffd",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615553258,
      "updated": 1615553258
    },
    {
      "id": "604b62e98ee92a0000586fff",
      "text": " 「Scrapboxで計算ができるようになった。何に使えるかな?」と考えても用途を思いつくものではない",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615553258,
      "updated": 1615553289
    },
    {
      "id": "604b646b8ee92a0000587006",
      "text": "  ボトムアップ[発想]は難しい",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615553644,
      "updated": 1615553654
    },
    {
      "id": "604b63098ee92a0000587001",
      "text": " しかし、ページ上で何か計算が必要になったときScrapCalcを思い出すようなことがあれば役にたつこともあるだろう",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615553289,
      "updated": 1615553546
    },
    {
      "id": "604b63a38ee92a0000587005",
      "text": " \tScrapboxのページ数 = [% scrapbox.Project.pages.length] ページ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615553444,
      "updated": 1621984722
    },
    {
      "id": "604b6582b19cc30000d3dd30",
      "text": " \t 赤いのも含むやつか",
      "userId": "6044910bc9a74e001eb19cc3",
      "created": 1615553923,
      "updated": 1615554042
    },
    {
      "id": "604a36d08ee92a00008685d6",
      "text": "  東京オリンピックまで [% Math.floor((new Date('2021-7-23') - Date.now()) / (24 * 60 * 60 * 1000))] 日",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615476432,
      "updated": 1621984733
    },
    {
      "id": "604b69798ee92a0000587007",
      "text": "  テキスト = `[% scrapbox.Page.lines.map( function(l){ return l.text} ).join(\"\\n\")]`",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615554937,
      "updated": 1621984883
    },
    {
      "id": "621e88728ee92a00003779cd",
      "text": "  [/prog-exercises/円周率問題]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1646168178,
      "updated": 1646168179
    },
    {
      "id": "604b6aa18ee92a000040ab46",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615555234,
      "updated": 1615555234
    },
    {
      "id": "604b6beb8ee92a00004b215f",
      "text": " [ScrapJupyter]というのが爆誕してた",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615555564,
      "updated": 1615555575
    },
    {
      "id": "604b700c8ee92a0000e1c59d",
      "text": "  というか既存のアイデアに名前がついてた",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615556621,
      "updated": 1615556653
    },
    {
      "id": "604b6bf68ee92a00004b2161",
      "text": "  こちらの方式を使うかな... [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615555575,
      "updated": 1615555583
    },
    {
      "id": "604b6e2b8ee92a0000e1c594",
      "text": "  `(1,eval)('a = 100')` とすると `window.a = 100` になるらしい",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615556139,
      "updated": 1615558850
    },
    {
      "id": "604b6fda8ee92a0000e1c59c",
      "text": "   なんでやろ",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615556570,
      "updated": 1615556573
    },
    {
      "id": "604b6bec8ee92a00004b2160",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615555564,
      "updated": 1615555564
    },
    {
      "id": "604c5311b19cc300006625ed",
      "text": " 成績判定できるなら、履修シミュレーションもできるじゃん！",
      "userId": "6044910bc9a74e001eb19cc3",
      "created": 1615614740,
      "updated": 1615614756
    },
    {
      "id": "604cd1a38ee92a0000f8e75f",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615647139,
      "updated": 1615647139
    },
    {
      "id": "604cd1a38ee92a0000f8e760",
      "text": "[増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615647139,
      "updated": 1615647140
    },
    {
      "id": "604cd1a48ee92a0000f8e761",
      "text": " [家計簿]計算するのに便利すぎる",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615647140,
      "updated": 1615647337
    },
    {
      "id": "604e8dfb8ee92a0000681d46",
      "text": " いろんな計算と文章書きを同じところでやるのは正しいことだと思う",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615760892,
      "updated": 1615760971
    },
    {
      "id": "604e8e408ee92a0000681d47",
      "text": " Excelでもエディタでもこれができないのは間違ってる",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615760961,
      "updated": 1615760986
    },
    {
      "id": "604d90848ee92a0000a3b890",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615696004,
      "updated": 1615696004
    },
    {
      "id": "604d90848ee92a0000a3b891",
      "text": "[* 年齢計算]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615696004,
      "updated": 1615696015
    },
    {
      "id": "604d90848ee92a0000a3b894",
      "text": " [増井俊之.icon] は [% Math.floor((((1900+(new Date).getYear())+(\"00\"+((new Date).getMonth()+1)).substr(-2)+(\"00\"+(new Date).getDate()).substr(-2))-19590711) / 10000)]歳",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615696005,
      "updated": 1621984891
    },
    {
      "id": "622ae2d58ee92a000040356d",
      "text": "  長いな...",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1646977750,
      "updated": 1646977753
    },
    {
      "id": "622aed0c1280f0000035f713",
      "text": "  こっちのほうがやや短い？[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1646980364,
      "updated": 1646980372
    },
    {
      "id": "622aec8b1280f0000035f710",
      "text": "   [% Math.floor((new Date().getTime() - new Date(1959,6,11).getTime()) / (365 * 24 * 60 * 60 * 1000))]歳",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1646980234,
      "updated": 1646980373
    },
    {
      "id": "622aecdd1280f0000035f711",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1646980316,
      "updated": 1646980316
    },
    {
      "id": "604d90848ee92a0000a3b89c",
      "text": "[* グラフを描く]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615696005,
      "updated": 1615696023
    },
    {
      "id": "604d90848ee92a0000a3b89d",
      "text": " [増井俊之.icon] の体重",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615696005,
      "updated": 1615696005
    },
    {
      "id": "604d90848ee92a0000a3b89e",
      "text": " [% 'I'.repeat(99.1)] 2020/3/27 99.1",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615696005,
      "updated": 1621984896
    },
    {
      "id": "604d90848ee92a0000a3b89f",
      "text": " [% 'I'.repeat(97.8)] 2020/4/17 97.8",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615696005,
      "updated": 1621984898
    },
    {
      "id": "604d90848ee92a0000a3b8a0",
      "text": " [% 'I'.repeat(95.1)] 2021/2/2 95.1",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615696005,
      "updated": 1621984900
    },
    {
      "id": "604d90848ee92a0000a3b8a1",
      "text": " [%  'I'.repeat(93.1)] 2021/2/25 93.1",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615696005,
      "updated": 1621984908
    },
    {
      "id": "6222d5708ee92a000086cfa5",
      "text": "",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1646450033,
      "updated": 1646450033
    },
    {
      "id": "6222d5718ee92a000086cfa6",
      "text": "[オプティミスト度テスト]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1646450033,
      "updated": 1646450036
    },
    {
      "id": "604c5312b19cc300006625ee",
      "text": "",
      "userId": "6044910bc9a74e001eb19cc3",
      "created": 1615614740,
      "updated": 1615614740
    },
    {
      "id": "610610c61280f00000ee5045",
      "text": "実装",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1627787463,
      "updated": 1627787464
    },
    {
      "id": "610610c81280f00000ee5046",
      "text": " [Page MenuからScrapCalcを動かす]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1627787464,
      "updated": 1627787470
    },
    {
      "id": "610610cd1280f00000ee5047",
      "text": " [Scrapboxをスプレッドシートのように使う]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1627787470,
      "updated": 1627787474
    },
    {
      "id": "610610d21280f00000ee5048",
      "text": " [リアルタイム版ScrapCalc]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1627787474,
      "updated": 1627787487
    },
    {
      "id": "604da12cdb62ad000062512d",
      "text": "",
      "userId": "5b8d55ab7d11180014db62ad",
      "created": 1615700268,
      "updated": 1615700268
    },
    {
      "id": "604da12edb62ad000062512e",
      "text": "環境依存しそうですが、下記のkeypressをkeydownにする必要がありました[yanma.icon]",
      "userId": "5b8d55ab7d11180014db62ad",
      "created": 1615700270,
      "updated": 1615700344
    },
    {
      "id": "604da15bdb62ad0000625131",
      "text": "\t[/masui/ScrapCalc#604bd6858ee92a0000b377bd]",
      "userId": "5b8d55ab7d11180014db62ad",
      "created": 1615700316,
      "updated": 1615700320
    },
    {
      "id": "604da132db62ad000062512f",
      "text": " [keydownとkeypress]",
      "userId": "5b8d55ab7d11180014db62ad",
      "created": 1615700274,
      "updated": 1615700333
    },
    {
      "id": "604da16cdb62ad0000625132",
      "text": "  Ctrlキーでkeypressイベントが出ない場合があるようです。",
      "userId": "5b8d55ab7d11180014db62ad",
      "created": 1615700332,
      "updated": 1615700375
    },
    {
      "id": "604dcd9e8ee92a0000a3b8a3",
      "text": "  修正しました! [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1615711646,
      "updated": 1615719998
    },
    {
      "id": "604da190db62ad0000625133",
      "text": "",
      "userId": "5b8d55ab7d11180014db62ad",
      "created": 1615700368,
      "updated": 1615700368
    },
    {
      "id": "60a4b8a51280f00000344b4c",
      "text": "[ScrapCalc]が機能しなくなっちゃった？",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621407909,
      "updated": 1621407912
    },
    {
      "id": "64575df8774b170000bf6288",
      "text": "　2023/5/7 変数に`2023/5〜2023/4`を使うと以下のエラーがでました[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1683447289,
      "updated": 1683447508
    },
    {
      "id": "64575f2d774b170000bf62a6",
      "text": "　　頭に数字が入るとダメみたい[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1683447598,
      "updated": 1683447604
    },
    {
      "id": "64575fbc774b170000bf62a7",
      "text": "　　`/`も割り算になるからダメか[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1683447740,
      "updated": 1683447745
    },
    {
      "id": "64575e0a774b170000bf628b",
      "text": "　　code:js",
      "userId": "59fb21121207900012774b17",
      "created": 1683447306,
      "updated": 1683447392
    },
    {
      "id": "64575e60774b170000bf628c",
      "text": "　　 function scrapcalc_exec(){",
      "userId": "59fb21121207900012774b17",
      "created": 1683447392,
      "updated": 1683447392
    },
    {
      "id": "64575e60774b170000bf628d",
      "text": "      for(let e of document.querySelectorAll('.deco-\\\\%')){",
      "userId": "59fb21121207900012774b17",
      "created": 1683447392,
      "updated": 1683447392
    },
    {
      "id": "64575e60774b170000bf628e",
      "text": "         let text = e.innerText;",
      "userId": "59fb21121207900012774b17",
      "created": 1683447392,
      "updated": 1683447392
    },
    {
      "id": "64575e60774b170000bf628f",
      "text": "         // 全角カギカッコを配列などで使えるようにする苦しい工夫",
      "userId": "59fb21121207900012774b17",
      "created": 1683447392,
      "updated": 1683447392
    },
    {
      "id": "64575e60774b170000bf6290",
      "text": "         let expr = decodeURI(text).replaceAll('［','[').replaceAll('］',']')",
      "userId": "59fb21121207900012774b17",
      "created": 1683447392,
      "updated": 1683447392
    },
    {
      "id": "64575e60774b170000bf6291",
      "text": "         if(text.match(/=/)){",
      "userId": "59fb21121207900012774b17",
      "created": 1683447392,
      "updated": 1683447392
    },
    {
      "id": "64575e60774b170000bf6292",
      "text": "             (0,eval)(expr); // 何故かこれでstrictが有効でなくなる? <- ここでエラー",
      "userId": "59fb21121207900012774b17",
      "created": 1683447392,
      "updated": 1683447418
    },
    {
      "id": "64575e60774b170000bf6293",
      "text": "         }",
      "userId": "59fb21121207900012774b17",
      "created": 1683447392,
      "updated": 1683447392
    },
    {
      "id": "64575e86774b170000bf629e",
      "text": "         // 省略",
      "userId": "59fb21121207900012774b17",
      "created": 1683447431,
      "updated": 1683447433
    },
    {
      "id": "64575df8774b170000bf6289",
      "text": "　　code:console",
      "userId": "59fb21121207900012774b17",
      "created": 1683447289,
      "updated": 1683447441
    },
    {
      "id": "64575e91774b170000bf629f",
      "text": "　　 dex.js:2 Uncaught SyntaxError: Invalid or unexpected token",
      "userId": "59fb21121207900012774b17",
      "created": 1683447441,
      "updated": 1683447441
    },
    {
      "id": "64575e91774b170000bf62a0",
      "text": "       at eval (<anonymous>)",
      "userId": "59fb21121207900012774b17",
      "created": 1683447441,
      "updated": 1683447441
    },
    {
      "id": "64575e91774b170000bf62a1",
      "text": "       at scrapcalc_exec (script.js:7:19)",
      "userId": "59fb21121207900012774b17",
      "created": 1683447441,
      "updated": 1683447441
    },
    {
      "id": "6457a2b41280f000003acd4c",
      "text": "  `text.match(/=/)`がなにをしているのかわからない[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683464885,
      "updated": 1683464913
    },
    {
      "id": "6457a2d21280f000003acd4d",
      "text": "   上の説明を見る限り、`=`を使っているかどうかに関わらず実行しているように見える",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683464914,
      "updated": 1683464945
    },
    {
      "id": "6457a2f01280f000003acd4e",
      "text": "  `decodeURI`いるのかな",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683464945,
      "updated": 1683464963
    },
    {
      "id": "6457a3251280f000003acd50",
      "text": " 変数名を`2023/5〜2023/4`にしたということですか？[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683464998,
      "updated": 1683465074
    },
    {
      "id": "6457a604774b170000d90397",
      "text": "  2023/5〜2023/4のX=...にしました[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1683465733,
      "updated": 1683465788
    },
    {
      "id": "6457a7001280f000003acd63",
      "text": "  たとえば[% 2023/5〜2023/4のX=45 * 56]のように書いて実行したということでしょうか？[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683465984,
      "updated": 1683466022
    },
    {
      "id": "6457a850774b170000d9039e",
      "text": "  そうです[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1683466321,
      "updated": 1683466324
    },
    {
      "id": "6457a64d774b170000d90399",
      "text": " 結論としては頭に数字を使ってはいけないのと/は使えない。JavaScriptの制約[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1683465805,
      "updated": 1683465870
    },
    {
      "id": "6457a6c41280f000003acd62",
      "text": "  変数名の先頭に数字を使える言語と/を含められる言語がそもそもなさそう[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683465925,
      "updated": 1683465959
    },
    {
      "id": "6457a858774b170000d9039f",
      "text": "  これを使っている時にJavaScriptで計算するぞ〜という意識はないので、できないとなんで？と思った[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1683466329,
      "updated": 1683466449
    },
    {
      "id": "64575e92774b170000bf62a3",
      "text": "  なるほど使うときのメンタルモデルの違いかな[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683447446,
      "updated": 1683466481
    },
    {
      "id": "6457a8f01280f000003acd6a",
      "text": "   自分はコードとしか見てなかったので、変数に自由な文字を入れるという発想がなかった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683466481,
      "updated": 1683466529
    },
    {
      "id": "6457a9211280f000003acd6b",
      "text": " 自由に変数を使えるようにするには",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683466529,
      "updated": 1683466547
    },
    {
      "id": "6457a9321280f000003acd6d",
      "text": "  とりあえず内部で変数として使える何らかの文字列に変換して対応づければいい[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683466547,
      "updated": 1683466634
    },
    {
      "id": "6457a9551280f000003acd6e",
      "text": "  [MD5]で小文字alphabetのみで構成されたハッシュ値を生成して、それらと`Map`で結びつければいいだろう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683466582,
      "updated": 1683466628
    },
    {
      "id": "6457a8cf1280f000003acd69",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1683466448,
      "updated": 1683466448
    },
    {
      "id": "6457a978774b170000d903a0",
      "text": "  こういうのを作り込んでいくと泥酔志向で使えるソフトになっていく[基素.icon]",
      "userId": "59fb21121207900012774b17",
      "created": 1683466617,
      "updated": 1683466646
    },
    {
      "id": "60a4b8a61280f00000344b4d",
      "text": "　[/sta/ScrapCalcが動かなくなった]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621407910,
      "updated": 1621407912
    },
    {
      "id": "60a4b8aa1280f00000344b4e",
      "text": "　`=`の文字装飾記法がなくなってしまったようだ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621407914,
      "updated": 1621407934
    },
    {
      "id": "60a4c1d9e5172d000032069b",
      "text": "　なんと[yosider.icon][sta.icon]",
      "userId": "5a4873ab2e26fb001479d3a9",
      "created": 1621410262,
      "updated": 1627789938
    },
    {
      "id": "60a4c202e5172d000032069c",
      "text": "　一応一時的なものだったらしい",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621410302,
      "updated": 1621410314
    },
    {
      "id": "60a4c20de5172d000032069d",
      "text": "　　[/help-jp/リリースノート2021#60461ba997c291000007d765]",
      "userId": "5c30ba88e98efe0017e5172d",
      "created": 1621410314,
      "updated": 1621410316
    },
    {
      "id": "60ad86e08ee92a00001caee6",
      "text": "　「=」は使うなと[shokai.icon]に言われたので「%」に変更しました [増井俊之.icon]",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621984993,
      "updated": 1622168758
    },
    {
      "id": "60ad87028ee92a00001caee7",
      "text": "　 すみません",
      "userId": "566fa156776c9b11008ee92a",
      "created": 1621985027,
      "updated": 1621985030
    },
    {
      "id": "60a4b8aa1280f00000344b4f",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1621407914,
      "updated": 1621407914
    },
    {
      "id": "62e5f920055332000016fbfb",
      "text": "行で列挙して足してくれるのはこれじゃないですよね",
      "userId": "5d131fa66fe2890017055332",
      "created": 1659238688,
      "updated": 1659238696
    },
    {
      "id": "62e5f921055332000016fbfc",
      "text": "",
      "userId": "5d131fa66fe2890017055332",
      "created": 1659238690,
      "updated": 1659238690
    }
  ]
}