{
  "id": "6929187667431ea3006e5f88",
  "title": "CSSカスタムプロパティを変更するUserScript",
  "created": 1764300944,
  "updated": 1764302061,
  "lines": [
    {
      "id": "6929187667431ea3006e5f88",
      "text": "CSSカスタムプロパティを変更するUserScript",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300944,
      "updated": 1764300944
    },
    {
      "id": "6929188f00000000006cead7",
      "text": "[テーブル記法]で書かれた[CSSカスタムプロパティ]（CSS変数）をセットする（変更する）UserScriptです。",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300944,
      "updated": 1764302061
    },
    {
      "id": "6929189000000000006cead8",
      "text": "テーブルの書式は",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006cead9",
      "text": "table:sample-list",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceada",
      "text": " カスタムプロパティ\tプロパティ値\tコメント",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceadb",
      "text": " --body-bg\t#202228\t全体の背景色",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceadc",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceadd",
      "text": "1カラム目がCSS カスタムプロパティの名前、2カラム目がCSS カスタムプロパティの値です",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceade",
      "text": "3カラム目以降は無視されます",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceadf",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceae0",
      "text": "APIからアクセスするので、テーブルを記述するプロジェクトは公開プロジェクトでないといけません。",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceae1",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceae2",
      "text": "設定の仕方",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceae3",
      "text": "　テーブル記法でカスタムプロパティを記述します",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceae4",
      "text": "　API の からテーブルのアクセス確認",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189000000000006ceae5",
      "text": "　自分のページの`script.js`に追加",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300945,
      "updated": 1764300945
    },
    {
      "id": "6929189600000000006ceae6",
      "text": "code:sample-script.js",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300951,
      "updated": 1764301815
    },
    {
      "id": "6929198b00000000008a95be",
      "text": " import { loadAndSetCssVariables } from \"/api/code/villagepump/CSSカスタムプロパティを変更するUserScript/script.js\";",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764301196,
      "updated": 1764301196
    },
    {
      "id": "6929198b00000000008a95bf",
      "text": "   loadAndSetCssVariables(\"/api/table/villagepump/suto3/property-list.csv\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764301196,
      "updated": 1764301196
    },
    {
      "id": "6929198b00000000008a95c0",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764301196,
      "updated": 1764301196
    },
    {
      "id": "6929199c00000000008a95c1",
      "text": "`loadAndSetCssVariables()`で渡す引数はテーブル記法のURLです。",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764301213,
      "updated": 1764301302
    },
    {
      "id": "6929199c00000000008a95c2",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764301213,
      "updated": 1764301213
    },
    {
      "id": "6929189800000000006ceae7",
      "text": "code:script.js",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300953,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceae8",
      "text": " // script.js",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceae9",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaea",
      "text": " /**",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaeb",
      "text": "  * Fetches a CSV file and sets its contents as CSS variables on the root element.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaec",
      "text": "  * Column 1 is used as the variable name (prefixed with --), and Column 2 as the value.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaed",
      "text": "  * @param {string} url - The URL of the CSV file to fetch.",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaee",
      "text": "  */",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaef",
      "text": " export const loadAndSetCssVariables = async (url) => {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaf0",
      "text": "   try {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaf1",
      "text": "     const response = await fetch(url);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaf2",
      "text": "     if (!response.ok) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaf3",
      "text": "       throw new Error(`Network response was not ok: ${response.statusText}`);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaf4",
      "text": "     }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaf5",
      "text": "     const text = await response.text();",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaf6",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaf7",
      "text": "     const lines = text.split(\"\\n\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaf8",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaf9",
      "text": "     // Remove header and process lines",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceafa",
      "text": "     lines.slice(1).forEach(line => {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceafb",
      "text": "       if (!line.trim()) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceafc",
      "text": "         return; // Skip empty lines",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceafd",
      "text": "       }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceafe",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceaff",
      "text": "       const columns = line.split(\",\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb00",
      "text": "       if (columns.length >= 2) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb01",
      "text": "         // Sanitize name for CSS variable format (e.g., remove invalid characters)",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb02",
      "text": "         let name = `--${columns[0].trim().replace(/[^a-zA-Z0-9-]/g, \"-\")}`;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb03",
      "text": "         // Coalesce 3 or more hyphens at the start into 2",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb04",
      "text": "         name = name.replace(/^-{3,}/g, \"--\");",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb05",
      "text": "         const value = columns[1].trim().replace(/[[\\\\\\]]/g, \"\"); // Clean value like [url]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb06",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb07",
      "text": "         if (name !== \"--\") {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb08",
      "text": "           document.documentElement.style.setProperty(name, value);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb09",
      "text": "           console.log(`Set CSS variable: ${name} = ${value}`);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb0a",
      "text": "         }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb0b",
      "text": "       }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb0c",
      "text": "     });",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb0d",
      "text": " ",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb0e",
      "text": "   } catch (error) {",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb0f",
      "text": "     console.error(\"Failed to load or set CSS variables:\", error);",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb10",
      "text": "     // Re-throw the error to allow the caller to handle it if needed",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb11",
      "text": "     throw error;",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb12",
      "text": "   }",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb13",
      "text": " };",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "692918b400000000006ceb14",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764300980
    },
    {
      "id": "69291a0100000000008a95c3",
      "text": "[UserScript.icon]",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764301313,
      "updated": 1764301321
    },
    {
      "id": "692918b400000000006ceb15",
      "text": "#井戸端アドベントカレンダー2025",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764300980,
      "updated": 1764301336
    },
    {
      "id": "69291a1500000000008a95c4",
      "text": "",
      "userId": "5b5e7121417cf700145b98c2",
      "created": 1764301333,
      "updated": 1764301333
    }
  ]
}