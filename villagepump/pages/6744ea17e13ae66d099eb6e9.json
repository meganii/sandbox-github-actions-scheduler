{
  "id": "6744ea17e13ae66d099eb6e9",
  "title": "javascriptのよく使うスニペット集",
  "created": 1732569625,
  "updated": 1733720117,
  "lines": [
    {
      "id": "6744ea17e13ae66d099eb6e9",
      "text": "javascriptのよく使うスニペット集",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569625,
      "updated": 1732569625
    },
    {
      "id": "6744ea2171b3c200001645db",
      "text": "[javascript]",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569633,
      "updated": 1732570348
    },
    {
      "id": "6744eaea71b3c200001645e8",
      "text": "寝る",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569834,
      "updated": 1732569836
    },
    {
      "id": "6744eaf171b3c200001645e9",
      "text": "\t通常版",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569842,
      "updated": 1732570171
    },
    {
      "id": "6744ed2471b3c20000164645",
      "text": "\t\tcode:sleep.js",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570404,
      "updated": 1732570410
    },
    {
      "id": "6744ed2971b3c20000164646",
      "text": "\t\t function sleep(delay) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570410,
      "updated": 1732570415
    },
    {
      "id": "6744ed2971b3c20000164647",
      "text": "      return new Promise((resolve, reject) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570410,
      "updated": 1732570410
    },
    {
      "id": "6744ed2971b3c20000164648",
      "text": "          setTimeout(resolve, delay);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570410,
      "updated": 1732570410
    },
    {
      "id": "6744ed2971b3c20000164649",
      "text": "      });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570410,
      "updated": 1732570410
    },
    {
      "id": "6744ed2971b3c2000016464a",
      "text": "   }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570410,
      "updated": 1732570410
    },
    {
      "id": "6744ea1a71b3c200001645da",
      "text": "  code:sleep.ts",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569627,
      "updated": 1732569856
    },
    {
      "id": "6744ea8e71b3c200001645e2",
      "text": "   function sleep(delay: number): Promise<void> {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569743,
      "updated": 1732569856
    },
    {
      "id": "6744ea8e71b3c200001645e3",
      "text": "      return new Promise((resolve, reject) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569743,
      "updated": 1732569856
    },
    {
      "id": "6744ea8e71b3c200001645e4",
      "text": "          setTimeout(resolve, delay);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569743,
      "updated": 1732569856
    },
    {
      "id": "6744ea8e71b3c200001645e5",
      "text": "      });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569743,
      "updated": 1732569856
    },
    {
      "id": "6744ea8e71b3c200001645e6",
      "text": "   }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569743,
      "updated": 1732569856
    },
    {
      "id": "6744ef9e71b3c20000164655",
      "text": "  使い方",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571038,
      "updated": 1732571041
    },
    {
      "id": "6744efa271b3c20000164656",
      "text": "  \tcode:使い方.js",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571042,
      "updated": 1732571078
    },
    {
      "id": "6744efa571b3c20000164657",
      "text": "  \t sleep(500).then(()=>{",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571045,
      "updated": 1732571060
    },
    {
      "id": "6744efb871b3c20000164659",
      "text": "  \t   //500ミリ秒待ったあとの処理",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571064,
      "updated": 1732571071
    },
    {
      "id": "6744efb371b3c20000164658",
      "text": "  \t });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571060,
      "updated": 1732571061
    },
    {
      "id": "6744efca71b3c2000016465a",
      "text": "  \t //500ミリ秒待ってる間の処理",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571082,
      "updated": 1732571097
    },
    {
      "id": "6744eb0371b3c200001645ea",
      "text": " [AbortController]対応版",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569859,
      "updated": 1732570168
    },
    {
      "id": "6744ed0371b3c20000164634",
      "text": " \tcode:sleep_ac.js",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570371,
      "updated": 1732570381
    },
    {
      "id": "6744ed0771b3c20000164635",
      "text": " \t function sleep(delay, signal) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570392
    },
    {
      "id": "6744ed0871b3c20000164636",
      "text": "       return new Promise((resolve, reject) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c20000164637",
      "text": "           const timeout = setTimeout(resolve, delay);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c20000164638",
      "text": "           if (typeof signal != \"undefined\") {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c20000164639",
      "text": "               signal.addEventListener(\"abort\", () => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c2000016463a",
      "text": "                   clearTimeout(timeout);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c2000016463b",
      "text": "                   reject(\"aborted\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c2000016463c",
      "text": "               }, { once: true });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c2000016463d",
      "text": "           }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c2000016463e",
      "text": "       });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c2000016463f",
      "text": "   }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c20000164640",
      "text": "   // 使用例",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c20000164641",
      "text": "   const ac = new AbortController();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c20000164642",
      "text": "   sleep(500, ac.signal);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c20000164643",
      "text": "   // 止める時",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744ed0871b3c20000164644",
      "text": "   ac.abort();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570376,
      "updated": 1732570376
    },
    {
      "id": "6744eb4571b3c200001645f1",
      "text": "  code:sleep_ac.ts",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569926,
      "updated": 1732570383
    },
    {
      "id": "6744eb4571b3c200001645f2",
      "text": "   function sleep(delay: number, signal?: AbortSignal) {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732569926,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c20000164621",
      "text": "       return new Promise((resolve, reject) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c20000164622",
      "text": "           const timeout = setTimeout(resolve, delay);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c20000164623",
      "text": "           if (typeof signal != \"undefined\") {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c20000164624",
      "text": "               signal.addEventListener(\"abort\", () => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c20000164625",
      "text": "                   clearTimeout(timeout);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c20000164626",
      "text": "                   reject(\"aborted\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c20000164627",
      "text": "               }, { once: true });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c20000164628",
      "text": "           }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c20000164629",
      "text": "       });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c2000016462a",
      "text": "   }",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c2000016462b",
      "text": "   // 使用例",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c2000016462c",
      "text": "   const ac = new AbortController();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c2000016462d",
      "text": "   sleep(500, ac.signal);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c2000016462e",
      "text": "   // 止める時",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744ec2b71b3c2000016462f",
      "text": "   ac.abort();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570156,
      "updated": 1732570156
    },
    {
      "id": "6744edb571b3c2000016464b",
      "text": "  もうちょっとマシな使用例",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570550,
      "updated": 1732570555
    },
    {
      "id": "6744edbb71b3c2000016464c",
      "text": "  \tcode:fetch_timeout.ts",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570555,
      "updated": 1732570563
    },
    {
      "id": "6744edc371b3c2000016464d",
      "text": "  \t const fetch_ac = new AbortController();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732570563,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c2000016465b",
      "text": "    const timeout_ac = new AbortController();",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c2000016465c",
      "text": "    Promise.race([",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c2000016465d",
      "text": "        sleep(500, timeout_ac.signal).then(() => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c2000016465e",
      "text": "            fetch_ac.abort(\"タイムアウト\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c2000016465f",
      "text": "            return Promise.reject(\"タイムアウト\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c20000164660",
      "text": "        }),",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c20000164661",
      "text": "        fetch(\"http://www.example.org/\", { signal: fetch_ac.signal }).then(",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c20000164662",
      "text": "            (res) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c20000164663",
      "text": "                timeout_ac.abort(\"fetchが完了しました\");",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c20000164664",
      "text": "                return res;",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c20000164665",
      "text": "            },",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c20000164666",
      "text": "        ),",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c20000164667",
      "text": "    ]).then((res) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c20000164668",
      "text": "        console.log(res);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c20000164669",
      "text": "    }).catch((rea) => {",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c2000016466a",
      "text": "        console.error(rea);",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744f12571b3c2000016466b",
      "text": "    });",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1732571429,
      "updated": 1732571429
    },
    {
      "id": "6744ea8e71b3c200001645e7",
      "text": " [AbortController]対応版は、[jsr:@std/async]で`delay`関数として実装されている",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1732569743,
      "updated": 1733720101
    },
    {
      "id": "675678271280f00000e92c0a",
      "text": "  いちいち自分で書かずに済んで便利[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1733720103,
      "updated": 1733720117
    },
    {
      "id": "675678001280f00000e92c09",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1733720064,
      "updated": 1733720064
    }
  ]
}