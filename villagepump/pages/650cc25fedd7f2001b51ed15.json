{
  "id": "650cc25fedd7f2001b51ed15",
  "title": "⬜タイトル付き外部リンク記法のYoutubeリンクがサムネ取得の対象になっている",
  "created": 1695335008,
  "updated": 1726878606,
  "lines": [
    {
      "id": "650cc25fedd7f2001b51ed15",
      "text": "⬜タイトル付き外部リンク記法のYoutubeリンクがサムネ取得の対象になっている",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1695335008,
      "updated": 1726878604
    },
    {
      "id": "650cc3b01280f00000418b14",
      "text": "[scrapbox-userscript-std]のバグ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335344,
      "updated": 1695335353
    },
    {
      "id": "650cc3b91280f00000418b16",
      "text": " [2023/01/03]で修正済みと思っていたが、[2023/09/21]で直ってなかったことが判明",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335354,
      "updated": 1695335385
    },
    {
      "id": "66ee12431280f00000b276b4",
      "text": "2024-09-21 09:24:36 [/takker/✅️️タイトル付きyoutubeリンクはサムネイルにしない (scrapbox-userscript-std)]で直したはずだけどどうじゃろ[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1726878276,
      "updated": 1726878606
    },
    {
      "id": "650cc3b01280f00000418b15",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335344,
      "updated": 1695335344
    },
    {
      "id": "650cc2601280f0000000fc6601",
      "text": "from [2023/01/03]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f000000072b027",
      "text": "[dokudami.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f00000004b8667",
      "text": "\t[https://youtu.be/sXrkgyxATwg ASIAN KUNG-FU GENERATION　『転がる岩、君に朝が降る』 - YouTube]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000dc9904",
      "text": "\t\t[https://www.nicovideo.jp/watch/so41178183 ぼっち・ざ・ろっく！ #1「転がるぼっち」 - ニコニコ動画]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000634905",
      "text": "\t\t[https://www.nicovideo.jp/watch/so41559959 ぼっち・ざ・ろっく！ #12「君に朝が降る」 - ニコニコ動画]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f000000063d5b0",
      "text": "\t\tこの日記ページのサムネイル画像が、本曲のサムネイル画像になったり下の仮面ライダー動画のそれになったりして安定しない現象が起きている[hatori.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000f0ceff",
      "text": "  　[おま環]？",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f00000008344b7",
      "text": "  　動画を埋め込まなくても[リンクを貼る]だけでサムネイル画像が出る？",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f000000055a7e9",
      "text": "  　　これは[個人project]でやってみると再現されない（サムネイルは出ない）",
      "userId": "661b6e882a96e9002371b3c2",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000240dad",
      "text": "  　井戸端特有の何かが影響している？",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000e041a7",
      "text": "  　[量子サムネイル]かな？[inajob.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f00000006284e6",
      "text": "  　\t自分の環境でも起きてます",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f000000011c481",
      "text": "  　\tpin-diaryが悪さをしているということっぽい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000acb0f2",
      "text": "  　\t\tScrapbox上のUIからページ編集すると下の仮面ライダーになる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000b8ced0",
      "text": "  　\t\tpin-diaryが更新すると上の動画になる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f00000005983b0",
      "text": "  　\t\t\t短縮表記のYouTube動画もサムネ取得の対象になっている？",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f000000003f6f9",
      "text": "   　\t\t......[タイトル付き外部リンク記法]のYoutubeリンクがサムネ取得の対象になってしまっているかも[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335086
    },
    {
      "id": "650cc2601280f0000000e40fe3",
      "text": "   　\t\t ビンゴ",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000704ba0",
      "text": "   　\t\t [Youtubeリンクからのサムネイル取得処理 https://github.com/takker99/scrapbox-userscript-std/blob/0.17.0/browser/websocket/makeChanges.ts#L97-L100]は`parseYoutube()`に委譲している",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f000000045c12f",
      "text": "   　\t\t これはv0.15.0で[#95 https://github.com/takker99/scrapbox-userscript-std/pull/95]をmergeするまで、タイトル付き外部リンクかどうかを判定していなかった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f00000002ffcc7",
      "text": "   　\t\t  本来は`[https://youtu.be/...]`のようなタイトルなしリンクのみが、Youtube埋め込みとして機能する",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000270156",
      "text": "   　\t\t つまりv0.15.0以前のscrapbox-userscript-stdでbundleしたpin-diaryを使うと量子サムネイルになってしまう",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000049f1e",
      "text": "   　\t\t 解決策は[pin-diary-6]の依存ライブラリのversionを上げること",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f00000009e4fa8",
      "text": "   　\t\t ついでに[Mijinko_SD.icon]さんに頼まれてた修正もやろう[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000f108ee",
      "text": "  　\t\tっぽい",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000610345",
      "text": "　　　量子サムネイル、生きていたのか[cFQ2f7LRuLYP.icon]",
      "userId": "60508ed36a7abc00235e90c0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc2601280f0000000205401",
      "text": "　　　　[何度でも蘇るさ][nishio.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335008,
      "updated": 1695335008
    },
    {
      "id": "650cc26d1280f00000418b03",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335021,
      "updated": 1695335021
    },
    {
      "id": "650cc2831280f000000044d19f",
      "text": "from [2023/09/21]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335042,
      "updated": 1695335042
    },
    {
      "id": "650cc2831280f00000009f6d77",
      "text": "[https://gyazo.com/fae938fce67593bcd6164a85481fea84]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335042,
      "updated": 1695335057
    },
    {
      "id": "650cc2831280f0000000d5a4c1",
      "text": " 埋め込みがないのに表示されている?[wogikaze.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335042,
      "updated": 1695335061
    },
    {
      "id": "650cc29b1280f00000418b05",
      "text": " youtubeの[タイトル付き外部リンク記法]を埋め込みだと認識してしまっている[takker.icon]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335067,
      "updated": 1695335140
    },
    {
      "id": "650cc2b81280f00000418b0b",
      "text": " ↑にある通り[#95 https://github.com/takker99/scrapbox-userscript-std/pull/95]で直したつもりに鳴ってたが、よく見たら全然直ってなかった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335096,
      "updated": 1695335109
    },
    {
      "id": "650cc29b1280f00000418b06",
      "text": "  `parseAbsoluteLink()`にタイトル付きリンクを弾く条件分岐を入れた",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335067,
      "updated": 1695335161
    },
    {
      "id": "650cc2f91280f00000418b0c",
      "text": "  しかし肝心のyoutubeサムネ取得処理でそれを使わなかった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335161,
      "updated": 1695335163
    },
    {
      "id": "650cc2fc1280f00000418b0e",
      "text": "   [https://code2svg.vercel.app/svg/L117-122,blanks=2/https://raw.githubusercontent.com/takker99/scrapbox-userscript-std/0.24.3/browser/websocket/makeChanges.ts#.svg https://github.com/takker99/scrapbox-userscript-std/blob/0.24.3/browser/websocket/makeChanges.ts#L117-L122]",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335164,
      "updated": 1695335164
    },
    {
      "id": "650cc3f21280f00000418b17",
      "text": "   `if (node.content) return;`でタイトル付きリンクを弾いてない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335410,
      "updated": 1695335422
    },
    {
      "id": "650cc2b71280f00000418b09",
      "text": "　　結局バグが放置される事になってしまった",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335095,
      "updated": 1695335186
    },
    {
      "id": "650cc3121280f00000418b10",
      "text": "　修正方法",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335186,
      "updated": 1695335212
    },
    {
      "id": "650cc32d1280f00000418b11",
      "text": "  ❌`const props = parseYoutube(node.href);`の前に`if (node.content) return;`を入れる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335213,
      "updated": 1695335407
    },
    {
      "id": "650cc3331280f00000418b12",
      "text": "   タイトル付きリンク除外処理が`parseAbsoluteLink()`とこことの二箇所に分散してしまい、メンテがめんどくなる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335219,
      "updated": 1695335253
    },
    {
      "id": "650cc2b71280f00000418b0a",
      "text": "  ✅`parseYoutube`を`parseAbsoluteLink`に置き換える",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335095,
      "updated": 1695335274
    },
    {
      "id": "650cc3891280f00000418b13",
      "text": "   タイトル付きリンク除外処理を`parseAbsoluteLink()`に統合できる",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335305,
      "updated": 1695335320
    },
    {
      "id": "650cc2831280f0000000d1b5ff",
      "text": "   `!props || props.pathType === \"list\"`をちょっと書き換える必要があるが、大した手間ではない",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335042,
      "updated": 1695335303
    },
    {
      "id": "650cc2831280f0000000a29a12",
      "text": "",
      "userId": "5ef2bdebb60650001e1280f0",
      "created": 1695335042,
      "updated": 1695335042
    }
  ]
}